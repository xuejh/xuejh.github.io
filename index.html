<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="博客">
<meta property="article:author" content="Jinhui Xue">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-算法/算法第一课" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/14/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%AC%E4%B8%80%E8%AF%BE/" class="article-date">
  <time datetime="2020-07-14T02:27:49.000Z" itemprop="datePublished">2020-07-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/14/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%AC%E4%B8%80%E8%AF%BE/">算法第一课</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>首先我们看一个最简单的问题，假设有一些数字，比如：9，4，3，6，10，我们需要对这几个数字从小到大进行排序。</p>
<p>按照比较正常的思维应该是：</p>
<ol>
<li>把这一组数用数组存储</li>
<li>遍历数组找到最小的数放在第一个</li>
<li>遍历第二个到最后的数，找到最小的数放在第二个</li>
<li>…</li>
<li>直到剩下最后一个数为止</li>
</ol>
<p>用C++代码实现为：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">baseSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;n; j++) &#123;</span><br><span class="line">            <span class="comment">//让第i个数与i+1后面的数进行比较，如果比i小即交换，这样能保证i位是最小的数。</span></span><br><span class="line">            <span class="keyword">if</span> (a[j]&lt;a[i]) &#123;</span><br><span class="line">                <span class="keyword">int</span> temp = a[j];</span><br><span class="line">                a[j] = a[i];</span><br><span class="line">                a[i] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//打印输出数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">"\t"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="comment">// insert code here...</span></span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">5</span>] = &#123;<span class="number">9</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">10</span>&#125;;</span><br><span class="line">    baseSort(a, <span class="number">5</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/14/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%AC%E4%B8%80%E8%AF%BE/" data-id="ckcnf5dd40000n3z7dvr15v5a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" rel="tag">数据结构与算法</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-杨亮讲英语/公开课/DAY1英语学习的五大误区" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/20/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/%E5%85%AC%E5%BC%80%E8%AF%BE/DAY1%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%BA%94%E5%A4%A7%E8%AF%AF%E5%8C%BA/" class="article-date">
  <time datetime="2020-06-20T02:56:45.000Z" itemprop="datePublished">2020-06-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/">公开课</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/20/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/%E5%85%AC%E5%BC%80%E8%AF%BE/DAY1%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%BA%94%E5%A4%A7%E8%AF%AF%E5%8C%BA/">DAY1英语学习的五大误区</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/20/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/%E5%85%AC%E5%BC%80%E8%AF%BE/DAY1%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%BA%94%E5%A4%A7%E8%AF%AF%E5%8C%BA/" data-id="ckclbeddz0009gvz7c625gf51" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/" rel="tag">杨亮讲英语</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-杨亮讲英语/公开课/杨亮老师有话说" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/20/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/%E5%85%AC%E5%BC%80%E8%AF%BE/%E6%9D%A8%E4%BA%AE%E8%80%81%E5%B8%88%E6%9C%89%E8%AF%9D%E8%AF%B4/" class="article-date">
  <time datetime="2020-06-20T02:36:33.000Z" itemprop="datePublished">2020-06-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/">公开课</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/20/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/%E5%85%AC%E5%BC%80%E8%AF%BE/%E6%9D%A8%E4%BA%AE%E8%80%81%E5%B8%88%E6%9C%89%E8%AF%9D%E8%AF%B4/">杨亮老师有话说</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Education is the most powerful weapon which you can use to change the world. –Nelson Mandela</p>
<p>教育是最具强有力的武器，你能用它改变世界。–纳尔逊.曼德拉</p>
<p>The limits of language are the limits of your world.</p>
<p>语言观决定了你的世界观。</p>
<p>Three passions simple but overwhelmingly strong have governed my life.</p>
<p>三种激情简单却无比强烈支配了我的一生。</p>
<p>the longing for love  对爱的渴望。</p>
<p>the search for knowledge 对只是的探讨</p>
<p>and  unbearable pity for the suffering of mankind.</p>
<p>和对人类苦难的难以忍受的怜悯。</p>
<p>I have a dream 我梦想 Martin Luther King，Jr。《我有一个梦想》马丁.路德.金</p>
<p>that my four little children will one day live in a nation where they will not be judged by the color of their skin but by the content of their character.</p>
<p>有一天我的四个孩子将在一个不是以他们的肤色，而是以他们的品格优劣来评价他们的国度里生活。</p>
<p>I have a dream today！</p>
<p>今天，我有一个梦想！</p>
<p>Education is not the filling of a pail,but the lighting of a fire.–William Butler Yeats</p>
<p>教育不是灌满一桶水，而是点燃一把火。–威廉.巴特勒.叶芝</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/20/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/%E5%85%AC%E5%BC%80%E8%AF%BE/%E6%9D%A8%E4%BA%AE%E8%80%81%E5%B8%88%E6%9C%89%E8%AF%9D%E8%AF%B4/" data-id="ckclbede7000egvz7hu69gysn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/" rel="tag">杨亮讲英语</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-antlr4权威指南/纵观全局" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E7%BA%B5%E8%A7%82%E5%85%A8%E5%B1%80/" class="article-date">
  <time datetime="2020-06-19T03:44:18.000Z" itemprop="datePublished">2020-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/">antlr4权威指南</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E7%BA%B5%E8%A7%82%E5%85%A8%E5%B1%80/">纵观全局</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E7%BA%B5%E8%A7%82%E5%85%A8%E5%B1%80/" data-id="ckclbeddr0001gvz767hh7rp5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" rel="tag">antlr4权威指南</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-antlr4权威指南/第一章初始ANTLR" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E7%AC%AC%E4%B8%80%E7%AB%A0%E5%88%9D%E5%A7%8BANTLR/" class="article-date">
  <time datetime="2020-06-19T03:15:55.000Z" itemprop="datePublished">2020-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/">antlr4权威指南</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E7%AC%AC%E4%B8%80%E7%AB%A0%E5%88%9D%E5%A7%8BANTLR/">第一章初始ANTLR</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装Antlr"><a href="#安装Antlr" class="headerlink" title="安装Antlr"></a>安装Antlr</h1><p>1.安装  brew install antlr(可能需要等一会，不过最后可以成功)</p>
<p>2.cd ~/</p>
<p>3.创建.bash_profile文件：(如果存在.bash_profile,直接跳第四步)</p>
<p>touch .bash_profile</p>
<p>4.打开.bash_profile并编辑：</p>
<p>open .bash_profile</p>
<p>5.这样就打开了一个记事本，会显示你之前配置过的path，修改记事本，一定要先备份，然后根据自己需要配置。</p>
<p>6.设置环境变量  export CLASSPATH=”.:/usr/local/Cellar/antlr/4.8_1/antlr-4.8-complete.jar:$CLASSPATH”(添加到文件的前面点可以成功，添加后面不确定)</p>
<p>7.command+s保存关闭文件(不要关闭终端)</p>
<p>8.返回终端,使修改后的配置生效命令：</p>
<p>source .bash_profile</p>
<p>修改了.bash_profile的配置,就会导致很多内置命令不能使用,会出现command not found 甚至连rm、cd、vi这些命令都不能使用,所以在今后的修改重要文件的过程中,首先要备份这个文件,然后再对文件进行修改添加.</p>
<p>9.测试:终端输入antlr，可以输出比较正常的内容一般就是成功了。</p>
<h2 id="设置别名"><a href="#设置别名" class="headerlink" title="设置别名"></a>设置别名</h2><p>alias antlr4=’java -jar /usr/local/Cellar/antlr/4.8_1/antlr-4.8-complete.jar’</p>
<h2 id="写入-usr-local-bin"><a href="#写入-usr-local-bin" class="headerlink" title="写入/usr/local/bin"></a>写入/usr/local/bin</h2><p>java -cp “/usr/local/Cellar/antlr/4.8_1/antlr-4.8-complete.jar:$CLASSPATH” org.antlr.v4.Tool $*</p>
<p>输入antlr4</p>
<p>输出如下信息证明成功了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">ANTLR Parser Generator  Version <span class="number">4.8</span></span><br><span class="line"> -o ___              specify output directory where all output is generated</span><br><span class="line"> -lib ___            specify location of grammars, tokens files</span><br><span class="line"> -atn                generate rule augmented transition network diagrams</span><br><span class="line"> -encoding ___       specify grammar file encoding; e.g., euc-jp</span><br><span class="line"> -message-format ___ specify output style <span class="keyword">for</span> messages in antlr, gnu, vs2005</span><br><span class="line"> -<span class="keyword">long</span>-messages      show exception details when available <span class="keyword">for</span> errors and warnings</span><br><span class="line"> -<span class="function">listener           generate parse tree <span class="title">listener</span> <span class="params">(<span class="keyword">default</span>)</span></span></span><br><span class="line"><span class="function"> -no-listener        don't generate parse tree listener</span></span><br><span class="line"><span class="function"> -visitor            generate parse tree visitor</span></span><br><span class="line"><span class="function"> -no-visitor         don't generate parse tree <span class="title">visitor</span> <span class="params">(<span class="keyword">default</span>)</span></span></span><br><span class="line"><span class="function"> -<span class="keyword">package</span> ___        specify a <span class="keyword">package</span>/namespace <span class="keyword">for</span> the generated code</span></span><br><span class="line"><span class="function"> -depend             generate file dependencies</span></span><br><span class="line"><span class="function"> -D&lt;option&gt;</span>=value    set/override a grammar-level option</span><br><span class="line"> -Werror             treat warnings as errors</span><br><span class="line"> -XdbgST             launch StringTemplate visualizer on generated code</span><br><span class="line"> -XdbgSTWait         wait <span class="keyword">for</span> STViz to close before continuing</span><br><span class="line"> -Xforce-atn         use the ATN simulator <span class="keyword">for</span> all predictions</span><br><span class="line"> -Xlog               dump lots of logging info to antlr-timestamp.log</span><br><span class="line"> -Xexact-output-dir  all output goes into -o dir regardless of paths/<span class="keyword">package</span></span><br><span class="line">(base) xuejinhuideMac-mini:bin ND$ antlr4</span><br><span class="line">ANTLR Parser Generator  Version <span class="number">4.8</span></span><br><span class="line"> -o ___              specify output directory where all output is generated</span><br><span class="line"> -lib ___            specify location of grammars, tokens files</span><br><span class="line"> -atn                generate rule augmented transition network diagrams</span><br><span class="line"> -encoding ___       specify grammar file encoding; e.g., euc-jp</span><br><span class="line"> -message-format ___ specify output style <span class="keyword">for</span> messages in antlr, gnu, vs2005</span><br><span class="line"> -<span class="keyword">long</span>-messages      show exception details when available <span class="keyword">for</span> errors and warnings</span><br><span class="line"> -<span class="function">listener           generate parse tree <span class="title">listener</span> <span class="params">(<span class="keyword">default</span>)</span></span></span><br><span class="line"><span class="function"> -no-listener        don't generate parse tree listener</span></span><br><span class="line"><span class="function"> -visitor            generate parse tree visitor</span></span><br><span class="line"><span class="function"> -no-visitor         don't generate parse tree <span class="title">visitor</span> <span class="params">(<span class="keyword">default</span>)</span></span></span><br><span class="line"><span class="function"> -<span class="keyword">package</span> ___        specify a <span class="keyword">package</span>/namespace <span class="keyword">for</span> the generated code</span></span><br><span class="line"><span class="function"> -depend             generate file dependencies</span></span><br><span class="line"><span class="function"> -D&lt;option&gt;</span>=value    set/override a grammar-level option</span><br><span class="line"> -Werror             treat warnings as errors</span><br><span class="line"> -XdbgST             launch StringTemplate visualizer on generated code</span><br><span class="line"> -XdbgSTWait         wait <span class="keyword">for</span> STViz to close before continuing</span><br><span class="line"> -Xforce-atn         use the ATN simulator <span class="keyword">for</span> all predictions</span><br><span class="line"> -Xlog               dump lots of logging info to antlr-timestamp.log</span><br><span class="line"> -Xexact-output-dir  all output goes into -o dir regardless of paths/<span class="keyword">package</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E7%AC%AC%E4%B8%80%E7%AB%A0%E5%88%9D%E5%A7%8BANTLR/" data-id="ckclbedds0003gvz79eym03q0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" rel="tag">antlr4权威指南</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-antlr4权威指南/前言" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E5%89%8D%E8%A8%80/" class="article-date">
  <time datetime="2020-06-19T02:47:45.000Z" itemprop="datePublished">2020-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/">antlr4权威指南</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E5%89%8D%E8%A8%80/">前言</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E5%89%8D%E8%A8%80/" data-id="ckclbeddn0000gvz79247g2cg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" rel="tag">antlr4权威指南</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/Antlr" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/Antlr/" class="article-date">
  <time datetime="2020-06-17T07:53:03.000Z" itemprop="datePublished">2020-06-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/Antlr/">Antlr</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="初识Antlr"><a href="#初识Antlr" class="headerlink" title="初识Antlr"></a>初识Antlr</h1><p>之前我们写过一些词法分析器，但是这些只能确实demo。而且要把所有的规则都扩展需要很多工作量。接下来我们使用工具生成词法分析器和语法分析器，同时生成的代码比较专业的代码。Antlr 是一个开源的工具，支持根据规则文件生成词法分析器和语法分析器，它自身是用 Java 实现的。</p>
<h1 id="安装Antlr"><a href="#安装Antlr" class="headerlink" title="安装Antlr"></a>安装Antlr</h1><p>1.安装  brew install antlr(可能需要等一会，不过最后可以成功)</p>
<p>2.cd ~/</p>
<p>3.创建.bash_profile文件：(如果存在.bash_profile,直接跳第四步)</p>
<p>touch .bash_profile</p>
<p>4.打开.bash_profile并编辑：</p>
<p>open .bash_profile</p>
<p>5.这样就打开了一个记事本，会显示你之前配置过的path，修改记事本，一定要先备份，然后根据自己需要配置。</p>
<p>6.设置环境变量  export CLASSPATH=”.:/usr/local/Cellar/antlr/4.8_1/antlr-4.8-complete.jar:$CLASSPATH”(添加到文件的前面点可以成功，添加后面不确定)</p>
<p>7.command+s保存关闭文件(不要关闭终端)</p>
<p>8.返回终端,使修改后的配置生效命令：</p>
<p>source .bash_profile</p>
<p>修改了.bash_profile的配置,就会导致很多内置命令不能使用,会出现command not found 甚至连rm、cd、vi这些命令都不能使用,所以在今后的修改重要文件的过程中,首先要备份这个文件,然后再对文件进行修改添加.</p>
<p>9.测试:终端输入antlr，可以输出比较正常的内容一般就是成功了。</p>
<h1 id="用-Antlr-生成词法分析器"><a href="#用-Antlr-生成词法分析器" class="headerlink" title="用 Antlr 生成词法分析器"></a>用 Antlr 生成词法分析器</h1><p>我们创建一个 Hello.g4 文件，用于保存词法规则，然后把之前用过的一些词法规则写进去。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">lexer grammar Hello;  <span class="comment">//lexer关键字意味着这是一个词法规则文件，名称是Hello，要与文件名相同</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//关键字</span></span><br><span class="line">If :               <span class="string">'if'</span>;</span><br><span class="line">Int :              <span class="string">'int'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//字面量</span></span><br><span class="line">IntLiteral:        [<span class="number">0</span>-<span class="number">9</span>]+;</span><br><span class="line">StringLiteral:      <span class="string">'"'</span> .*? <span class="string">'"'</span> ;  <span class="comment">//字符串字面量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//操作符</span></span><br><span class="line">AssignmentOP:       <span class="string">'='</span> ;    </span><br><span class="line">RelationalOP:       <span class="string">'&gt;'</span>|<span class="string">'&gt;='</span>|<span class="string">'&lt;'</span> |<span class="string">'&lt;='</span> ;    </span><br><span class="line">Star:               <span class="string">'*'</span>;</span><br><span class="line">Plus:               <span class="string">'+'</span>;</span><br><span class="line">Sharp:              <span class="string">'#'</span>;</span><br><span class="line">SemiColon:          <span class="string">';'</span>;</span><br><span class="line">Dot:                <span class="string">'.'</span>;</span><br><span class="line">Comm:               <span class="string">','</span>;</span><br><span class="line">LeftBracket :       <span class="string">'['</span>;</span><br><span class="line">RightBracket:       <span class="string">']'</span>;</span><br><span class="line">LeftBrace:          <span class="string">'&#123;'</span>;</span><br><span class="line">RightBrace:         <span class="string">'&#125;'</span>;</span><br><span class="line">LeftParen:          <span class="string">'('</span>;</span><br><span class="line">RightParen:         <span class="string">')'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//标识符</span></span><br><span class="line">Id :                [a-zA-Z_] ([a-zA-Z_] | [<span class="number">0</span>-<span class="number">9</span>])*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//空白字符，抛弃</span></span><br><span class="line">Whitespace:         [ \t]+ -&gt; skip;</span><br><span class="line">Newline:            ( <span class="string">'\r'</span> <span class="string">'\n'</span>?|<span class="string">'\n'</span>)-&gt; skip;</span><br></pre></td></tr></table></figure>

<p>接下来，我们来编译词法规则，在终端中输入命令：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">antlr Hello.g4</span><br></pre></td></tr></table></figure>

<p>这个命令是让 Antlr 编译规则文件，并生成 Hello.java 文件和其他两个辅助文件。你可以打开看一看文件里面的内容。接着，我用下面的命令编译 Hello.java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac *.java</span><br></pre></td></tr></table></figure>

<p>接下来，我们来写个脚本文件，让生成的词法分析器解析一下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> age = <span class="number">45</span>;</span><br><span class="line"><span class="keyword">if</span> (age &gt;= <span class="number">17</span>+<span class="number">8</span>+<span class="number">20</span>)&#123;</span><br><span class="line">  printf(<span class="string">"Hello old man!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们将上面的脚本存成 hello.play 文件，然后在终端输入下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grun Hello tokens -tokens hello.play</span><br></pre></td></tr></table></figure>

<p>grun 命令实际上是调用了我们刚才生成的词法分析器，即 Hello 类，打印出对 hello.play 词法分析的结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(base) xuejinhuideMac-mini:<span class="number">1</span> ND$ grun Hello tokens -tokens hello.play</span><br><span class="line">[@<span class="number">0</span>,<span class="number">1</span>:<span class="number">3</span>=<span class="string">'int'</span>,&lt;<span class="string">'int'</span>&gt;,<span class="number">2</span>:<span class="number">0</span>]</span><br><span class="line">[@<span class="number">1</span>,<span class="number">5</span>:<span class="number">7</span>=<span class="string">'age'</span>,&lt;Id&gt;,<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">[@<span class="number">2</span>,<span class="number">9</span>:<span class="number">9</span>=<span class="string">'='</span>,&lt;<span class="string">'='</span>&gt;,<span class="number">2</span>:<span class="number">8</span>]</span><br><span class="line">[@<span class="number">3</span>,<span class="number">11</span>:<span class="number">12</span>=<span class="string">'45'</span>,&lt;IntLiteral&gt;,<span class="number">2</span>:<span class="number">10</span>]</span><br><span class="line">[@<span class="number">4</span>,<span class="number">13</span>:<span class="number">13</span>=<span class="string">';'</span>,&lt;<span class="string">';'</span>&gt;,<span class="number">2</span>:<span class="number">12</span>]</span><br><span class="line">[@<span class="number">5</span>,<span class="number">15</span>:<span class="number">16</span>=<span class="string">'if'</span>,&lt;<span class="string">'if'</span>&gt;,<span class="number">3</span>:<span class="number">0</span>]</span><br><span class="line">[@<span class="number">6</span>,<span class="number">18</span>:<span class="number">18</span>=<span class="string">'('</span>,&lt;<span class="string">'('</span>&gt;,<span class="number">3</span>:<span class="number">3</span>]</span><br><span class="line">[@<span class="number">7</span>,<span class="number">19</span>:<span class="number">21</span>=<span class="string">'age'</span>,&lt;Id&gt;,<span class="number">3</span>:<span class="number">4</span>]</span><br><span class="line">[@<span class="number">8</span>,<span class="number">23</span>:<span class="number">24</span>=<span class="string">'&gt;='</span>,&lt;RelationalOP&gt;,<span class="number">3</span>:<span class="number">8</span>]</span><br><span class="line">[@<span class="number">9</span>,<span class="number">26</span>:<span class="number">27</span>=<span class="string">'17'</span>,&lt;IntLiteral&gt;,<span class="number">3</span>:<span class="number">11</span>]</span><br><span class="line">[@<span class="number">10</span>,<span class="number">28</span>:<span class="number">28</span>=<span class="string">'+'</span>,&lt;<span class="string">'+'</span>&gt;,<span class="number">3</span>:<span class="number">13</span>]</span><br><span class="line">[@<span class="number">11</span>,<span class="number">29</span>:<span class="number">29</span>=<span class="string">'8'</span>,&lt;IntLiteral&gt;,<span class="number">3</span>:<span class="number">14</span>]</span><br><span class="line">[@<span class="number">12</span>,<span class="number">30</span>:<span class="number">30</span>=<span class="string">'+'</span>,&lt;<span class="string">'+'</span>&gt;,<span class="number">3</span>:<span class="number">15</span>]</span><br><span class="line">[@<span class="number">13</span>,<span class="number">31</span>:<span class="number">32</span>=<span class="string">'20'</span>,&lt;IntLiteral&gt;,<span class="number">3</span>:<span class="number">16</span>]</span><br><span class="line">[@<span class="number">14</span>,<span class="number">33</span>:<span class="number">33</span>=<span class="string">')'</span>,&lt;<span class="string">')'</span>&gt;,<span class="number">3</span>:<span class="number">18</span>]</span><br><span class="line">[@<span class="number">15</span>,<span class="number">34</span>:<span class="number">34</span>=<span class="string">'&#123;'</span>,&lt;<span class="string">'&#123;'</span>&gt;,<span class="number">3</span>:<span class="number">19</span>]</span><br><span class="line">[@<span class="number">16</span>,<span class="number">38</span>:<span class="number">43</span>=<span class="string">'printf'</span>,&lt;Id&gt;,<span class="number">4</span>:<span class="number">2</span>]</span><br><span class="line">[@<span class="number">17</span>,<span class="number">44</span>:<span class="number">44</span>=<span class="string">'('</span>,&lt;<span class="string">'('</span>&gt;,<span class="number">4</span>:<span class="number">8</span>]</span><br><span class="line">[@<span class="number">18</span>,<span class="number">45</span>:<span class="number">60</span>=<span class="string">'"Hello old man!"'</span>,&lt;StringLiteral&gt;,<span class="number">4</span>:<span class="number">9</span>]</span><br><span class="line">[@<span class="number">19</span>,<span class="number">61</span>:<span class="number">61</span>=<span class="string">')'</span>,&lt;<span class="string">')'</span>&gt;,<span class="number">4</span>:<span class="number">25</span>]</span><br><span class="line">[@<span class="number">20</span>,<span class="number">62</span>:<span class="number">62</span>=<span class="string">';'</span>,&lt;<span class="string">';'</span>&gt;,<span class="number">4</span>:<span class="number">26</span>]</span><br><span class="line">[@<span class="number">21</span>,<span class="number">64</span>:<span class="number">64</span>=<span class="string">'&#125;'</span>,&lt;<span class="string">'&#125;'</span>&gt;,<span class="number">5</span>:<span class="number">0</span>]</span><br><span class="line">[@<span class="number">22</span>,<span class="number">65</span>:<span class="number">64</span>=<span class="string">'&lt;EOF&gt;'</span>,&lt;EOF&gt;,<span class="number">5</span>:<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p>从结果中看到，我们的词法分析器把每个 Token 都识别了，还记录了它们在代码中的位置、文本值、类别。上面这些都是 Token 的属性。以第二行[@1, 4:6=‘age’,&lt; Id &gt;,1:4]为例，其中 @1 是 Token 的流水编号，表明这是 1 号 Token；4:6 是 Token 在字符流中的开始和结束位置；age 是文本值，Id 是其 Token 类别；最后的 1:4 表示这个 Token 在源代码中位于第 1 行、第 4 列。</p>
<p><a href="https://github.com/xuejh/complicationBook/tree/master/06/1" target="_blank" rel="noopener">代码详见</a></p>
<h2 id="练习二"><a href="#练习二" class="headerlink" title="练习二"></a>练习二</h2><p>这个例子是将例如<code>&quot;hello abc&quot;</code>的字符串解析为抽象语法树。</p>
<p>在目录下新建语法文件<code>Hello.g4</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define a grammar called Hello</span></span><br><span class="line">grammar Hello;</span><br><span class="line">r  : <span class="string">'hello'</span> ID ;         <span class="comment">// match keyword hello followed by an identifier</span></span><br><span class="line">ID : [a-z]+ ;             <span class="comment">// match lower-case identifiers</span></span><br><span class="line">WS : [ \t\r\n]+ -&gt; skip ; <span class="comment">// skip spaces, tabs, newlines</span></span><br></pre></td></tr></table></figure>

<p>接着运行ANTLR，根据语法文件<code>Hello.g4</code>生成对应的词法分析和语法分析程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">antlr Hello.g4</span><br></pre></td></tr></table></figure>

<p>这时候文件夹下会多出几个文件（只选择典型的2个文件说明）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HelloLexer.java 词法分析</span><br><span class="line">HelloParser.java 语法分析</span><br></pre></td></tr></table></figure>

<p>然后利用javac对Java文件进行编译：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac Hello*.java</span><br></pre></td></tr></table></figure>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>首先是词法分析测试。启动<code>grun</code>，测试之前的语法：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grun Hello r -tokens</span><br><span class="line">hello parrt      # 输入要被识别的语句</span><br><span class="line">EOF              # 在UNIX/MAC系统上输入 Ctrl+D 来输入文件结束符</span><br></pre></td></tr></table></figure>

<p>下面就会显示词法分析结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[@<span class="number">0</span>,<span class="number">0</span>:<span class="number">4</span>=<span class="string">'hello'</span>,&lt;<span class="string">'hello'</span>&gt;,<span class="number">1</span>:<span class="number">0</span>]</span><br><span class="line">[@<span class="number">1</span>,<span class="number">6</span>:<span class="number">10</span>=<span class="string">'parrt'</span>,&lt;ID&gt;,<span class="number">1</span>:<span class="number">6</span>]</span><br><span class="line">[@<span class="number">2</span>,<span class="number">12</span>:<span class="number">11</span>=<span class="string">'&lt;EOF&gt;'</span>,&lt;EOF&gt;,<span class="number">2</span>:<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<p>然后进行语法分析测试。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grun Hello r -tree</span><br><span class="line">hello parrt</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>显示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(r hello parrt)</span><br></pre></td></tr></table></figure>

<p>还可以将语法树可视化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grun Hello r -gui</span><br><span class="line">hello parrt</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>接着会弹出一个对话框。</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=833aab6a-4b85-4e04-beb6-3c727036a25e&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:FeKZDvlng7WeLpJ1RndzD-a5DiM&expireAt=1592485193516&policy=eyJkZW50cnlJZCI6IjgzM2FhYjZhLTRiODUtNGUwNC1iZWI2LTNjNzI3MDM2YTI1ZSIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="hello-parrt"></p>
<p><a href="https://github.com/xuejh/complicationBook/tree/master/06/2" target="_blank" rel="noopener">完整代码</a></p>
<h2 id="练习三"><a href="#练习三" class="headerlink" title="练习三"></a>练习三</h2><p>这一次的文件名叫做 PlayScript.g4。playscript 是为我们的脚本语言起的名称，文件开头是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">grammar PlayScript;</span><br><span class="line"><span class="keyword">import</span> CommonLexer;   <span class="comment">//导入词法定义</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*下面的内容加到所生成的Java源文件的头部，如包名称，import语句等。*/</span></span><br><span class="line"><span class="meta">@header</span> &#123;</span><br><span class="line"><span class="keyword">package</span> antlrtest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后把之前做过的语法定义放进去。Antlr 内部有自动处理左递归的机制，你可以放心大胆地把语法规则写成下面的样子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">expression</span><br><span class="line">    :   assignmentExpression</span><br><span class="line">    |   expression <span class="string">','</span> assignmentExpression</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">assignmentExpression</span><br><span class="line">    :   additiveExpression</span><br><span class="line">    |   Identifier assignmentOperator additiveExpression</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">assignmentOperator</span><br><span class="line">    :   <span class="string">'='</span></span><br><span class="line">    |   <span class="string">'*='</span></span><br><span class="line">    |  <span class="string">'/='</span></span><br><span class="line">    |   <span class="string">'%='</span></span><br><span class="line">    |   <span class="string">'+='</span></span><br><span class="line">    |   <span class="string">'-='</span></span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">additiveExpression</span><br><span class="line">    :   multiplicativeExpression</span><br><span class="line">    |   additiveExpression <span class="string">'+'</span> multiplicativeExpression</span><br><span class="line">    |   additiveExpression <span class="string">'-'</span> multiplicativeExpression</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">multiplicativeExpression</span><br><span class="line">    :   primaryExpression</span><br><span class="line">    |   multiplicativeExpression <span class="string">'*'</span> primaryExpression</span><br><span class="line">    |   multiplicativeExpression <span class="string">'/'</span> primaryExpression</span><br><span class="line">    |   multiplicativeExpression <span class="string">'%'</span> primaryExpression</span><br><span class="line">    ;</span><br></pre></td></tr></table></figure>

<p>我们继续运行下面的命令，生成语法分析器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">antlr PlayScript.g4</span><br><span class="line">javac *.java</span><br></pre></td></tr></table></figure>

<p>然后测试一下生成的语法分析器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grun antlrtest.PlayScript expression -gui</span><br></pre></td></tr></table></figure>

<p>报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) xuejinhuideMac-mini:antlrtest ND$ grun antlrtest.PlayScript expression -gui</span><br><span class="line">Can<span class="string">'t load antlrtest.PlayScript as lexer or parser</span></span><br></pre></td></tr></table></figure>

<p>这一步报错，始终没找到原因</p>
<p>这个命令的意思是：测试 PlayScript 这个类的 expression 方法，也就是解析表达式的方法，结果用图形化界面显示。</p>
<p>我们在控制台界面中输入下面的内容：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">age + <span class="number">10</span> * <span class="number">2</span>  + <span class="number">10</span></span><br><span class="line">^D</span><br></pre></td></tr></table></figure>

<p>其中 ^D 是按下 Ctl 键的同时按下 D，相当于在终端输入一个 EOF 字符，即文件结束符号（Windows 操作系统要使用 ^Z）。当然，你也可以提前把这些语句放到文件中，把文件名作为命令参数。之后，语法分析器会分析这些语法，并弹出一个窗口来显示 AST：</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=419d3dd3-64a5-47d1-b624-dfe89669ef7c&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:HqsQe4WBhLrieRCi_tJOM0OfqGk&expireAt=1592486422268&policy=eyJkZW50cnlJZCI6IjQxOWQzZGQzLTY0YTUtNDdkMS1iNjI0LWRmZTg5NjY5ZWY3YyIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="parseTreeInspector"></p>
<p>看得出来，AST 完全正确，优先级和结合性也都没错。所以，Antlr 生成的语法分析器还是很靠谱的。以后，你专注写语法规则就行了，可以把精力放在语言的设计和应用上。</p>
<p><a href="https://github.com/xuejh/complicationBook/tree/master/06/3" target="_blank" rel="noopener">完整代码</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://www.jianshu.com/p/7969d076183f" target="_blank" rel="noopener">Mac安装Antlr</a></p>
<p><a href="https://www.jianshu.com/p/1d1ed2e949c2" target="_blank" rel="noopener">Mac修改.bash_profile后补救方法</a></p>
<p><a href="https://www.jianshu.com/p/b7cee507b967" target="_blank" rel="noopener">Antlr4 入门</a></p>
<p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/Antlr/" data-id="ckblm6dcl000a71z7db6p6yph" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/语法分析（三）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%89%EF%BC%89/" class="article-date">
  <time datetime="2020-06-17T06:06:42.000Z" itemprop="datePublished">2020-06-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%89%EF%BC%89/">语法分析（三）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>本节课将实现一些功能，比如：</p>
<ul>
<li>支持变量声明和初始化语句，就像“int age” “int age = 45”和“int age = 17+8+20”；</li>
<li>支持赋值语句“age = 45”；</li>
<li>在表达式中可以使用变量，例如“age + 10 *2”；</li>
<li>实现一个命令行终端，能够读取输入的语句并输出结果。</li>
</ul>
<p>实现这些功能之后，我们的成果会更像一个脚本解释器。而且在这个过程中，我还会带你巩固语法分析中的递归下降算法，和你一起讨论“回溯”这个特征，让你对递归下降算法的特征理解得更加全面。</p>
<p>不过，为了实现这些新的语法，我们首先要把它们用语法规则描述出来。</p>
<p>我们用扩展巴科斯范式（EBNF）写出下面的语法规则：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">programm: statement+;  </span><br><span class="line"></span><br><span class="line">statement</span><br><span class="line">: intDeclaration</span><br><span class="line">| expressionStatement</span><br><span class="line">| assignmentStatement</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>变量声明语句以 int 开头，后面跟标识符，然后有可选的初始化部分，也就是一个等号和一个表达式，最后再加分号：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intDeclaration : <span class="string">'int'</span> Id ( <span class="string">'='</span> additiveExpression)? <span class="string">';'</span>;</span><br></pre></td></tr></table></figure>

<p>表达式语句目前只支持加法表达式，未来可以加其他的表达式，比如条件表达式，它后面同样加分号：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expressionStatement : additiveExpression <span class="string">';'</span>;</span><br></pre></td></tr></table></figure>

<p>赋值语句是标识符后面跟着等号和一个表达式，再加分号：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assignmentStatement : Identifier <span class="string">'='</span> additiveExpression <span class="string">';'</span>;</span><br></pre></td></tr></table></figure>

<p>为了在表达式中可以使用变量，我们还需要把 primaryExpression 改写，除了包含整型字面量以外，还要包含标识符和用括号括起来的表达式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">primaryExpression : Identifier| IntLiteral | <span class="string">'('</span> additiveExpression <span class="string">')'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="让脚本语言支持变量"><a href="#让脚本语言支持变量" class="headerlink" title="让脚本语言支持变量"></a>让脚本语言支持变量</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> HashMap&lt;String, Integer&gt; variables = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (variables.containsKey(varName)) &#123;</span><br><span class="line">    Integer value = variables.get(varName);  <span class="comment">//获取变量值</span></span><br><span class="line">    <span class="keyword">if</span> (value != <span class="keyword">null</span>) &#123;</span><br><span class="line">        result = value;                      <span class="comment">//设置返回值</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;                                 <span class="comment">//有这个变量，没有值</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"variable "</span> + varName + <span class="string">" has not been set any value"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123; <span class="comment">//没有这个变量。</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"unknown variable: "</span> + varName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解析赋值语句"><a href="#解析赋值语句" class="headerlink" title="解析赋值语句"></a>解析赋值语句</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> SimpleASTNode <span class="title">assignmentStatement</span><span class="params">(TokenReader tokens)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    SimpleASTNode node = <span class="keyword">null</span>;</span><br><span class="line">    Token token = tokens.peek();    <span class="comment">//预读，看看下面是不是标识符</span></span><br><span class="line">    <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.Identifier) &#123;</span><br><span class="line">        token = tokens.read();      <span class="comment">//读入标识符</span></span><br><span class="line">        node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.AssignmentStmt, token.getText());</span><br><span class="line">        token = tokens.peek();      <span class="comment">//预读，看看下面是不是等号</span></span><br><span class="line">        <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.Assignment) &#123;</span><br><span class="line">            tokens.read();          <span class="comment">//取出等号</span></span><br><span class="line">            SimpleASTNode child = additive(tokens);</span><br><span class="line">            <span class="keyword">if</span> (child == <span class="keyword">null</span>) &#123;    <span class="comment">//出错，等号右面没有一个合法的表达式</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"invalide assignment statement, expecting an expression"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                node.addChild(child);   <span class="comment">//添加子节点</span></span><br><span class="line">                token = tokens.peek();  <span class="comment">//预读，看看后面是不是分号</span></span><br><span class="line">                <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.SemiColon) &#123;</span><br><span class="line">                    tokens.read();      <span class="comment">//消耗掉这个分号</span></span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;            <span class="comment">//报错，缺少分号</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"invalid statement, expecting semicolon"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            tokens.unread();    <span class="comment">//回溯，吐出之前消化掉的标识符</span></span><br><span class="line">            node = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="理解递归下降算法中的回溯"><a href="#理解递归下降算法中的回溯" class="headerlink" title="理解递归下降算法中的回溯"></a>理解递归下降算法中的回溯</h2><p>尝试一个规则不成功之后，恢复到原样，再去尝试另外的规则，这个现象就叫做“回溯”。</p>
<h2 id="什么时候该回溯，什么时候该提示语法错误？"><a href="#什么时候该回溯，什么时候该提示语法错误？" class="headerlink" title="什么时候该回溯，什么时候该提示语法错误？"></a>什么时候该回溯，什么时候该提示语法错误？</h2><p>其实这两种方法最后的结果是一样的。我们提示语法错误的时候，是说我们知道已经没有其他可能的匹配选项了，不需要浪费时间去回溯。就比如，在我们的语法中，等号后面必然跟表达式，否则就一定是语法错误。你在这里不报语法错误，等试探完其他所有选项后，还是需要报语法错误。所以说，提前报语法错误，实际上是我们写算法时的一种优化。</p>
<p>在写编译程序的时候，我们不仅仅要能够解析正确的语法，还要尽可能针对语法错误提供友好的提示，帮助用户迅速定位错误。错误定位越是准确、提示越是友好，我们就越喜欢它。</p>
<h2 id="实现一个简单的-REPL"><a href="#实现一个简单的-REPL" class="headerlink" title="实现一个简单的 REPL"></a>实现一个简单的 REPL</h2><p>脚本语言一般都会提供一个命令行窗口，让你输入一条一条的语句，马上解释执行它，并得到输出结果，比如 Node.js、Python 等都提供了这样的界面。这个输入、执行、打印的循环过程就叫做 REPL（Read-Eval-Print Loop）。你可以在 REPL 中迅速试验各种语句，REPL 即时反馈的特征会让你乐趣无穷。所以，即使是非常资深的程序员，也会经常用 REPL 来验证自己的一些思路，它相当于一个语言的 PlayGround（游戏场），是个必不可少的工具。</p>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><a href="https://github.com/xuejh/complicationBook/tree/master/05/%E7%BB%83%E4%B9%A0" target="_blank" rel="noopener">完整代码</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%89%EF%BC%89/" data-id="ckblm6dcp000m71z7e7i77a6n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/语法分析（二）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/16/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89/" class="article-date">
  <time datetime="2020-06-16T02:40:26.000Z" itemprop="datePublished">2020-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/16/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89/">语法分析（二）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>上一节课遇到到了一些问题，比如如何消除左递归，如何确保正确的优先级和结合性。所以本节课的主要目的就是解决这几个问题。</p>
<p>首先温习几个概念，左递归(Left Recursive)、优先级(Priority)和结合性（Associativity）。</p>
<p>在二元表达式的语法规则中，如果产生式的第一个元素是它自身，那么程序就会无限地递归下去，这种情况就叫做<strong>左递归</strong>。比如加法表达式的产生式“加法表达式 + 乘法表达式”，就是左递归的。</p>
<p>我们要想深入探讨语法规则设计，需要像在词法分析环节一样，先了解如何用形式化的方法表达语法规则。</p>
<h2 id="书写语法规则，并进行推导"><a href="#书写语法规则，并进行推导" class="headerlink" title="书写语法规则，并进行推导"></a>书写语法规则，并进行推导</h2><p>我们已经知道，语法规则是由上下文无关文法表示的，而上下文无关文法是由一组替换规则（又叫产生式）组成的，比如算术表达式的文法规则可以表达成下面这种形式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add -&gt; mul | add + mul</span><br><span class="line">mul -&gt; pri | mul * pri</span><br><span class="line">pri -&gt; Id | Num | (add)</span><br></pre></td></tr></table></figure>

<p>按照上面的产生式，add 可以替换成 mul，或者 add + mul。这样的替换过程又叫做“推导”。以“2+3*5” 和 “2+3+4”这两个算术表达式为例，这两个算术表达式的推导过程分别如下图所示：<img src="https://fz-cs.101.com/v0.1/download?dentryId=ef100ffe-f71e-4453-98a4-bfa3a0e42953&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:ws7phnhx40-apGfGCm8OQi-r2c0&expireAt=1592373966776&policy=eyJkZW50cnlJZCI6ImVmMTAwZmZlLWY3MWUtNDQ1My05OGE0LWJmYTNhMGU0Mjk1MyIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="ast树"></p>
<p>通过上图的推导过程，你可以清楚地看到这两个表达式是怎样生成的。而分析过程中形成的这棵树，其实就是 AST。只不过我们手写的算法在生成 AST 的时候，通常会做一些简化，省略掉中间一些不必要的节点。比如，“add-add-mul-pri-Num”这一条分支，实际手写时会被简化成“add-Num”。其实，简化 AST 也是优化编译过程的一种手段，如果不做简化，呈现的效果就是上图的样子。</p>
<p>那么，上图中两颗树的叶子节点有哪些呢？Num、+ 和 * 都是<strong>终结符</strong>，<strong>终结符</strong>都是词法分析中产生的 Token。而那些非叶子节点，就是<strong>非终结符</strong>。文法的推导过程，就是把非终结符不断替换的过程，让最后的结果没有非终结符，只有终结符。</p>
<p><strong>上下文无关文法</strong>就是说这个文法中所有的产生式左边只有一个非终结符，比如：</p>
<p>S -&gt; aSb</p>
<p>S -&gt; ab</p>
<p>这个文法有两个产生式，每个产生式左边只有一个非终结符S，这就是上下文无关文法，因为你只要找到符合产生式右边的串，就可以把它归约为对应的非终结符。</p>
<p>比如：<br>aSb -&gt; aaSbb<br>S -&gt; ab</p>
<p>这就是上下文相关文法，因为它的第一个产生式左边有不止一个符号，所以你在匹配这个产生式中的S的时候必需确保这个S有正确的“上下文”，也就是左边的a和右边的b，所以叫上下文相关文法。</p>
<h2 id="上下文文法相关无关扩展"><a href="#上下文文法相关无关扩展" class="headerlink" title="上下文文法相关无关扩展"></a>上下文文法相关无关扩展</h2><p>题主的主要疑惑应该在于：什么是上下文，上下文在哪里？为什么说这个文法上下文无关？</p>
<p>答案就是：在应用一个产生式进行推导时，前后已经推导出的部分结果就是上下文。上下文无关的意思的，只要文法的定义里有某个产生式，不管一个非终结符前后的串是什么，就可以应用相应的产生式进行推导。（从形式上来看，就是产生式的左边都是单独一个非终结符，即形如 S-&gt; …，而不是非终结符左右还有别的东西，例如 aSb -&gt; …）</p>
<p>这么描述有点儿抽象，我举一个自然语言的例子：</p>
<p><strong>上下文无关文法：</strong></p>
<p>产生式：</p>
<p>Sent -&gt; S V O</p>
<p>S -&gt; 人 | 天</p>
<p>V -&gt; 吃 | 下</p>
<p>O -&gt; 雨 | 雪 | 饭 | 肉</p>
<p>其中英文字母都是非终结符（SVO 分别表示主谓宾），汉字都是终结符。</p>
<p>这个文法可以生成如下句子（共 2<em>2</em>4=16 种组合，懒得写全了，简单写 7 种意思意思）：</p>
<p>｛人吃饭，天下雨，人吃肉，天下雪，人下雪，天下饭，天吃肉，……｝</p>
<p>可以看到，其中有一些搭配在语义上是不恰当的，例如“天吃肉”。其（最左）推导过程为：</p>
<p>Sent -&gt; SVO -&gt; 天VO -&gt; 天吃O -&gt; 天吃肉</p>
<p>但是上下文无关文法里，因为有“V -&gt; 吃 | 下”这样一条产生式，V 就永远都可以推出“吃”这个词，它并不在乎应用“V -&gt; 吃 | 下”这个产生式进行推导时 V 所在的上下文（在这个例子里，就是”天VO“中 V 左右两边的字符串”天“和”O“）。事实上，在 V 推出“吃”这一步，它的左边是“天”这个词，而”天“和”吃“不搭配，导致最后的句子读起来很奇怪。</p>
<p>那<strong>上下文有关文法</strong>呢？产生式可以定义为（其中前两条产生式仍是上下文无关的，后四条则是上下文有关的）：</p>
<p>Sent -&gt; S V O</p>
<p>S -&gt; 人 | 天</p>
<p>人V -&gt; 人吃</p>
<p>天V -&gt; 天下</p>
<p>下O -&gt; 下雨 | 下雪</p>
<p>吃O -&gt; 吃饭 | 吃肉</p>
<p>可以看到，这里对 V 的推导过程施加了约束：虽然 V 还是能推出”吃“和”下“两个词，但是仅仅当 V 左边是”人“时，才允许它推导出”吃“；而当 V 左边是”天“时，允许它推导出”下“。这样通过上下文的约束，就保证了主谓搭配的一致性。类似地，包含 O 的产生式也约束了动宾搭配的一致性。</p>
<p>这样一来，这个语言包含的句子就只有｛人吃饭，天下雨，人吃肉，天下雪｝这四条，都是语义上合理的。</p>
<p>以”人吃饭“为例，推导过程为：</p>
<p>Sent -&gt; SVO -&gt; 人VO -&gt; 人吃O -&gt; 人吃饭</p>
<p>其中第三步推导是这样的：非终结符 V 的上文是“人”，因此可以应用“人V -&gt; 人吃”这条产生式，得到“人VO -&gt; 人吃O”。第四步也类似。</p>
<p>而在实际应用中，语法规则经常写成下面这种形式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add ::= mul | add + mul</span><br><span class="line">mul ::= pri | mul * pri</span><br><span class="line">pri ::= Id | Num | (add)</span><br></pre></td></tr></table></figure>

<p>这种写法叫做“巴科斯范式”，简称 BNF。Antlr 和 Yacc 这两个工具都用这种写法。为了简化书写，我有时会在课程中把“::=”简化成一个冒号。你看到的时候，知道是什么意思就可以了。</p>
<p>你有时还会听到一个术语，叫做扩展巴科斯范式 (EBNF)。它跟普通的 BNF 表达式最大的区别，就是里面会用到类似正则表达式的一些写法。比如下面这个规则中运用了 * 号，来表示这个部分可以重复 0 到多次：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add -&gt; mul (+ mul)*</span><br></pre></td></tr></table></figure>

<p>其实这种写法跟标准的 BNF 写法是等价的，但是更简洁。为什么是等价的呢？因为一个项多次重复，就等价于通过递归来推导。从这里我们还可以得到一个推论：就是上下文无关文法包含了正则文法，比正则文法能做更多的事情。</p>
<h2 id="确保正确的优先级"><a href="#确保正确的优先级" class="headerlink" title="确保正确的优先级"></a>确保正确的优先级</h2><p>掌握了语法规则的写法之后，我们来看看如何用语法规则来保证表达式的优先级。刚刚，我们由加法规则推导到乘法规则，这种方式保证了 AST 中的乘法节点一定会在加法节点的下层，也就保证了乘法计算优先于加法计算。</p>
<p>听到这儿，你一定会想到，我们应该把关系运算（&gt;、=、&lt;）放在加法的上层，逻辑运算（and、or）放在关系运算的上层。的确如此，我们试着将它写出来：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">exp -&gt; or | or = exp   </span><br><span class="line">or -&gt; and | or || and</span><br><span class="line">and -&gt; equal | and &amp;&amp; equal</span><br><span class="line">equal -&gt; rel | equal == rel | equal != rel</span><br><span class="line">rel -&gt; add | rel &gt; add | rel &lt; add | rel &gt;= add | rel &lt;= add</span><br><span class="line">add -&gt; mul | add + mul | add - mul </span><br><span class="line">mul -&gt; pri | mul * pri | mul / pri</span><br></pre></td></tr></table></figure>

<h2 id="结合性"><a href="#结合性" class="headerlink" title="结合性"></a>结合性</h2><p>什么是结合性呢？同样优先级的运算符是从左到右计算还是从右到左计算叫做结合性。我们常见的加减乘除等算术运算是左结合的，“.”符号也是左结合的。</p>
<p>对于左结合的运算符，递归项要放在左边；而右结合的运算符，递归项放在右边。</p>
<h2 id="消除左递归"><a href="#消除左递归" class="headerlink" title="消除左递归"></a>消除左递归</h2><p>我提到过左递归的情况，也指出递归下降算法不能处理左递归。这里我要补充一点，并不是所有的算法都不能处理左递归，对于另外一些算法，左递归是没有问题的，比如 LR 算法。</p>
<p>消除左递归，用一个标准的方法，就能够把左递归文法改写成非左递归的文法。以加法表达式规则为例，原来的文法是“add -&gt; add + mul”，现在我们改写成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add -&gt; mul add<span class="string">'</span></span><br><span class="line"><span class="string">add'</span> -&gt; + mul add<span class="string">' | ε</span></span><br></pre></td></tr></table></figure>

<p>文法中，ε（读作 epsilon）是空集的意思。接下来，我们用刚刚改写的规则再次推导一下 “2+3+4”这个表达式，得到了下图中左边的结果：</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=e1c6be69-0378-41f7-b24f-746fe9517a76&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:Vr5xqu3bST2CQvqhBGO5PnIsl0w&expireAt=1592385540484&policy=eyJkZW50cnlJZCI6ImUxYzZiZTY5LTAzNzgtNDFmNy1iMjRmLTc0NmZlOTUxN2E3NiIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt=""></p>
<p>左边的分析树是推导后的结果。问题是，由于 add’的规则是右递归的，如果用标准的递归下降算法，我们会跟上一讲一样，又会出现运算符结合性的错误。我们期待的 AST 是右边的那棵，它的结合性才是正确的。那么有没有解决办法呢？</p>
<p>答案是有的。我们仔细分析一下上面语法规则的推导过程。只有第一步是按照 add 规则推导，之后都是按照 add’规则推导，一直到结束。</p>
<p>如果用 EBNF 方式表达，也就是允许用 * 号和 + 号表示重复，上面两条规则可以合并成一条：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add -&gt; mul (+ mul)*</span><br></pre></td></tr></table></figure>

<p>写成这样有什么好处呢？能够优化我们写算法的思路。对于 (+ mul)* 这部分，我们其实可以写成一个循环，而不是一次次的递归调用。伪代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mul();</span><br><span class="line">while(next token is +)&#123;</span><br><span class="line">  mul()</span><br><span class="line">  createAddNode</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们扩展一下话题。在研究递归函数的时候，有一个概念叫做尾递归，尾递归函数的最后一句是递归地调用自身。</p>
<p>编译程序通常都会把尾递归转化为一个循环语句，使用的原理跟上面的伪代码是一样的。相对于递归调用来说，循环语句对系统资源的开销更低，因此，把尾递归转化为循环语句也是一种编译优化技术。</p>
<p>好了，我们继续左递归的话题。现在我们知道怎么写这种左递归的算法了，大概是下面的样子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> SimpleASTNode <span class="title">additive</span><span class="params">(TokenReader tokens)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    SimpleASTNode child1 = multiplicative(tokens);  <span class="comment">//应用add规则</span></span><br><span class="line">    SimpleASTNode node = child1;</span><br><span class="line">    <span class="keyword">if</span> (child1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;                              <span class="comment">//循环应用add'</span></span><br><span class="line">            Token token = tokens.peek();</span><br><span class="line">            <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; (token.getType() == TokenType.Plus || token.getType() == TokenType.Minus)) &#123;</span><br><span class="line">                token = tokens.read();              <span class="comment">//读出加号</span></span><br><span class="line">                SimpleASTNode child2 = multiplicative(tokens);  <span class="comment">//计算下级节点</span></span><br><span class="line">                node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.Additive, token.getText());</span><br><span class="line">                node.addChild(child1);              <span class="comment">//注意，新节点在顶层，保证正确的结合性</span></span><br><span class="line">                node.addChild(child2);</span><br><span class="line">                child1 = node;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改完后，再次运行语法分析器分析“2+3+4+5”，会得到正确的 AST：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Programm Calculator</span><br><span class="line">    AdditiveExp +</span><br><span class="line">        AdditiveExp +</span><br><span class="line">            AdditiveExp +</span><br><span class="line">                IntLiteral <span class="number">2</span></span><br><span class="line">                IntLiteral <span class="number">3</span></span><br><span class="line">            IntLiteral <span class="number">4</span></span><br><span class="line">        IntLiteral <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>这样，我们就把左递归问题解决了。左递归问题是我们用递归下降算法写语法分析器遇到的最大的一只“拦路虎”。解决这只“拦路虎”以后，你的道路将会越来越平坦。</p>
<p><a href="https://github.com/xuejh/complicationBook/tree/master/04/%E7%BB%83%E4%B9%A0%E4%B8%80" target="_blank" rel="noopener">完整代码</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>
<p><a href="https://www.zhihu.com/question/21833944" target="_blank" rel="noopener">知乎</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/16/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89/" data-id="ckblm6dco000j71z709pjae9d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-正则/正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/15/%E6%AD%A3%E5%88%99/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="article-date">
  <time datetime="2020-06-15T02:45:21.000Z" itemprop="datePublished">2020-06-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%AD%A3%E5%88%99/">正则</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/15/%E6%AD%A3%E5%88%99/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>由于编译原理用到了太多的正则知识，所以这一讲专门讲正则。</p>
<h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>正则表达式是一种文本模式，包括普通字符（例如，a到z之间的字母）和特殊字符（称为“元字符”）模式描述在搜索文本时要匹配的一个或多个字符串。</p>
<h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><h2 id="‘-’和’-’"><a href="#‘-’和’-’" class="headerlink" title="‘^’和’$’"></a>‘^’和’$’</h2><p>两个特殊的符号’^’和’$’。他们的作用是分别指出一个字符串的开始和结束。</p>
<p>“^The”：表示所有以”The”开始的字符串（”There”，”The cat”等）；</p>
<p>“of despair$”：表示所有以”of despair”结尾的字符串；</p>
<p>“^abc$”：表示开始和结尾都是”abc”的字符串——呵呵，只有”abc”自己了；</p>
<p>“notice”：表示任何包含”notice”的字符串。如果你不使用两个特殊字符，表示要查找的串在被查找串的任意部分——你并不把它定位在某一个顶端。</p>
<p>要匹配 ^ 字符本身，请使用 ^,要匹配 $ 字符本身，请使用\$。</p>
<h2 id="‘-’，’-’和’-’"><a href="#‘-’，’-’和’-’" class="headerlink" title="‘*’，’+’和’?’"></a>‘*’，’+’和’?’</h2><p>‘*’，’+’和’?’这三个符号，表示一个或一序列字符重复出现的次数。</p>
<p>‘*’表示“没有或更多”</p>
<p>‘+’表示“一次或更多”</p>
<p>‘?’表示“没有或一次”</p>
<p>“ab*”：表示一个字符串有一个a后面跟着零个或若干个b。（”a”, “ab”, “abbb”,……）；</p>
<p>“ab+”：表示一个字符串有一个a后面跟着至少一个b或者更多；</p>
<p>“ab?”：表示一个字符串有一个a后面跟着零个或者一个b；</p>
<p>“a?b+$”：表示在字符串的末尾有零个或一个a跟着一个或几个b。</p>
<p>要匹配 * 字符，请使用 \*。</p>
<p>要匹配 + 字符，请使用 \+。</p>
<p>要匹配 ? 字符，请使用 ?。</p>
<h2 id=""><a href="#" class="headerlink" title="{}"></a>{}</h2><p>你也可以使用范围，用大括号括起，用以表示重复次数的范围。</p>
<p>“ab{2}”：表示一个字符串有一个a跟着2个b（”abb”）；</p>
<p>“ab{2,}”：表示一个字符串有一个a跟着至少2个b；</p>
<p>“ab{3,5}”：表示一个字符串有一个a跟着3到5个b。</p>
<p>请注意，你必须指定范围的下限（如：”{0,2}”而不是”{,2}”）。还有，你可能注意到了，’*’，’+’和<br>‘?’相当于”{0,}”，”{1,}”和”{0,1}”。</p>
<p>要匹配 {，请使用 \{。</p>
<p>要匹配 }，请使用 \}。</p>
<h2 id="‘-’"><a href="#‘-’" class="headerlink" title="‘|’"></a>‘|’</h2><p>还有一个’|’，表示“或”操作：</p>
<p>“hi|hello”：表示一个字符串里有”hi”或者”hello”；</p>
<p>要匹配 |，请使用\|。</p>
<h2 id="-1"><a href="#-1" class="headerlink" title="( )"></a>( )</h2><p>标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用\ ( 和\ )。</p>
<p>“(b|cd)ef”：表示”bef”或”cdef”；</p>
<p>“(a|b)*c”：表示一串”a””b”混合的字符串后面跟一个”c”；</p>
<h2 id="-2"><a href="#-2" class="headerlink" title="[]"></a>[]</h2><p>[] 表示匹配方括号中的字符之一</p>
<p>[abc] 匹配a或b或c<br>[a-z] 匹配从a到z的任何一个字符</p>
<p>“^[a-zA-Z]”：表示一个以字母开头的字符串；</p>
<p>“[0-9]%”：表示一个百分号前有一位的数字；</p>
<p>“,[a-zA-Z0-9]$”：表示一个字符串以一个逗号后面跟着一个字母或数字结束。</p>
<p>你也可以在方括号里用’^’表示不希望出现的字符，’^’应在方括号里的第一位。（如：”%[^a-zA-Z]%”表<br>示两个百分号中不应该出现字母）。</p>
<h2 id="‘’"><a href="#‘’" class="headerlink" title="‘’"></a>‘’</h2><p>‘’    严格匹配单引号里面的所有字符，如:’if’或者’int’</p>
<h2 id="‘-’-1"><a href="#‘-’-1" class="headerlink" title="‘.’"></a>‘.’</h2><p>‘.’可以替代任何字符：</p>
<p>“a.[0-9]”：表示一个字符串有一个”a”后面跟着一个任意字符和一个数字；</p>
<p>“^.{3}$”：表示有任意三个字符的字符串（长度为3个字符）；</p>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><p>\d   查找数字。</p>
<p>\s   查找空白字符。</p>
<p>\b  匹配单词边界。</p>
<p>\uxxxx    查找以十六进制数 xxxx 规定的 Unicode 字符。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://www.jb51.net/article/73342.htm" target="_blank" rel="noopener">正则表达式基本语法讲解</a></p>
<p><a href="https://www.runoob.com/js/js-regexp.html" target="_blank" rel="noopener">正则在js中的应用</a></p>
<p><a href="https://www.runoob.com/try/try.php?filename=tryjs_string_search_regexp" target="_blank" rel="noopener">正则js在线运行</a></p>
<p><a href="https://www.runoob.com/regexp/regexp-syntax.html" target="_blank" rel="noopener">菜鸟教程正则</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/15/%E6%AD%A3%E5%88%99/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" data-id="ckblm6dck000871z7c0kxgqo0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%A3%E5%88%99/" rel="tag">正则</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
<div class="widget tag">
  <h3 class="title">Categories</h3>
     <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/">antlr4权威指南</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/">公开课</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E5%AE%83/">其它</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AD%A3%E5%88%99/">正则</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%8B%B1%E8%AF%AD/">英语</a><span class="category-list-count">1</span></li></ul> 
</div>
 

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" rel="tag">antlr4权威指南</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B6%E5%AE%83/" rel="tag">其它</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" rel="tag">数据结构与算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/" rel="tag">杨亮讲英语</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99/" rel="tag">正则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" style="font-size: 16.67px;">antlr4权威指南</a> <a href="/tags/%E5%85%B6%E5%AE%83/" style="font-size: 10px;">其它</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" style="font-size: 10px;">数据结构与算法</a> <a href="/tags/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/" style="font-size: 13.33px;">杨亮讲英语</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 10px;">正则</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 20px;">编译原理</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 10px;">英语</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/14/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%AC%E4%B8%80%E8%AF%BE/">算法第一课</a>
          </li>
        
          <li>
            <a href="/2020/06/20/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/%E5%85%AC%E5%BC%80%E8%AF%BE/DAY1%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%BA%94%E5%A4%A7%E8%AF%AF%E5%8C%BA/">DAY1英语学习的五大误区</a>
          </li>
        
          <li>
            <a href="/2020/06/20/%E6%9D%A8%E4%BA%AE%E8%AE%B2%E8%8B%B1%E8%AF%AD/%E5%85%AC%E5%BC%80%E8%AF%BE/%E6%9D%A8%E4%BA%AE%E8%80%81%E5%B8%88%E6%9C%89%E8%AF%9D%E8%AF%B4/">杨亮老师有话说</a>
          </li>
        
          <li>
            <a href="/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E7%BA%B5%E8%A7%82%E5%85%A8%E5%B1%80/">纵观全局</a>
          </li>
        
          <li>
            <a href="/2020/06/19/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/%E7%AC%AC%E4%B8%80%E7%AB%A0%E5%88%9D%E5%A7%8BANTLR/">第一章初始ANTLR</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Jinhui Xue<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>