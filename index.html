<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="博客">
<meta property="article:author" content="Jinhui Xue">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-前言" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/19/%E5%89%8D%E8%A8%80/" class="article-date">
  <time datetime="2020-06-19T02:47:45.000Z" itemprop="datePublished">2020-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/">antlr4权威指南</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/19/%E5%89%8D%E8%A8%80/">前言</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/19/%E5%89%8D%E8%A8%80/" data-id="ckblm6dc7000071z7dqd133c9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" rel="tag">antlr4权威指南</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/Antlr" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/Antlr/" class="article-date">
  <time datetime="2020-06-17T07:53:03.000Z" itemprop="datePublished">2020-06-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/Antlr/">Antlr</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="初识Antlr"><a href="#初识Antlr" class="headerlink" title="初识Antlr"></a>初识Antlr</h1><p>之前我们写过一些词法分析器，但是这些只能确实demo。而且要把所有的规则都扩展需要很多工作量。接下来我们使用工具生成词法分析器和语法分析器，同时生成的代码比较专业的代码。Antlr 是一个开源的工具，支持根据规则文件生成词法分析器和语法分析器，它自身是用 Java 实现的。</p>
<h1 id="安装Antlr"><a href="#安装Antlr" class="headerlink" title="安装Antlr"></a>安装Antlr</h1><p>1.安装  brew install antlr(可能需要等一会，不过最后可以成功)</p>
<p>2.cd ~/</p>
<p>3.创建.bash_profile文件：(如果存在.bash_profile,直接跳第四步)</p>
<p>touch .bash_profile</p>
<p>4.打开.bash_profile并编辑：</p>
<p>open .bash_profile</p>
<p>5.这样就打开了一个记事本，会显示你之前配置过的path，修改记事本，一定要先备份，然后根据自己需要配置。</p>
<p>6.设置环境变量  export CLASSPATH=”.:/usr/local/Cellar/antlr/4.8_1/antlr-4.8-complete.jar:$CLASSPATH”(添加到文件的前面点可以成功，添加后面不确定)</p>
<p>7.command+s保存关闭文件(不要关闭终端)</p>
<p>8.返回终端,使修改后的配置生效命令：</p>
<p>source .bash_profile</p>
<p>修改了.bash_profile的配置,就会导致很多内置命令不能使用,会出现command not found 甚至连rm、cd、vi这些命令都不能使用,所以在今后的修改重要文件的过程中,首先要备份这个文件,然后再对文件进行修改添加.</p>
<p>9.测试:终端输入antlr，可以输出比较正常的内容一般就是成功了。</p>
<h1 id="用-Antlr-生成词法分析器"><a href="#用-Antlr-生成词法分析器" class="headerlink" title="用 Antlr 生成词法分析器"></a>用 Antlr 生成词法分析器</h1><p>我们创建一个 Hello.g4 文件，用于保存词法规则，然后把之前用过的一些词法规则写进去。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">lexer grammar Hello;  <span class="comment">//lexer关键字意味着这是一个词法规则文件，名称是Hello，要与文件名相同</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//关键字</span></span><br><span class="line">If :               <span class="string">'if'</span>;</span><br><span class="line">Int :              <span class="string">'int'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//字面量</span></span><br><span class="line">IntLiteral:        [<span class="number">0</span>-<span class="number">9</span>]+;</span><br><span class="line">StringLiteral:      <span class="string">'"'</span> .*? <span class="string">'"'</span> ;  <span class="comment">//字符串字面量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//操作符</span></span><br><span class="line">AssignmentOP:       <span class="string">'='</span> ;    </span><br><span class="line">RelationalOP:       <span class="string">'&gt;'</span>|<span class="string">'&gt;='</span>|<span class="string">'&lt;'</span> |<span class="string">'&lt;='</span> ;    </span><br><span class="line">Star:               <span class="string">'*'</span>;</span><br><span class="line">Plus:               <span class="string">'+'</span>;</span><br><span class="line">Sharp:              <span class="string">'#'</span>;</span><br><span class="line">SemiColon:          <span class="string">';'</span>;</span><br><span class="line">Dot:                <span class="string">'.'</span>;</span><br><span class="line">Comm:               <span class="string">','</span>;</span><br><span class="line">LeftBracket :       <span class="string">'['</span>;</span><br><span class="line">RightBracket:       <span class="string">']'</span>;</span><br><span class="line">LeftBrace:          <span class="string">'&#123;'</span>;</span><br><span class="line">RightBrace:         <span class="string">'&#125;'</span>;</span><br><span class="line">LeftParen:          <span class="string">'('</span>;</span><br><span class="line">RightParen:         <span class="string">')'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//标识符</span></span><br><span class="line">Id :                [a-zA-Z_] ([a-zA-Z_] | [<span class="number">0</span>-<span class="number">9</span>])*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//空白字符，抛弃</span></span><br><span class="line">Whitespace:         [ \t]+ -&gt; skip;</span><br><span class="line">Newline:            ( <span class="string">'\r'</span> <span class="string">'\n'</span>?|<span class="string">'\n'</span>)-&gt; skip;</span><br></pre></td></tr></table></figure>

<p>接下来，我们来编译词法规则，在终端中输入命令：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">antlr Hello.g4</span><br></pre></td></tr></table></figure>

<p>这个命令是让 Antlr 编译规则文件，并生成 Hello.java 文件和其他两个辅助文件。你可以打开看一看文件里面的内容。接着，我用下面的命令编译 Hello.java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac *.java</span><br></pre></td></tr></table></figure>

<p>接下来，我们来写个脚本文件，让生成的词法分析器解析一下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> age = <span class="number">45</span>;</span><br><span class="line"><span class="keyword">if</span> (age &gt;= <span class="number">17</span>+<span class="number">8</span>+<span class="number">20</span>)&#123;</span><br><span class="line">  printf(<span class="string">"Hello old man!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们将上面的脚本存成 hello.play 文件，然后在终端输入下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grun Hello tokens -tokens hello.play</span><br></pre></td></tr></table></figure>

<p>grun 命令实际上是调用了我们刚才生成的词法分析器，即 Hello 类，打印出对 hello.play 词法分析的结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(base) xuejinhuideMac-mini:<span class="number">1</span> ND$ grun Hello tokens -tokens hello.play</span><br><span class="line">[@<span class="number">0</span>,<span class="number">1</span>:<span class="number">3</span>=<span class="string">'int'</span>,&lt;<span class="string">'int'</span>&gt;,<span class="number">2</span>:<span class="number">0</span>]</span><br><span class="line">[@<span class="number">1</span>,<span class="number">5</span>:<span class="number">7</span>=<span class="string">'age'</span>,&lt;Id&gt;,<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">[@<span class="number">2</span>,<span class="number">9</span>:<span class="number">9</span>=<span class="string">'='</span>,&lt;<span class="string">'='</span>&gt;,<span class="number">2</span>:<span class="number">8</span>]</span><br><span class="line">[@<span class="number">3</span>,<span class="number">11</span>:<span class="number">12</span>=<span class="string">'45'</span>,&lt;IntLiteral&gt;,<span class="number">2</span>:<span class="number">10</span>]</span><br><span class="line">[@<span class="number">4</span>,<span class="number">13</span>:<span class="number">13</span>=<span class="string">';'</span>,&lt;<span class="string">';'</span>&gt;,<span class="number">2</span>:<span class="number">12</span>]</span><br><span class="line">[@<span class="number">5</span>,<span class="number">15</span>:<span class="number">16</span>=<span class="string">'if'</span>,&lt;<span class="string">'if'</span>&gt;,<span class="number">3</span>:<span class="number">0</span>]</span><br><span class="line">[@<span class="number">6</span>,<span class="number">18</span>:<span class="number">18</span>=<span class="string">'('</span>,&lt;<span class="string">'('</span>&gt;,<span class="number">3</span>:<span class="number">3</span>]</span><br><span class="line">[@<span class="number">7</span>,<span class="number">19</span>:<span class="number">21</span>=<span class="string">'age'</span>,&lt;Id&gt;,<span class="number">3</span>:<span class="number">4</span>]</span><br><span class="line">[@<span class="number">8</span>,<span class="number">23</span>:<span class="number">24</span>=<span class="string">'&gt;='</span>,&lt;RelationalOP&gt;,<span class="number">3</span>:<span class="number">8</span>]</span><br><span class="line">[@<span class="number">9</span>,<span class="number">26</span>:<span class="number">27</span>=<span class="string">'17'</span>,&lt;IntLiteral&gt;,<span class="number">3</span>:<span class="number">11</span>]</span><br><span class="line">[@<span class="number">10</span>,<span class="number">28</span>:<span class="number">28</span>=<span class="string">'+'</span>,&lt;<span class="string">'+'</span>&gt;,<span class="number">3</span>:<span class="number">13</span>]</span><br><span class="line">[@<span class="number">11</span>,<span class="number">29</span>:<span class="number">29</span>=<span class="string">'8'</span>,&lt;IntLiteral&gt;,<span class="number">3</span>:<span class="number">14</span>]</span><br><span class="line">[@<span class="number">12</span>,<span class="number">30</span>:<span class="number">30</span>=<span class="string">'+'</span>,&lt;<span class="string">'+'</span>&gt;,<span class="number">3</span>:<span class="number">15</span>]</span><br><span class="line">[@<span class="number">13</span>,<span class="number">31</span>:<span class="number">32</span>=<span class="string">'20'</span>,&lt;IntLiteral&gt;,<span class="number">3</span>:<span class="number">16</span>]</span><br><span class="line">[@<span class="number">14</span>,<span class="number">33</span>:<span class="number">33</span>=<span class="string">')'</span>,&lt;<span class="string">')'</span>&gt;,<span class="number">3</span>:<span class="number">18</span>]</span><br><span class="line">[@<span class="number">15</span>,<span class="number">34</span>:<span class="number">34</span>=<span class="string">'&#123;'</span>,&lt;<span class="string">'&#123;'</span>&gt;,<span class="number">3</span>:<span class="number">19</span>]</span><br><span class="line">[@<span class="number">16</span>,<span class="number">38</span>:<span class="number">43</span>=<span class="string">'printf'</span>,&lt;Id&gt;,<span class="number">4</span>:<span class="number">2</span>]</span><br><span class="line">[@<span class="number">17</span>,<span class="number">44</span>:<span class="number">44</span>=<span class="string">'('</span>,&lt;<span class="string">'('</span>&gt;,<span class="number">4</span>:<span class="number">8</span>]</span><br><span class="line">[@<span class="number">18</span>,<span class="number">45</span>:<span class="number">60</span>=<span class="string">'"Hello old man!"'</span>,&lt;StringLiteral&gt;,<span class="number">4</span>:<span class="number">9</span>]</span><br><span class="line">[@<span class="number">19</span>,<span class="number">61</span>:<span class="number">61</span>=<span class="string">')'</span>,&lt;<span class="string">')'</span>&gt;,<span class="number">4</span>:<span class="number">25</span>]</span><br><span class="line">[@<span class="number">20</span>,<span class="number">62</span>:<span class="number">62</span>=<span class="string">';'</span>,&lt;<span class="string">';'</span>&gt;,<span class="number">4</span>:<span class="number">26</span>]</span><br><span class="line">[@<span class="number">21</span>,<span class="number">64</span>:<span class="number">64</span>=<span class="string">'&#125;'</span>,&lt;<span class="string">'&#125;'</span>&gt;,<span class="number">5</span>:<span class="number">0</span>]</span><br><span class="line">[@<span class="number">22</span>,<span class="number">65</span>:<span class="number">64</span>=<span class="string">'&lt;EOF&gt;'</span>,&lt;EOF&gt;,<span class="number">5</span>:<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p>从结果中看到，我们的词法分析器把每个 Token 都识别了，还记录了它们在代码中的位置、文本值、类别。上面这些都是 Token 的属性。以第二行[@1, 4:6=‘age’,&lt; Id &gt;,1:4]为例，其中 @1 是 Token 的流水编号，表明这是 1 号 Token；4:6 是 Token 在字符流中的开始和结束位置；age 是文本值，Id 是其 Token 类别；最后的 1:4 表示这个 Token 在源代码中位于第 1 行、第 4 列。</p>
<p><a href="https://github.com/xuejh/complicationBook/tree/master/06/1" target="_blank" rel="noopener">代码详见</a></p>
<h2 id="练习二"><a href="#练习二" class="headerlink" title="练习二"></a>练习二</h2><p>这个例子是将例如<code>&quot;hello abc&quot;</code>的字符串解析为抽象语法树。</p>
<p>在目录下新建语法文件<code>Hello.g4</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define a grammar called Hello</span></span><br><span class="line">grammar Hello;</span><br><span class="line">r  : <span class="string">'hello'</span> ID ;         <span class="comment">// match keyword hello followed by an identifier</span></span><br><span class="line">ID : [a-z]+ ;             <span class="comment">// match lower-case identifiers</span></span><br><span class="line">WS : [ \t\r\n]+ -&gt; skip ; <span class="comment">// skip spaces, tabs, newlines</span></span><br></pre></td></tr></table></figure>

<p>接着运行ANTLR，根据语法文件<code>Hello.g4</code>生成对应的词法分析和语法分析程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">antlr Hello.g4</span><br></pre></td></tr></table></figure>

<p>这时候文件夹下会多出几个文件（只选择典型的2个文件说明）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HelloLexer.java 词法分析</span><br><span class="line">HelloParser.java 语法分析</span><br></pre></td></tr></table></figure>

<p>然后利用javac对Java文件进行编译：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac Hello*.java</span><br></pre></td></tr></table></figure>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>首先是词法分析测试。启动<code>grun</code>，测试之前的语法：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grun Hello r -tokens</span><br><span class="line">hello parrt      # 输入要被识别的语句</span><br><span class="line">EOF              # 在UNIX/MAC系统上输入 Ctrl+D 来输入文件结束符</span><br></pre></td></tr></table></figure>

<p>下面就会显示词法分析结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[@<span class="number">0</span>,<span class="number">0</span>:<span class="number">4</span>=<span class="string">'hello'</span>,&lt;<span class="string">'hello'</span>&gt;,<span class="number">1</span>:<span class="number">0</span>]</span><br><span class="line">[@<span class="number">1</span>,<span class="number">6</span>:<span class="number">10</span>=<span class="string">'parrt'</span>,&lt;ID&gt;,<span class="number">1</span>:<span class="number">6</span>]</span><br><span class="line">[@<span class="number">2</span>,<span class="number">12</span>:<span class="number">11</span>=<span class="string">'&lt;EOF&gt;'</span>,&lt;EOF&gt;,<span class="number">2</span>:<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<p>然后进行语法分析测试。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grun Hello r -tree</span><br><span class="line">hello parrt</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>显示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(r hello parrt)</span><br></pre></td></tr></table></figure>

<p>还可以将语法树可视化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grun Hello r -gui</span><br><span class="line">hello parrt</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>接着会弹出一个对话框。</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=833aab6a-4b85-4e04-beb6-3c727036a25e&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:FeKZDvlng7WeLpJ1RndzD-a5DiM&expireAt=1592485193516&policy=eyJkZW50cnlJZCI6IjgzM2FhYjZhLTRiODUtNGUwNC1iZWI2LTNjNzI3MDM2YTI1ZSIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="hello-parrt"></p>
<p><a href="https://github.com/xuejh/complicationBook/tree/master/06/2" target="_blank" rel="noopener">完整代码</a></p>
<h2 id="练习三"><a href="#练习三" class="headerlink" title="练习三"></a>练习三</h2><p>这一次的文件名叫做 PlayScript.g4。playscript 是为我们的脚本语言起的名称，文件开头是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">grammar PlayScript;</span><br><span class="line"><span class="keyword">import</span> CommonLexer;   <span class="comment">//导入词法定义</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*下面的内容加到所生成的Java源文件的头部，如包名称，import语句等。*/</span></span><br><span class="line"><span class="meta">@header</span> &#123;</span><br><span class="line"><span class="keyword">package</span> antlrtest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后把之前做过的语法定义放进去。Antlr 内部有自动处理左递归的机制，你可以放心大胆地把语法规则写成下面的样子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">expression</span><br><span class="line">    :   assignmentExpression</span><br><span class="line">    |   expression <span class="string">','</span> assignmentExpression</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">assignmentExpression</span><br><span class="line">    :   additiveExpression</span><br><span class="line">    |   Identifier assignmentOperator additiveExpression</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">assignmentOperator</span><br><span class="line">    :   <span class="string">'='</span></span><br><span class="line">    |   <span class="string">'*='</span></span><br><span class="line">    |  <span class="string">'/='</span></span><br><span class="line">    |   <span class="string">'%='</span></span><br><span class="line">    |   <span class="string">'+='</span></span><br><span class="line">    |   <span class="string">'-='</span></span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">additiveExpression</span><br><span class="line">    :   multiplicativeExpression</span><br><span class="line">    |   additiveExpression <span class="string">'+'</span> multiplicativeExpression</span><br><span class="line">    |   additiveExpression <span class="string">'-'</span> multiplicativeExpression</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">multiplicativeExpression</span><br><span class="line">    :   primaryExpression</span><br><span class="line">    |   multiplicativeExpression <span class="string">'*'</span> primaryExpression</span><br><span class="line">    |   multiplicativeExpression <span class="string">'/'</span> primaryExpression</span><br><span class="line">    |   multiplicativeExpression <span class="string">'%'</span> primaryExpression</span><br><span class="line">    ;</span><br></pre></td></tr></table></figure>

<p>我们继续运行下面的命令，生成语法分析器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">antlr PlayScript.g4</span><br><span class="line">javac *.java</span><br></pre></td></tr></table></figure>

<p>然后测试一下生成的语法分析器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grun antlrtest.PlayScript expression -gui</span><br></pre></td></tr></table></figure>

<p>报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) xuejinhuideMac-mini:antlrtest ND$ grun antlrtest.PlayScript expression -gui</span><br><span class="line">Can<span class="string">'t load antlrtest.PlayScript as lexer or parser</span></span><br></pre></td></tr></table></figure>

<p>这一步报错，始终没找到原因</p>
<p>这个命令的意思是：测试 PlayScript 这个类的 expression 方法，也就是解析表达式的方法，结果用图形化界面显示。</p>
<p>我们在控制台界面中输入下面的内容：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">age + <span class="number">10</span> * <span class="number">2</span>  + <span class="number">10</span></span><br><span class="line">^D</span><br></pre></td></tr></table></figure>

<p>其中 ^D 是按下 Ctl 键的同时按下 D，相当于在终端输入一个 EOF 字符，即文件结束符号（Windows 操作系统要使用 ^Z）。当然，你也可以提前把这些语句放到文件中，把文件名作为命令参数。之后，语法分析器会分析这些语法，并弹出一个窗口来显示 AST：</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=419d3dd3-64a5-47d1-b624-dfe89669ef7c&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:HqsQe4WBhLrieRCi_tJOM0OfqGk&expireAt=1592486422268&policy=eyJkZW50cnlJZCI6IjQxOWQzZGQzLTY0YTUtNDdkMS1iNjI0LWRmZTg5NjY5ZWY3YyIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="parseTreeInspector"></p>
<p>看得出来，AST 完全正确，优先级和结合性也都没错。所以，Antlr 生成的语法分析器还是很靠谱的。以后，你专注写语法规则就行了，可以把精力放在语言的设计和应用上。</p>
<p><a href="https://github.com/xuejh/complicationBook/tree/master/06/3" target="_blank" rel="noopener">完整代码</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://www.jianshu.com/p/7969d076183f" target="_blank" rel="noopener">Mac安装Antlr</a></p>
<p><a href="https://www.jianshu.com/p/1d1ed2e949c2" target="_blank" rel="noopener">Mac修改.bash_profile后补救方法</a></p>
<p><a href="https://www.jianshu.com/p/b7cee507b967" target="_blank" rel="noopener">Antlr4 入门</a></p>
<p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/Antlr/" data-id="ckblm6dcl000a71z7db6p6yph" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/语法分析（三）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%89%EF%BC%89/" class="article-date">
  <time datetime="2020-06-17T06:06:42.000Z" itemprop="datePublished">2020-06-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%89%EF%BC%89/">语法分析（三）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>本节课将实现一些功能，比如：</p>
<ul>
<li>支持变量声明和初始化语句，就像“int age” “int age = 45”和“int age = 17+8+20”；</li>
<li>支持赋值语句“age = 45”；</li>
<li>在表达式中可以使用变量，例如“age + 10 *2”；</li>
<li>实现一个命令行终端，能够读取输入的语句并输出结果。</li>
</ul>
<p>实现这些功能之后，我们的成果会更像一个脚本解释器。而且在这个过程中，我还会带你巩固语法分析中的递归下降算法，和你一起讨论“回溯”这个特征，让你对递归下降算法的特征理解得更加全面。</p>
<p>不过，为了实现这些新的语法，我们首先要把它们用语法规则描述出来。</p>
<p>我们用扩展巴科斯范式（EBNF）写出下面的语法规则：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">programm: statement+;  </span><br><span class="line"></span><br><span class="line">statement</span><br><span class="line">: intDeclaration</span><br><span class="line">| expressionStatement</span><br><span class="line">| assignmentStatement</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>变量声明语句以 int 开头，后面跟标识符，然后有可选的初始化部分，也就是一个等号和一个表达式，最后再加分号：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intDeclaration : <span class="string">'int'</span> Id ( <span class="string">'='</span> additiveExpression)? <span class="string">';'</span>;</span><br></pre></td></tr></table></figure>

<p>表达式语句目前只支持加法表达式，未来可以加其他的表达式，比如条件表达式，它后面同样加分号：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expressionStatement : additiveExpression <span class="string">';'</span>;</span><br></pre></td></tr></table></figure>

<p>赋值语句是标识符后面跟着等号和一个表达式，再加分号：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assignmentStatement : Identifier <span class="string">'='</span> additiveExpression <span class="string">';'</span>;</span><br></pre></td></tr></table></figure>

<p>为了在表达式中可以使用变量，我们还需要把 primaryExpression 改写，除了包含整型字面量以外，还要包含标识符和用括号括起来的表达式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">primaryExpression : Identifier| IntLiteral | <span class="string">'('</span> additiveExpression <span class="string">')'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="让脚本语言支持变量"><a href="#让脚本语言支持变量" class="headerlink" title="让脚本语言支持变量"></a>让脚本语言支持变量</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> HashMap&lt;String, Integer&gt; variables = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (variables.containsKey(varName)) &#123;</span><br><span class="line">    Integer value = variables.get(varName);  <span class="comment">//获取变量值</span></span><br><span class="line">    <span class="keyword">if</span> (value != <span class="keyword">null</span>) &#123;</span><br><span class="line">        result = value;                      <span class="comment">//设置返回值</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;                                 <span class="comment">//有这个变量，没有值</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"variable "</span> + varName + <span class="string">" has not been set any value"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123; <span class="comment">//没有这个变量。</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"unknown variable: "</span> + varName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解析赋值语句"><a href="#解析赋值语句" class="headerlink" title="解析赋值语句"></a>解析赋值语句</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> SimpleASTNode <span class="title">assignmentStatement</span><span class="params">(TokenReader tokens)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    SimpleASTNode node = <span class="keyword">null</span>;</span><br><span class="line">    Token token = tokens.peek();    <span class="comment">//预读，看看下面是不是标识符</span></span><br><span class="line">    <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.Identifier) &#123;</span><br><span class="line">        token = tokens.read();      <span class="comment">//读入标识符</span></span><br><span class="line">        node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.AssignmentStmt, token.getText());</span><br><span class="line">        token = tokens.peek();      <span class="comment">//预读，看看下面是不是等号</span></span><br><span class="line">        <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.Assignment) &#123;</span><br><span class="line">            tokens.read();          <span class="comment">//取出等号</span></span><br><span class="line">            SimpleASTNode child = additive(tokens);</span><br><span class="line">            <span class="keyword">if</span> (child == <span class="keyword">null</span>) &#123;    <span class="comment">//出错，等号右面没有一个合法的表达式</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"invalide assignment statement, expecting an expression"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                node.addChild(child);   <span class="comment">//添加子节点</span></span><br><span class="line">                token = tokens.peek();  <span class="comment">//预读，看看后面是不是分号</span></span><br><span class="line">                <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.SemiColon) &#123;</span><br><span class="line">                    tokens.read();      <span class="comment">//消耗掉这个分号</span></span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;            <span class="comment">//报错，缺少分号</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"invalid statement, expecting semicolon"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            tokens.unread();    <span class="comment">//回溯，吐出之前消化掉的标识符</span></span><br><span class="line">            node = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="理解递归下降算法中的回溯"><a href="#理解递归下降算法中的回溯" class="headerlink" title="理解递归下降算法中的回溯"></a>理解递归下降算法中的回溯</h2><p>尝试一个规则不成功之后，恢复到原样，再去尝试另外的规则，这个现象就叫做“回溯”。</p>
<h2 id="什么时候该回溯，什么时候该提示语法错误？"><a href="#什么时候该回溯，什么时候该提示语法错误？" class="headerlink" title="什么时候该回溯，什么时候该提示语法错误？"></a>什么时候该回溯，什么时候该提示语法错误？</h2><p>其实这两种方法最后的结果是一样的。我们提示语法错误的时候，是说我们知道已经没有其他可能的匹配选项了，不需要浪费时间去回溯。就比如，在我们的语法中，等号后面必然跟表达式，否则就一定是语法错误。你在这里不报语法错误，等试探完其他所有选项后，还是需要报语法错误。所以说，提前报语法错误，实际上是我们写算法时的一种优化。</p>
<p>在写编译程序的时候，我们不仅仅要能够解析正确的语法，还要尽可能针对语法错误提供友好的提示，帮助用户迅速定位错误。错误定位越是准确、提示越是友好，我们就越喜欢它。</p>
<h2 id="实现一个简单的-REPL"><a href="#实现一个简单的-REPL" class="headerlink" title="实现一个简单的 REPL"></a>实现一个简单的 REPL</h2><p>脚本语言一般都会提供一个命令行窗口，让你输入一条一条的语句，马上解释执行它，并得到输出结果，比如 Node.js、Python 等都提供了这样的界面。这个输入、执行、打印的循环过程就叫做 REPL（Read-Eval-Print Loop）。你可以在 REPL 中迅速试验各种语句，REPL 即时反馈的特征会让你乐趣无穷。所以，即使是非常资深的程序员，也会经常用 REPL 来验证自己的一些思路，它相当于一个语言的 PlayGround（游戏场），是个必不可少的工具。</p>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><a href="https://github.com/xuejh/complicationBook/tree/master/05/%E7%BB%83%E4%B9%A0" target="_blank" rel="noopener">完整代码</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%89%EF%BC%89/" data-id="ckblm6dcp000m71z7e7i77a6n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/语法分析（二）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/16/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89/" class="article-date">
  <time datetime="2020-06-16T02:40:26.000Z" itemprop="datePublished">2020-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/16/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89/">语法分析（二）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>上一节课遇到到了一些问题，比如如何消除左递归，如何确保正确的优先级和结合性。所以本节课的主要目的就是解决这几个问题。</p>
<p>首先温习几个概念，左递归(Left Recursive)、优先级(Priority)和结合性（Associativity）。</p>
<p>在二元表达式的语法规则中，如果产生式的第一个元素是它自身，那么程序就会无限地递归下去，这种情况就叫做<strong>左递归</strong>。比如加法表达式的产生式“加法表达式 + 乘法表达式”，就是左递归的。</p>
<p>我们要想深入探讨语法规则设计，需要像在词法分析环节一样，先了解如何用形式化的方法表达语法规则。</p>
<h2 id="书写语法规则，并进行推导"><a href="#书写语法规则，并进行推导" class="headerlink" title="书写语法规则，并进行推导"></a>书写语法规则，并进行推导</h2><p>我们已经知道，语法规则是由上下文无关文法表示的，而上下文无关文法是由一组替换规则（又叫产生式）组成的，比如算术表达式的文法规则可以表达成下面这种形式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add -&gt; mul | add + mul</span><br><span class="line">mul -&gt; pri | mul * pri</span><br><span class="line">pri -&gt; Id | Num | (add)</span><br></pre></td></tr></table></figure>

<p>按照上面的产生式，add 可以替换成 mul，或者 add + mul。这样的替换过程又叫做“推导”。以“2+3*5” 和 “2+3+4”这两个算术表达式为例，这两个算术表达式的推导过程分别如下图所示：<img src="https://fz-cs.101.com/v0.1/download?dentryId=ef100ffe-f71e-4453-98a4-bfa3a0e42953&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:ws7phnhx40-apGfGCm8OQi-r2c0&expireAt=1592373966776&policy=eyJkZW50cnlJZCI6ImVmMTAwZmZlLWY3MWUtNDQ1My05OGE0LWJmYTNhMGU0Mjk1MyIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="ast树"></p>
<p>通过上图的推导过程，你可以清楚地看到这两个表达式是怎样生成的。而分析过程中形成的这棵树，其实就是 AST。只不过我们手写的算法在生成 AST 的时候，通常会做一些简化，省略掉中间一些不必要的节点。比如，“add-add-mul-pri-Num”这一条分支，实际手写时会被简化成“add-Num”。其实，简化 AST 也是优化编译过程的一种手段，如果不做简化，呈现的效果就是上图的样子。</p>
<p>那么，上图中两颗树的叶子节点有哪些呢？Num、+ 和 * 都是<strong>终结符</strong>，<strong>终结符</strong>都是词法分析中产生的 Token。而那些非叶子节点，就是<strong>非终结符</strong>。文法的推导过程，就是把非终结符不断替换的过程，让最后的结果没有非终结符，只有终结符。</p>
<p><strong>上下文无关文法</strong>就是说这个文法中所有的产生式左边只有一个非终结符，比如：</p>
<p>S -&gt; aSb</p>
<p>S -&gt; ab</p>
<p>这个文法有两个产生式，每个产生式左边只有一个非终结符S，这就是上下文无关文法，因为你只要找到符合产生式右边的串，就可以把它归约为对应的非终结符。</p>
<p>比如：<br>aSb -&gt; aaSbb<br>S -&gt; ab</p>
<p>这就是上下文相关文法，因为它的第一个产生式左边有不止一个符号，所以你在匹配这个产生式中的S的时候必需确保这个S有正确的“上下文”，也就是左边的a和右边的b，所以叫上下文相关文法。</p>
<h2 id="上下文文法相关无关扩展"><a href="#上下文文法相关无关扩展" class="headerlink" title="上下文文法相关无关扩展"></a>上下文文法相关无关扩展</h2><p>题主的主要疑惑应该在于：什么是上下文，上下文在哪里？为什么说这个文法上下文无关？</p>
<p>答案就是：在应用一个产生式进行推导时，前后已经推导出的部分结果就是上下文。上下文无关的意思的，只要文法的定义里有某个产生式，不管一个非终结符前后的串是什么，就可以应用相应的产生式进行推导。（从形式上来看，就是产生式的左边都是单独一个非终结符，即形如 S-&gt; …，而不是非终结符左右还有别的东西，例如 aSb -&gt; …）</p>
<p>这么描述有点儿抽象，我举一个自然语言的例子：</p>
<p><strong>上下文无关文法：</strong></p>
<p>产生式：</p>
<p>Sent -&gt; S V O</p>
<p>S -&gt; 人 | 天</p>
<p>V -&gt; 吃 | 下</p>
<p>O -&gt; 雨 | 雪 | 饭 | 肉</p>
<p>其中英文字母都是非终结符（SVO 分别表示主谓宾），汉字都是终结符。</p>
<p>这个文法可以生成如下句子（共 2<em>2</em>4=16 种组合，懒得写全了，简单写 7 种意思意思）：</p>
<p>｛人吃饭，天下雨，人吃肉，天下雪，人下雪，天下饭，天吃肉，……｝</p>
<p>可以看到，其中有一些搭配在语义上是不恰当的，例如“天吃肉”。其（最左）推导过程为：</p>
<p>Sent -&gt; SVO -&gt; 天VO -&gt; 天吃O -&gt; 天吃肉</p>
<p>但是上下文无关文法里，因为有“V -&gt; 吃 | 下”这样一条产生式，V 就永远都可以推出“吃”这个词，它并不在乎应用“V -&gt; 吃 | 下”这个产生式进行推导时 V 所在的上下文（在这个例子里，就是”天VO“中 V 左右两边的字符串”天“和”O“）。事实上，在 V 推出“吃”这一步，它的左边是“天”这个词，而”天“和”吃“不搭配，导致最后的句子读起来很奇怪。</p>
<p>那<strong>上下文有关文法</strong>呢？产生式可以定义为（其中前两条产生式仍是上下文无关的，后四条则是上下文有关的）：</p>
<p>Sent -&gt; S V O</p>
<p>S -&gt; 人 | 天</p>
<p>人V -&gt; 人吃</p>
<p>天V -&gt; 天下</p>
<p>下O -&gt; 下雨 | 下雪</p>
<p>吃O -&gt; 吃饭 | 吃肉</p>
<p>可以看到，这里对 V 的推导过程施加了约束：虽然 V 还是能推出”吃“和”下“两个词，但是仅仅当 V 左边是”人“时，才允许它推导出”吃“；而当 V 左边是”天“时，允许它推导出”下“。这样通过上下文的约束，就保证了主谓搭配的一致性。类似地，包含 O 的产生式也约束了动宾搭配的一致性。</p>
<p>这样一来，这个语言包含的句子就只有｛人吃饭，天下雨，人吃肉，天下雪｝这四条，都是语义上合理的。</p>
<p>以”人吃饭“为例，推导过程为：</p>
<p>Sent -&gt; SVO -&gt; 人VO -&gt; 人吃O -&gt; 人吃饭</p>
<p>其中第三步推导是这样的：非终结符 V 的上文是“人”，因此可以应用“人V -&gt; 人吃”这条产生式，得到“人VO -&gt; 人吃O”。第四步也类似。</p>
<p>而在实际应用中，语法规则经常写成下面这种形式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add ::= mul | add + mul</span><br><span class="line">mul ::= pri | mul * pri</span><br><span class="line">pri ::= Id | Num | (add)</span><br></pre></td></tr></table></figure>

<p>这种写法叫做“巴科斯范式”，简称 BNF。Antlr 和 Yacc 这两个工具都用这种写法。为了简化书写，我有时会在课程中把“::=”简化成一个冒号。你看到的时候，知道是什么意思就可以了。</p>
<p>你有时还会听到一个术语，叫做扩展巴科斯范式 (EBNF)。它跟普通的 BNF 表达式最大的区别，就是里面会用到类似正则表达式的一些写法。比如下面这个规则中运用了 * 号，来表示这个部分可以重复 0 到多次：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add -&gt; mul (+ mul)*</span><br></pre></td></tr></table></figure>

<p>其实这种写法跟标准的 BNF 写法是等价的，但是更简洁。为什么是等价的呢？因为一个项多次重复，就等价于通过递归来推导。从这里我们还可以得到一个推论：就是上下文无关文法包含了正则文法，比正则文法能做更多的事情。</p>
<h2 id="确保正确的优先级"><a href="#确保正确的优先级" class="headerlink" title="确保正确的优先级"></a>确保正确的优先级</h2><p>掌握了语法规则的写法之后，我们来看看如何用语法规则来保证表达式的优先级。刚刚，我们由加法规则推导到乘法规则，这种方式保证了 AST 中的乘法节点一定会在加法节点的下层，也就保证了乘法计算优先于加法计算。</p>
<p>听到这儿，你一定会想到，我们应该把关系运算（&gt;、=、&lt;）放在加法的上层，逻辑运算（and、or）放在关系运算的上层。的确如此，我们试着将它写出来：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">exp -&gt; or | or = exp   </span><br><span class="line">or -&gt; and | or || and</span><br><span class="line">and -&gt; equal | and &amp;&amp; equal</span><br><span class="line">equal -&gt; rel | equal == rel | equal != rel</span><br><span class="line">rel -&gt; add | rel &gt; add | rel &lt; add | rel &gt;= add | rel &lt;= add</span><br><span class="line">add -&gt; mul | add + mul | add - mul </span><br><span class="line">mul -&gt; pri | mul * pri | mul / pri</span><br></pre></td></tr></table></figure>

<h2 id="结合性"><a href="#结合性" class="headerlink" title="结合性"></a>结合性</h2><p>什么是结合性呢？同样优先级的运算符是从左到右计算还是从右到左计算叫做结合性。我们常见的加减乘除等算术运算是左结合的，“.”符号也是左结合的。</p>
<p>对于左结合的运算符，递归项要放在左边；而右结合的运算符，递归项放在右边。</p>
<h2 id="消除左递归"><a href="#消除左递归" class="headerlink" title="消除左递归"></a>消除左递归</h2><p>我提到过左递归的情况，也指出递归下降算法不能处理左递归。这里我要补充一点，并不是所有的算法都不能处理左递归，对于另外一些算法，左递归是没有问题的，比如 LR 算法。</p>
<p>消除左递归，用一个标准的方法，就能够把左递归文法改写成非左递归的文法。以加法表达式规则为例，原来的文法是“add -&gt; add + mul”，现在我们改写成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add -&gt; mul add<span class="string">'</span></span><br><span class="line"><span class="string">add'</span> -&gt; + mul add<span class="string">' | ε</span></span><br></pre></td></tr></table></figure>

<p>文法中，ε（读作 epsilon）是空集的意思。接下来，我们用刚刚改写的规则再次推导一下 “2+3+4”这个表达式，得到了下图中左边的结果：</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=e1c6be69-0378-41f7-b24f-746fe9517a76&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:Vr5xqu3bST2CQvqhBGO5PnIsl0w&expireAt=1592385540484&policy=eyJkZW50cnlJZCI6ImUxYzZiZTY5LTAzNzgtNDFmNy1iMjRmLTc0NmZlOTUxN2E3NiIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt=""></p>
<p>左边的分析树是推导后的结果。问题是，由于 add’的规则是右递归的，如果用标准的递归下降算法，我们会跟上一讲一样，又会出现运算符结合性的错误。我们期待的 AST 是右边的那棵，它的结合性才是正确的。那么有没有解决办法呢？</p>
<p>答案是有的。我们仔细分析一下上面语法规则的推导过程。只有第一步是按照 add 规则推导，之后都是按照 add’规则推导，一直到结束。</p>
<p>如果用 EBNF 方式表达，也就是允许用 * 号和 + 号表示重复，上面两条规则可以合并成一条：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add -&gt; mul (+ mul)*</span><br></pre></td></tr></table></figure>

<p>写成这样有什么好处呢？能够优化我们写算法的思路。对于 (+ mul)* 这部分，我们其实可以写成一个循环，而不是一次次的递归调用。伪代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mul();</span><br><span class="line">while(next token is +)&#123;</span><br><span class="line">  mul()</span><br><span class="line">  createAddNode</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们扩展一下话题。在研究递归函数的时候，有一个概念叫做尾递归，尾递归函数的最后一句是递归地调用自身。</p>
<p>编译程序通常都会把尾递归转化为一个循环语句，使用的原理跟上面的伪代码是一样的。相对于递归调用来说，循环语句对系统资源的开销更低，因此，把尾递归转化为循环语句也是一种编译优化技术。</p>
<p>好了，我们继续左递归的话题。现在我们知道怎么写这种左递归的算法了，大概是下面的样子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> SimpleASTNode <span class="title">additive</span><span class="params">(TokenReader tokens)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    SimpleASTNode child1 = multiplicative(tokens);  <span class="comment">//应用add规则</span></span><br><span class="line">    SimpleASTNode node = child1;</span><br><span class="line">    <span class="keyword">if</span> (child1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;                              <span class="comment">//循环应用add'</span></span><br><span class="line">            Token token = tokens.peek();</span><br><span class="line">            <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; (token.getType() == TokenType.Plus || token.getType() == TokenType.Minus)) &#123;</span><br><span class="line">                token = tokens.read();              <span class="comment">//读出加号</span></span><br><span class="line">                SimpleASTNode child2 = multiplicative(tokens);  <span class="comment">//计算下级节点</span></span><br><span class="line">                node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.Additive, token.getText());</span><br><span class="line">                node.addChild(child1);              <span class="comment">//注意，新节点在顶层，保证正确的结合性</span></span><br><span class="line">                node.addChild(child2);</span><br><span class="line">                child1 = node;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改完后，再次运行语法分析器分析“2+3+4+5”，会得到正确的 AST：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Programm Calculator</span><br><span class="line">    AdditiveExp +</span><br><span class="line">        AdditiveExp +</span><br><span class="line">            AdditiveExp +</span><br><span class="line">                IntLiteral <span class="number">2</span></span><br><span class="line">                IntLiteral <span class="number">3</span></span><br><span class="line">            IntLiteral <span class="number">4</span></span><br><span class="line">        IntLiteral <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>这样，我们就把左递归问题解决了。左递归问题是我们用递归下降算法写语法分析器遇到的最大的一只“拦路虎”。解决这只“拦路虎”以后，你的道路将会越来越平坦。</p>
<p><a href="https://github.com/xuejh/complicationBook/tree/master/04/%E7%BB%83%E4%B9%A0%E4%B8%80" target="_blank" rel="noopener">完整代码</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>
<p><a href="https://www.zhihu.com/question/21833944" target="_blank" rel="noopener">知乎</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/16/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89/" data-id="ckblm6dco000j71z709pjae9d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-正则/正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/15/%E6%AD%A3%E5%88%99/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="article-date">
  <time datetime="2020-06-15T02:45:21.000Z" itemprop="datePublished">2020-06-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%AD%A3%E5%88%99/">正则</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/15/%E6%AD%A3%E5%88%99/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>由于编译原理用到了太多的正则知识，所以这一讲专门讲正则。</p>
<h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>正则表达式是一种文本模式，包括普通字符（例如，a到z之间的字母）和特殊字符（称为“元字符”）模式描述在搜索文本时要匹配的一个或多个字符串。</p>
<h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><h2 id="‘-’和’-’"><a href="#‘-’和’-’" class="headerlink" title="‘^’和’$’"></a>‘^’和’$’</h2><p>两个特殊的符号’^’和’$’。他们的作用是分别指出一个字符串的开始和结束。</p>
<p>“^The”：表示所有以”The”开始的字符串（”There”，”The cat”等）；</p>
<p>“of despair$”：表示所有以”of despair”结尾的字符串；</p>
<p>“^abc$”：表示开始和结尾都是”abc”的字符串——呵呵，只有”abc”自己了；</p>
<p>“notice”：表示任何包含”notice”的字符串。如果你不使用两个特殊字符，表示要查找的串在被查找串的任意部分——你并不把它定位在某一个顶端。</p>
<p>要匹配 ^ 字符本身，请使用 ^,要匹配 $ 字符本身，请使用\$。</p>
<h2 id="‘-’，’-’和’-’"><a href="#‘-’，’-’和’-’" class="headerlink" title="‘*’，’+’和’?’"></a>‘*’，’+’和’?’</h2><p>‘*’，’+’和’?’这三个符号，表示一个或一序列字符重复出现的次数。</p>
<p>‘*’表示“没有或更多”</p>
<p>‘+’表示“一次或更多”</p>
<p>‘?’表示“没有或一次”</p>
<p>“ab*”：表示一个字符串有一个a后面跟着零个或若干个b。（”a”, “ab”, “abbb”,……）；</p>
<p>“ab+”：表示一个字符串有一个a后面跟着至少一个b或者更多；</p>
<p>“ab?”：表示一个字符串有一个a后面跟着零个或者一个b；</p>
<p>“a?b+$”：表示在字符串的末尾有零个或一个a跟着一个或几个b。</p>
<p>要匹配 * 字符，请使用 \*。</p>
<p>要匹配 + 字符，请使用 \+。</p>
<p>要匹配 ? 字符，请使用 ?。</p>
<h2 id=""><a href="#" class="headerlink" title="{}"></a>{}</h2><p>你也可以使用范围，用大括号括起，用以表示重复次数的范围。</p>
<p>“ab{2}”：表示一个字符串有一个a跟着2个b（”abb”）；</p>
<p>“ab{2,}”：表示一个字符串有一个a跟着至少2个b；</p>
<p>“ab{3,5}”：表示一个字符串有一个a跟着3到5个b。</p>
<p>请注意，你必须指定范围的下限（如：”{0,2}”而不是”{,2}”）。还有，你可能注意到了，’*’，’+’和<br>‘?’相当于”{0,}”，”{1,}”和”{0,1}”。</p>
<p>要匹配 {，请使用 \{。</p>
<p>要匹配 }，请使用 \}。</p>
<h2 id="‘-’"><a href="#‘-’" class="headerlink" title="‘|’"></a>‘|’</h2><p>还有一个’|’，表示“或”操作：</p>
<p>“hi|hello”：表示一个字符串里有”hi”或者”hello”；</p>
<p>要匹配 |，请使用\|。</p>
<h2 id="-1"><a href="#-1" class="headerlink" title="( )"></a>( )</h2><p>标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用\ ( 和\ )。</p>
<p>“(b|cd)ef”：表示”bef”或”cdef”；</p>
<p>“(a|b)*c”：表示一串”a””b”混合的字符串后面跟一个”c”；</p>
<h2 id="-2"><a href="#-2" class="headerlink" title="[]"></a>[]</h2><p>[] 表示匹配方括号中的字符之一</p>
<p>[abc] 匹配a或b或c<br>[a-z] 匹配从a到z的任何一个字符</p>
<p>“^[a-zA-Z]”：表示一个以字母开头的字符串；</p>
<p>“[0-9]%”：表示一个百分号前有一位的数字；</p>
<p>“,[a-zA-Z0-9]$”：表示一个字符串以一个逗号后面跟着一个字母或数字结束。</p>
<p>你也可以在方括号里用’^’表示不希望出现的字符，’^’应在方括号里的第一位。（如：”%[^a-zA-Z]%”表<br>示两个百分号中不应该出现字母）。</p>
<h2 id="‘’"><a href="#‘’" class="headerlink" title="‘’"></a>‘’</h2><p>‘’    严格匹配单引号里面的所有字符，如:’if’或者’int’</p>
<h2 id="‘-’-1"><a href="#‘-’-1" class="headerlink" title="‘.’"></a>‘.’</h2><p>‘.’可以替代任何字符：</p>
<p>“a.[0-9]”：表示一个字符串有一个”a”后面跟着一个任意字符和一个数字；</p>
<p>“^.{3}$”：表示有任意三个字符的字符串（长度为3个字符）；</p>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><p>\d   查找数字。</p>
<p>\s   查找空白字符。</p>
<p>\b  匹配单词边界。</p>
<p>\uxxxx    查找以十六进制数 xxxx 规定的 Unicode 字符。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://www.jb51.net/article/73342.htm" target="_blank" rel="noopener">正则表达式基本语法讲解</a></p>
<p><a href="https://www.runoob.com/js/js-regexp.html" target="_blank" rel="noopener">正则在js中的应用</a></p>
<p><a href="https://www.runoob.com/try/try.php?filename=tryjs_string_search_regexp" target="_blank" rel="noopener">正则js在线运行</a></p>
<p><a href="https://www.runoob.com/regexp/regexp-syntax.html" target="_blank" rel="noopener">菜鸟教程正则</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/15/%E6%AD%A3%E5%88%99/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" data-id="ckblm6dck000871z7c0kxgqo0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%A3%E5%88%99/" rel="tag">正则</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/语法分析（一）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/12/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%80%EF%BC%89/" class="article-date">
  <time datetime="2020-06-12T02:41:05.000Z" itemprop="datePublished">2020-06-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/12/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%80%EF%BC%89/">语法分析（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="语法分析（Syntactic-Analysis-or-Parsing）"><a href="#语法分析（Syntactic-Analysis-or-Parsing）" class="headerlink" title="语法分析（Syntactic Analysis, or Parsing）"></a>语法分析（Syntactic Analysis, or Parsing）</h1><p>编译器下一个阶段的工作是语法分析。词法分析是识别一个个的单词，而语法分析就是在词法分析的基础上识别出程序的语法结构。这个结构是一个树状结构，是计算机容易理解和执行的。</p>
<p>以自然语言为例。自然语言有定义良好的语法结构，比如，“我喜欢又聪明又勇敢的你”这个句子包含了“主、谓、宾”三个部分。主语是“我”，谓语是“喜欢”，宾语部分是“又聪明又勇敢的你”。其中宾语部分又可以拆成两部分，“又聪明又勇敢”是定语部分，用来修饰“你”。定语部分又可以分成“聪明”和“勇敢”两个最小的单位。</p>
<p>这样拆下来，会构造一棵树，里面的每个子树都有一定的结构，而这个结构要符合语法。比如，汉语是用“主谓宾”的结构，日语是用“主宾谓”的结构。这时，我们说汉语和日语的语法规则是不同的。</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=8de41682-74f5-4f2d-9e9f-45b13a222858&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:EGzQERVrIDTS2JCNpXMRMSGZVss&expireAt=1592273914776&policy=eyJkZW50cnlJZCI6IjhkZTQxNjgyLTc0ZjUtNGYyZC05ZTlmLTQ1YjEzYTIyMjg1OCIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="语法树"></p>
<p>程序也有定义良好的语法结构，它的语法分析过程，就是构造这么一棵树。一个程序就是一棵树，这棵树叫做抽象语法树（Abstract Syntax Tree，AST）。树的每个节点（子树）是一个语法单元，这个单元的构成规则就叫“语法”。每个节点还可以有下级节点。</p>
<p>层层嵌套的树状结构，是我们对计算机程序的直观理解。计算机语言总是一个结构套着另一个结构，大的程序套着子程序，子程序又可以包含子程序。</p>
<p>比如编写代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> age = <span class="number">45</span>;</span><br><span class="line">    <span class="keyword">if</span> (age &gt;= <span class="number">17</span>+<span class="number">8</span>+<span class="number">20</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Hello old man!\\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Hello young man!\\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来，我们直观地看一下这棵树长什么样子。 我在 Mac 电脑上打下这个命令：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang -cc1 -ast-dump hello.c</span><br></pre></td></tr></table></figure>

<p>我电脑输出为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">hello.c:1:9: fatal error: 'stdio.h' file not found</span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line">        ^~~~~~~~~</span><br><span class="line">TranslationUnitDecl <span class="number">0x7f8f7002eae8</span> &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt;</span><br><span class="line">|-TypedefDecl 0x7f8f7002f380 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __int128_t '__int128'</span><br><span class="line">| `-BuiltinType 0x7f8f7002f080 '__int128'</span><br><span class="line">|-TypedefDecl 0x7f8f7002f3e8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __uint128_t 'unsigned __int128'</span><br><span class="line">| `-BuiltinType 0x7f8f7002f0a0 'unsigned __int128'</span><br><span class="line">|-TypedefDecl 0x7f8f7002f6a8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __NSConstantString 'struct __NSConstantString_tag'</span><br><span class="line">| `-RecordType 0x7f8f7002f4c0 'struct __NSConstantString_tag'</span><br><span class="line">|   `-Record 0x7f8f7002f438 '__NSConstantString_tag'</span><br><span class="line">|-TypedefDecl 0x7f8f7002f740 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __builtin_ms_va_list 'char *'</span><br><span class="line">| `-PointerType 0x7f8f7002f700 'char *'</span><br><span class="line">|   `-BuiltinType 0x7f8f7002eb80 'char'</span><br><span class="line">|-TypedefDecl 0x7f8f70066868 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __builtin_va_list 'struct __va_list_tag [1]'</span><br><span class="line">| `-ConstantArrayType 0x7f8f70066810 'struct __va_list_tag [1]' 1 </span><br><span class="line">|   `-RecordType 0x7f8f70066690 'struct __va_list_tag'</span><br><span class="line">|     `-Record 0x7f8f70066600 '__va_list_tag'</span><br><span class="line">|-FunctionDecl 0x7f8f70066af8 &lt;hello.c:2:1, line:11:1&gt; line:2:5 main 'int (int, char **)'</span><br><span class="line">| |-ParmVarDecl 0x7f8f700668d0 &lt;col:10, col:14&gt; col:14 argc 'int'</span><br><span class="line">| |-ParmVarDecl 0x7f8f700669e0 &lt;col:20, col:31&gt; col:26 argv 'char **':'char **'</span><br><span class="line">| `-CompoundStmt <span class="number">0x7f8f70067238</span> &lt;col:<span class="number">33</span>, <span class="built_in">line</span>:<span class="number">11</span>:<span class="number">1</span>&gt;</span><br><span class="line">|   |-DeclStmt <span class="number">0x7f8f70066c80</span> &lt;<span class="built_in">line</span>:<span class="number">3</span>:<span class="number">5</span>, col:<span class="number">17</span>&gt;</span><br><span class="line">|   | `-VarDecl 0x7f8f70066c00 &lt;col:5, col:15&gt; col:9 used age 'int' cinit</span><br><span class="line">|   |   `-IntegerLiteral 0x7f8f70066c60 &lt;col:15&gt; 'int' 45</span><br><span class="line">|   |-IfStmt <span class="number">0x7f8f700671c8</span> &lt;<span class="built_in">line</span>:<span class="number">4</span>:<span class="number">5</span>, <span class="built_in">line</span>:<span class="number">9</span>:<span class="number">5</span>&gt;</span><br><span class="line">|   | |-&lt;&lt;&lt;<span class="literal">NULL</span>&gt;&gt;&gt;</span><br><span class="line">|   | |-&lt;&lt;&lt;<span class="literal">NULL</span>&gt;&gt;&gt;</span><br><span class="line">|   | |-BinaryOperator 0x7f8f70066d88 &lt;line:4:9, col:21&gt; 'int' '&gt;='</span><br><span class="line">|   | | |-ImplicitCastExpr 0x7f8f70066d70 &lt;col:9&gt; 'int' &lt;LValueToRValue&gt;</span><br><span class="line">|   | | | `-DeclRefExpr 0x7f8f70066c98 &lt;col:9&gt; 'int' lvalue Var 0x7f8f70066c00 'age' 'int'</span><br><span class="line">|   | | `-BinaryOperator 0x7f8f70066d48 &lt;col:16, col:21&gt; 'int' '+'</span><br><span class="line">|   | |   |-BinaryOperator 0x7f8f70066d00 &lt;col:16, col:19&gt; 'int' '+'</span><br><span class="line">|   | |   | |-IntegerLiteral 0x7f8f70066cc0 &lt;col:16&gt; 'int' 17</span><br><span class="line">|   | |   | `-IntegerLiteral 0x7f8f70066ce0 &lt;col:19&gt; 'int' 8</span><br><span class="line">|   | |   `-IntegerLiteral 0x7f8f70066d28 &lt;col:21&gt; 'int' 20</span><br><span class="line">|   | |-CompoundStmt <span class="number">0x7f8f70067080</span> &lt;col:<span class="number">25</span>, <span class="built_in">line</span>:<span class="number">6</span>:<span class="number">5</span>&gt;</span><br><span class="line">|   | | `-CallExpr 0x7f8f70067020 &lt;line:5:9, col:35&gt; 'int'</span><br><span class="line">|   | |   |-ImplicitCastExpr 0x7f8f70067008 &lt;col:9&gt; 'int (*)(const char *, ...)' &lt;FunctionToPointerDecay&gt;</span><br><span class="line">|   | |   | `-DeclRefExpr 0x7f8f70066f40 &lt;col:9&gt; 'int (const char *, ...)' Function 0x7f8f70066de8 'printf' 'int (const char *, ...)'</span><br><span class="line">|   | |   `-ImplicitCastExpr 0x7f8f70067068 &lt;col:16&gt; 'const char *' &lt;BitCast&gt;</span><br><span class="line">|   | |     `-ImplicitCastExpr 0x7f8f70067050 &lt;col:16&gt; 'char *' &lt;ArrayToPointerDecay&gt;</span><br><span class="line">|   | |       `-StringLiteral 0x7f8f70066fa8 &lt;col:16&gt; 'char [17]' lvalue "Hello old man!\\n"</span><br><span class="line">|   | `-CompoundStmt <span class="number">0x7f8f700671b0</span> &lt;<span class="built_in">line</span>:<span class="number">7</span>:<span class="number">9</span>, <span class="built_in">line</span>:<span class="number">9</span>:<span class="number">5</span>&gt;</span><br><span class="line">|   |   `-CallExpr 0x7f8f70067150 &lt;line:8:9, col:37&gt; 'int'</span><br><span class="line">|   |     |-ImplicitCastExpr 0x7f8f70067138 &lt;col:9&gt; 'int (*)(const char *, ...)' &lt;FunctionToPointerDecay&gt;</span><br><span class="line">|   |     | `-DeclRefExpr 0x7f8f70067098 &lt;col:9&gt; 'int (const char *, ...)' Function 0x7f8f70066de8 'printf' 'int (const char *, ...)'</span><br><span class="line">|   |     `-ImplicitCastExpr 0x7f8f70067198 &lt;col:16&gt; 'const char *' &lt;BitCast&gt;</span><br><span class="line">|   |       `-ImplicitCastExpr 0x7f8f70067180 &lt;col:16&gt; 'char *' &lt;ArrayToPointerDecay&gt;</span><br><span class="line">|   |         `-StringLiteral 0x7f8f700670f8 &lt;col:16&gt; 'char [19]' lvalue "Hello young man!\\n"</span><br><span class="line">|   `-ReturnStmt <span class="number">0x7f8f70067220</span> &lt;<span class="built_in">line</span>:<span class="number">10</span>:<span class="number">5</span>, col:<span class="number">12</span>&gt;</span><br><span class="line">|     `-IntegerLiteral 0x7f8f70067200 &lt;col:12&gt; 'int' 0</span><br><span class="line">`-FunctionDecl 0x7f8f70066de8 &lt;line:5:9&gt; col:9 implicit used printf 'int (const char *, ...)' extern</span><br><span class="line">  |-ParmVarDecl 0x7f8f70066e88 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">  `-FormatAttr <span class="number">0x7f8f70066ef0</span> &lt;col:<span class="number">9</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">1</span> error generated.</span><br></pre></td></tr></table></figure>



<p>百度搜索了下，解决方案为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、首先检查开头没有漏写#include &lt;stdio.h&gt;；</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、未安装 Command Line Tools命令行工具，安装步骤如下：</span><br><span class="line"></span><br><span class="line">在终端中输入 xcode-select --install，按提示安装完成后，重启终端即可。</span><br></pre></td></tr></table></figure>

<p>但是试了下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select: error: command <span class="built_in">line</span> tools are already installed, use <span class="string">"Software Update"</span> to install updates</span><br></pre></td></tr></table></figure>

<p>最后找到了解决方案：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /Library/Developer/CommandLineTools</span><br><span class="line">xcode-select --install</span><br><span class="line">cd /Library/Developer/CommandLineTools/Packages/</span><br><span class="line"><span class="built_in">open</span> macOS_SDK_headers_for_macOS_10<span class="number">.14</span>.pkg</span><br></pre></td></tr></table></figure>

<p>重新输入命令：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang -cc1 -ast-dump hello.c</span><br></pre></td></tr></table></figure>

<p>输出为：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br></pre></td><td class="code"><pre><span class="line">TranslationUnitDecl <span class="number">0x7fa0bf82eae8</span> &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt;</span><br><span class="line">|-TypedefDecl 0x7fa0bf82f380 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __int128_t '__int128'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82f080 '__int128'</span><br><span class="line">|-TypedefDecl 0x7fa0bf82f3e8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __uint128_t 'unsigned __int128'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82f0a0 'unsigned __int128'</span><br><span class="line">|-TypedefDecl 0x7fa0bf82f6a8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __NSConstantString 'struct __NSConstantString_tag'</span><br><span class="line">| `-RecordType 0x7fa0bf82f4c0 'struct __NSConstantString_tag'</span><br><span class="line">|   `-Record 0x7fa0bf82f438 '__NSConstantString_tag'</span><br><span class="line">|-TypedefDecl 0x7fa0bf82f740 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __builtin_ms_va_list 'char *'</span><br><span class="line">| `-PointerType 0x7fa0bf82f700 'char *'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82eb80 'char'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003868 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit referenced __builtin_va_list 'struct __va_list_tag [1]'</span><br><span class="line">| `-ConstantArrayType 0x7fa0c0003810 'struct __va_list_tag [1]' 1 </span><br><span class="line">|   `-RecordType 0x7fa0c0003690 'struct __va_list_tag'</span><br><span class="line">|     `-Record 0x7fa0c0003600 '__va_list_tag'</span><br><span class="line">|-TypedefDecl 0x7fa0c00038d0 &lt;/usr/include/i386/_types.h:37:1, col:33&gt; col:33 __int8_t 'signed char'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82eba0 'signed char'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003938 &lt;line:41:1, col:33&gt; col:33 __uint8_t 'unsigned char'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec40 'unsigned char'</span><br><span class="line">|-TypedefDecl 0x7fa0c00039a0 &lt;line:42:1, col:33&gt; col:33 __int16_t 'short'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebc0 'short'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003a08 &lt;line:43:1, col:33&gt; col:33 referenced __uint16_t 'unsigned short'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec60 'unsigned short'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003a70 &lt;line:44:1, col:33&gt; col:33 referenced __int32_t 'int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003ad8 &lt;line:45:1, col:33&gt; col:33 referenced __uint32_t 'unsigned int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003b40 &lt;line:46:1, col:33&gt; col:33 referenced __int64_t 'long long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003ba8 &lt;line:47:1, col:33&gt; col:33 referenced __uint64_t 'unsigned long long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ecc0 'unsigned long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003c10 &lt;line:49:1, col:33&gt; col:33 referenced __darwin_intptr_t 'long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec00 'long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003c78 &lt;line:50:1, col:33&gt; col:33 referenced __darwin_natural_t 'unsigned int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003ce0 &lt;line:70:1, col:33&gt; col:33 __darwin_ct_rune_t 'int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c0003d30</span> &lt;<span class="built_in">line</span>:<span class="number">76</span>:<span class="number">9</span>, <span class="built_in">line</span>:<span class="number">79</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">76</span>:<span class="number">9</span> <span class="keyword">union</span> definition</span><br><span class="line">| |-FieldDecl 0x7fa0c0003e58 &lt;line:77:2, col:32&gt; col:18 __mbstate8 'char [128]'</span><br><span class="line">| `-FieldDecl 0x7fa0c0003eb8 &lt;line:78:2, col:18&gt; col:18 _mbstateL 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0003f58 &lt;line:76:1, line:79:3&gt; col:3 referenced __mbstate_t 'union __mbstate_t':'__mbstate_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c0003f00 'union __mbstate_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c0003dc0 '__mbstate_t'</span><br><span class="line">|     `-Record <span class="number">0x7fa0c0003d30</span> <span class="string">''</span></span><br><span class="line">|-TypedefDecl 0x7fa0c0003ff0 &lt;line:81:1, col:33&gt; col:33 __darwin_mbstate_t '__mbstate_t':'__mbstate_t'</span><br><span class="line">| `-TypedefType 0x7fa0c0003fc0 '__mbstate_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003f58 '__mbstate_t'</span><br><span class="line">|   `-ElaboratedType 0x7fa0c0003f00 'union __mbstate_t' sugar</span><br><span class="line">|     `-RecordType 0x7fa0c0003dc0 '__mbstate_t'</span><br><span class="line">|       `-Record <span class="number">0x7fa0c0003d30</span> <span class="string">''</span></span><br><span class="line">|-TypedefDecl 0x7fa0c0004058 &lt;line:84:1, col:33&gt; col:33 __darwin_ptrdiff_t 'long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec00 'long'</span><br><span class="line">|-TypedefDecl 0x7fa0c00040c0 &lt;line:92:1, col:33&gt; col:33 referenced __darwin_size_t 'unsigned long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82eca0 'unsigned long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0004140 &lt;line:98:1, col:33&gt; col:33 referenced __darwin_va_list '__builtin_va_list':'struct __va_list_tag [1]'</span><br><span class="line">| `-TypedefType 0x7fa0c0004110 '__builtin_va_list' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003868 '__builtin_va_list'</span><br><span class="line">|   `-ConstantArrayType 0x7fa0c0003810 'struct __va_list_tag [1]' 1 </span><br><span class="line">|     `-RecordType 0x7fa0c0003690 'struct __va_list_tag'</span><br><span class="line">|       `-Record 0x7fa0c0003600 '__va_list_tag'</span><br><span class="line">|-TypedefDecl 0x7fa0c00041a8 &lt;line:104:1, col:33&gt; col:33 referenced __darwin_wchar_t 'int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0004230 &lt;line:109:1, col:33&gt; col:33 __darwin_rune_t '__darwin_wchar_t':'int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004200 '__darwin_wchar_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c00041a8 '__darwin_wchar_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0004298 &lt;line:112:1, col:33&gt; col:33 __darwin_wint_t 'int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0004300 &lt;line:117:1, col:33&gt; col:33 __darwin_clock_t 'unsigned long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82eca0 'unsigned long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0004380 &lt;line:118:1, col:33&gt; col:33 __darwin_socklen_t '__uint32_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004350 '__uint32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003ad8 '__uint32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c00043e8 &lt;line:119:1, col:33&gt; col:33 referenced __darwin_ssize_t 'long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec00 'long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0004450 &lt;line:120:1, col:33&gt; col:33 __darwin_time_t 'long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec00 'long'</span><br><span class="line">|-TypedefDecl 0x7fa0c00044d0 &lt;/usr/include/sys/_types.h:55:1, col:25&gt; col:25 __darwin_blkcnt_t '__int64_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c00044a0 '__int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003b40 '__int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0004550 &lt;line:56:1, col:25&gt; col:25 __darwin_blksize_t '__int32_t':'int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004520 '__int32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003a70 '__int32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c00045b0 &lt;line:57:1, col:25&gt; col:25 __darwin_dev_t '__int32_t':'int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004520 '__int32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003a70 '__int32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004da18 &lt;line:58:1, col:25&gt; col:25 __darwin_fsblkcnt_t 'unsigned int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004da80 &lt;line:59:1, col:25&gt; col:25 __darwin_fsfilcnt_t 'unsigned int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004dae0 &lt;line:60:1, col:25&gt; col:25 __darwin_gid_t '__uint32_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004350 '__uint32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003ad8 '__uint32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004db40 &lt;line:61:1, col:25&gt; col:25 __darwin_id_t '__uint32_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004350 '__uint32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003ad8 '__uint32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004dbc0 &lt;line:62:1, col:25&gt; col:25 referenced __darwin_ino64_t '__uint64_t':'unsigned long long'</span><br><span class="line">| `-TypedefType 0x7fa0c004db90 '__uint64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003ba8 '__uint64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ecc0 'unsigned long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c004dc40 &lt;line:64:1, col:26&gt; col:26 __darwin_ino_t '__darwin_ino64_t':'unsigned long long'</span><br><span class="line">| `-TypedefType 0x7fa0c004dc10 '__darwin_ino64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c004dbc0 '__darwin_ino64_t'</span><br><span class="line">|   `-TypedefType 0x7fa0c004db90 '__uint64_t' sugar</span><br><span class="line">|     |-Typedef 0x7fa0c0003ba8 '__uint64_t'</span><br><span class="line">|     `-BuiltinType 0x7fa0bf82ecc0 'unsigned long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c004dcc0 &lt;line:68:1, col:28&gt; col:28 referenced __darwin_mach_port_name_t '__darwin_natural_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c004dc90 '__darwin_natural_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003c78 '__darwin_natural_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004dd40 &lt;line:69:1, col:35&gt; col:35 __darwin_mach_port_t '__darwin_mach_port_name_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c004dd10 '__darwin_mach_port_name_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c004dcc0 '__darwin_mach_port_name_t'</span><br><span class="line">|   `-TypedefType 0x7fa0c004dc90 '__darwin_natural_t' sugar</span><br><span class="line">|     |-Typedef 0x7fa0c0003c78 '__darwin_natural_t'</span><br><span class="line">|     `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004ddc0 &lt;line:70:1, col:25&gt; col:25 __darwin_mode_t '__uint16_t':'unsigned short'</span><br><span class="line">| `-TypedefType 0x7fa0c004dd90 '__uint16_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003a08 '__uint16_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec60 'unsigned short'</span><br><span class="line">|-TypedefDecl 0x7fa0c004de20 &lt;line:71:1, col:25&gt; col:25 referenced __darwin_off_t '__int64_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c00044a0 '__int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003b40 '__int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c004de80 &lt;line:72:1, col:25&gt; col:25 __darwin_pid_t '__int32_t':'int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004520 '__int32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003a70 '__int32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004dee0 &lt;line:73:1, col:25&gt; col:25 __darwin_sigset_t '__uint32_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004350 '__uint32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003ad8 '__uint32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004df40 &lt;line:74:1, col:25&gt; col:25 __darwin_suseconds_t '__int32_t':'int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004520 '__int32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003a70 '__int32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004dfa0 &lt;line:75:1, col:25&gt; col:25 __darwin_uid_t '__uint32_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004350 '__uint32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003ad8 '__uint32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004e000 &lt;line:76:1, col:25&gt; col:25 __darwin_useconds_t '__uint32_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004350 '__uint32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003ad8 '__uint32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c004e0d0 &lt;line:77:1, col:43&gt; col:25 __darwin_uuid_t 'unsigned char [16]'</span><br><span class="line">| `-ConstantArrayType 0x7fa0c004e070 'unsigned char [16]' 16 </span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec40 'unsigned char'</span><br><span class="line">|-TypedefDecl 0x7fa0c004e198 &lt;line:78:1, col:42&gt; col:17 __darwin_uuid_string_t 'char [37]'</span><br><span class="line">| `-ConstantArrayType 0x7fa0c004e140 'char [37]' 37 </span><br><span class="line">|   `-BuiltinType 0x7fa0bf82eb80 'char'</span><br><span class="line">|-RecordDecl 0x7fa0c004e1e8 &lt;/usr/include/sys/_pthread/_pthread_types.h:57:1, line:61:1&gt; line:57:8 struct __darwin_pthread_handler_rec definition</span><br><span class="line">| |-FieldDecl 0x7fa0c004e410 &lt;line:58:2, col:26&gt; col:9 __routine 'void (*)(void *)'</span><br><span class="line">| |-FieldDecl 0x7fa0c004e470 &lt;line:59:2, col:8&gt; col:8 __arg 'void *'</span><br><span class="line">| `-FieldDecl 0x7fa0c004e580 &lt;line:60:2, col:39&gt; col:39 __next 'struct __darwin_pthread_handler_rec *'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c004e5c8</span> &lt;<span class="built_in">line</span>:<span class="number">63</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">66</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">63</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_attr_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c004e688 &lt;line:64:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| `-FieldDecl 0x7fa0c004e748 &lt;line:65:2, col:37&gt; col:7 __opaque 'char [56]'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c004e790</span> &lt;<span class="built_in">line</span>:<span class="number">68</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">71</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">68</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_cond_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c004e858 &lt;line:69:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| `-FieldDecl 0x7fa0c004e918 &lt;line:70:2, col:37&gt; col:7 __opaque 'char [40]'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c004e960</span> &lt;<span class="built_in">line</span>:<span class="number">73</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">76</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">73</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_condattr_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c0050a38 &lt;line:74:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| `-FieldDecl 0x7fa0c0050af8 &lt;line:75:2, col:41&gt; col:7 __opaque 'char [8]'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c0050b40</span> &lt;<span class="built_in">line</span>:<span class="number">78</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">81</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">78</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_mutex_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c0050c08 &lt;line:79:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| `-FieldDecl 0x7fa0c0050c90 &lt;line:80:2, col:38&gt; col:7 __opaque 'char [56]'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c0050cd8</span> &lt;<span class="built_in">line</span>:<span class="number">83</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">86</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">83</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_mutexattr_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c0050d98 &lt;line:84:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| `-FieldDecl 0x7fa0c0050e20 &lt;line:85:2, col:42&gt; col:7 __opaque 'char [8]'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c0050e68</span> &lt;<span class="built_in">line</span>:<span class="number">88</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">91</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">88</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_once_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c0050f28 &lt;line:89:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| `-FieldDecl 0x7fa0c0050fb0 &lt;line:90:2, col:37&gt; col:7 __opaque 'char [8]'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c0050ff8</span> &lt;<span class="built_in">line</span>:<span class="number">93</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">96</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">93</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_rwlock_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c00510b8 &lt;line:94:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| `-FieldDecl 0x7fa0c0051178 &lt;line:95:2, col:39&gt; col:7 __opaque 'char [192]'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c00511c0</span> &lt;<span class="built_in">line</span>:<span class="number">98</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">101</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">98</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_rwlockattr_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c0051288 &lt;line:99:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| `-FieldDecl 0x7fa0c0051348 &lt;line:100:2, col:43&gt; col:7 __opaque 'char [16]'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c0051390</span> &lt;<span class="built_in">line</span>:<span class="number">103</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">107</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">103</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> _<span class="title">opaque_pthread_t</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c0051458 &lt;line:104:2, col:7&gt; col:7 __sig 'long'</span><br><span class="line">| |-FieldDecl 0x7fa0c00514c8 &lt;line:105:2, col:40&gt; col:40 __cleanup_stack 'struct __darwin_pthread_handler_rec *'</span><br><span class="line">| `-FieldDecl 0x7fa0c0051588 &lt;line:106:2, col:32&gt; col:7 __opaque 'char [8176]'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051628 &lt;line:109:1, col:39&gt; col:39 __darwin_pthread_attr_t 'struct _opaque_pthread_attr_t':'struct _opaque_pthread_attr_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c00515d0 'struct _opaque_pthread_attr_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c004e650 'struct _opaque_pthread_attr_t'</span><br><span class="line">|     `-Record 0x7fa0c004e5c8 '_opaque_pthread_attr_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c00516d8 &lt;line:110:1, col:39&gt; col:39 __darwin_pthread_cond_t 'struct _opaque_pthread_cond_t':'struct _opaque_pthread_cond_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c0051680 'struct _opaque_pthread_cond_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c004e820 'struct _opaque_pthread_cond_t'</span><br><span class="line">|     `-Record 0x7fa0c004e790 '_opaque_pthread_cond_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051788 &lt;line:111:1, col:43&gt; col:43 __darwin_pthread_condattr_t 'struct _opaque_pthread_condattr_t':'struct _opaque_pthread_condattr_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c0051730 'struct _opaque_pthread_condattr_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c0050a00 'struct _opaque_pthread_condattr_t'</span><br><span class="line">|     `-Record 0x7fa0c004e960 '_opaque_pthread_condattr_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c00517f0 &lt;line:112:1, col:23&gt; col:23 __darwin_pthread_key_t 'unsigned long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82eca0 'unsigned long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051898 &lt;line:113:1, col:40&gt; col:40 __darwin_pthread_mutex_t 'struct _opaque_pthread_mutex_t':'struct _opaque_pthread_mutex_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c0051840 'struct _opaque_pthread_mutex_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c0050bd0 'struct _opaque_pthread_mutex_t'</span><br><span class="line">|     `-Record 0x7fa0c0050b40 '_opaque_pthread_mutex_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051948 &lt;line:114:1, col:44&gt; col:44 __darwin_pthread_mutexattr_t 'struct _opaque_pthread_mutexattr_t':'struct _opaque_pthread_mutexattr_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c00518f0 'struct _opaque_pthread_mutexattr_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c0050d60 'struct _opaque_pthread_mutexattr_t'</span><br><span class="line">|     `-Record 0x7fa0c0050cd8 '_opaque_pthread_mutexattr_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051a00 &lt;line:115:1, col:39&gt; col:39 __darwin_pthread_once_t 'struct _opaque_pthread_once_t':'struct _opaque_pthread_once_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c00519a0 'struct _opaque_pthread_once_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c0050ef0 'struct _opaque_pthread_once_t'</span><br><span class="line">|     `-Record 0x7fa0c0050e68 '_opaque_pthread_once_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051aa8 &lt;line:116:1, col:41&gt; col:41 __darwin_pthread_rwlock_t 'struct _opaque_pthread_rwlock_t':'struct _opaque_pthread_rwlock_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c0051a50 'struct _opaque_pthread_rwlock_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c0051080 'struct _opaque_pthread_rwlock_t'</span><br><span class="line">|     `-Record 0x7fa0c0050ff8 '_opaque_pthread_rwlock_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051b58 &lt;line:117:1, col:45&gt; col:45 __darwin_pthread_rwlockattr_t 'struct _opaque_pthread_rwlockattr_t':'struct _opaque_pthread_rwlockattr_t'</span><br><span class="line">| `-ElaboratedType 0x7fa0c0051b00 'struct _opaque_pthread_rwlockattr_t' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c0051250 'struct _opaque_pthread_rwlockattr_t'</span><br><span class="line">|     `-Record 0x7fa0c00511c0 '_opaque_pthread_rwlockattr_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051c70 &lt;line:118:1, col:35&gt; col:35 __darwin_pthread_t 'struct _opaque_pthread_t *'</span><br><span class="line">| `-PointerType 0x7fa0c0051c20 'struct _opaque_pthread_t *'</span><br><span class="line">|   `-ElaboratedType 0x7fa0c0051bb0 'struct _opaque_pthread_t' sugar</span><br><span class="line">|     `-RecordType 0x7fa0c0051420 'struct _opaque_pthread_t'</span><br><span class="line">|       `-Record 0x7fa0c0051390 '_opaque_pthread_t'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051cd8 &lt;/usr/include/_types.h:40:1, col:14&gt; col:14 __darwin_nl_item 'int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051d40 &lt;line:41:1, col:14&gt; col:14 __darwin_wctrans_t 'int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051da0 &lt;line:43:1, col:20&gt; col:20 __darwin_wctype_t '__uint32_t':'unsigned int'</span><br><span class="line">| `-TypedefType 0x7fa0c0004350 '__uint32_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003ad8 '__uint32_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051e08 &lt;/usr/include/sys/_types/_int8_t.h:30:1, col:33&gt; col:33 int8_t 'signed char'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82eba0 'signed char'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051e70 &lt;/usr/include/sys/_types/_int16_t.h:30:1, col:33&gt; col:33 int16_t 'short'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebc0 'short'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051ed8 &lt;/usr/include/sys/_types/_int32_t.h:30:1, col:33&gt; col:33 int32_t 'int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ebe0 'int'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051f40 &lt;/usr/include/sys/_types/_int64_t.h:30:1, col:33&gt; col:33 referenced int64_t 'long long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0051fa8 &lt;/usr/include/sys/_types/_u_int8_t.h:30:1, col:33&gt; col:33 u_int8_t 'unsigned char'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec40 'unsigned char'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052010 &lt;/usr/include/sys/_types/_u_int16_t.h:30:1, col:41&gt; col:41 u_int16_t 'unsigned short'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec60 'unsigned short'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052078 &lt;/usr/include/sys/_types/_u_int32_t.h:30:1, col:33&gt; col:33 u_int32_t 'unsigned int'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ec80 'unsigned int'</span><br><span class="line">|-TypedefDecl 0x7fa0c00520e0 &lt;/usr/include/sys/_types/_u_int64_t.h:30:1, col:33&gt; col:33 referenced u_int64_t 'unsigned long long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82ecc0 'unsigned long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052160 &lt;/usr/include/i386/types.h:87:1, col:33&gt; col:33 register_t 'int64_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c0052130 'int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0051f40 'int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c00521e0 &lt;/usr/include/sys/_types/_intptr_t.h:32:1, col:33&gt; col:33 intptr_t '__darwin_intptr_t':'long'</span><br><span class="line">| `-TypedefType 0x7fa0c00521b0 '__darwin_intptr_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0003c10 '__darwin_intptr_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec00 'long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052248 &lt;/usr/include/sys/_types/_uintptr_t.h:30:1, col:33&gt; col:33 uintptr_t 'unsigned long'</span><br><span class="line">| `-BuiltinType 0x7fa0bf82eca0 'unsigned long'</span><br><span class="line">|-TypedefDecl 0x7fa0c00522d0 &lt;/usr/include/i386/types.h:97:1, col:33&gt; col:33 user_addr_t 'u_int64_t':'unsigned long long'</span><br><span class="line">| `-TypedefType 0x7fa0c00522a0 'u_int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c00520e0 'u_int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ecc0 'unsigned long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052330 &lt;line:98:1, col:33&gt; col:33 user_size_t 'u_int64_t':'unsigned long long'</span><br><span class="line">| `-TypedefType 0x7fa0c00522a0 'u_int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c00520e0 'u_int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ecc0 'unsigned long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052390 &lt;line:99:1, col:33&gt; col:33 user_ssize_t 'int64_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c0052130 'int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0051f40 'int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c00523f0 &lt;line:100:1, col:33&gt; col:33 user_long_t 'int64_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c0052130 'int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0051f40 'int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052450 &lt;line:101:1, col:33&gt; col:33 user_ulong_t 'u_int64_t':'unsigned long long'</span><br><span class="line">| `-TypedefType 0x7fa0c00522a0 'u_int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c00520e0 'u_int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ecc0 'unsigned long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c00524b0 &lt;line:102:1, col:33&gt; col:33 user_time_t 'int64_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c0052130 'int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0051f40 'int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052510 &lt;line:103:1, col:33&gt; col:33 user_off_t 'int64_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c0052130 'int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0051f40 'int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052570 &lt;line:111:1, col:33&gt; col:33 syscall_arg_t 'u_int64_t':'unsigned long long'</span><br><span class="line">| `-TypedefType 0x7fa0c00522a0 'u_int64_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c00520e0 'u_int64_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ecc0 'unsigned long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c00525f0 &lt;/usr/include/sys/_types/_va_list.h:32:1, col:26&gt; col:26 referenced va_list '__darwin_va_list':'struct __va_list_tag [1]'</span><br><span class="line">| `-TypedefType 0x7fa0c00525c0 '__darwin_va_list' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c0004140 '__darwin_va_list'</span><br><span class="line">|   `-TypedefType 0x7fa0c0004110 '__builtin_va_list' sugar</span><br><span class="line">|     |-Typedef 0x7fa0c0003868 '__builtin_va_list'</span><br><span class="line">|     `-ConstantArrayType 0x7fa0c0003810 'struct __va_list_tag [1]' 1 </span><br><span class="line">|       `-RecordType 0x7fa0c0003690 'struct __va_list_tag'</span><br><span class="line">|         `-Record 0x7fa0c0003600 '__va_list_tag'</span><br><span class="line">|-TypedefDecl 0x7fa0c0052670 &lt;/usr/include/sys/_types/_size_t.h:31:1, col:32&gt; col:32 referenced size_t '__darwin_size_t':'unsigned long'</span><br><span class="line">| `-TypedefType 0x7fa0c0052640 '__darwin_size_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c00040c0 '__darwin_size_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82eca0 'unsigned long'</span><br><span class="line">|-FunctionDecl 0x7fa0c0052948 &lt;/usr/include/sys/stdio.h:39:1, /usr/include/AvailabilityInternal.h:48714:126&gt; /usr/include/sys/stdio.h:39:9 renameat 'int (int, const char *, int, const char *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00526d8 &lt;col:18&gt; col:21 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0052750 &lt;col:23, col:34&gt; col:35 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00527c8 &lt;col:37&gt; col:40 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0052840 &lt;col:42, col:53&gt; col:54 'const char *'</span><br><span class="line">| `-AvailabilityAttr 0x7fa0c005ea20 &lt;/usr/include/AvailabilityInternal.h:48714:88, col:124&gt; macos 10.10 0 0 "" ""</span><br><span class="line">|-FunctionDecl 0x7fa0c005ed28 &lt;/usr/include/sys/stdio.h:46:1, /usr/include/Availability.h:267:117&gt; /usr/include/sys/stdio.h:46:5 renamex_np 'int (const char *, const char *, unsigned int)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c005eb10 &lt;col:16, col:27&gt; col:28 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c005eb88 &lt;col:30, col:41&gt; col:42 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c005ec00 &lt;col:44, col:53&gt; col:56 'unsigned int'</span><br><span class="line">| |-AvailabilityAttr 0x7fa0c005ede0 &lt;/usr/include/Availability.h:267:81, col:115&gt; watchos 3.0 0 0 "" ""</span><br><span class="line">| |-AvailabilityAttr <span class="number">0x7fa0c005ee78</span> &lt;col:<span class="number">81</span>, col:<span class="number">115</span>&gt; tvos <span class="number">10.0</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">| |-AvailabilityAttr <span class="number">0x7fa0c005eee0</span> &lt;col:<span class="number">81</span>, col:<span class="number">115</span>&gt; ios <span class="number">10.0</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">| `-AvailabilityAttr <span class="number">0x7fa0c005ef48</span> &lt;col:<span class="number">81</span>, col:<span class="number">115</span>&gt; macos <span class="number">10.12</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">|-FunctionDecl 0x7fa0c005f2f8 &lt;/usr/include/sys/stdio.h:47:1, /usr/include/Availability.h:267:117&gt; /usr/include/sys/stdio.h:47:5 renameatx_np 'int (int, const char *, int, const char *, unsigned int)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c005efc8 &lt;col:18&gt; col:21 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c005f040 &lt;col:23, col:34&gt; col:35 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c005f0b8 &lt;col:37&gt; col:40 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c005f130 &lt;col:42, col:53&gt; col:54 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c005f1a8 &lt;col:56, col:65&gt; col:68 'unsigned int'</span><br><span class="line">| |-AvailabilityAttr 0x7fa0c005f3c0 &lt;/usr/include/Availability.h:267:81, col:115&gt; watchos 3.0 0 0 "" ""</span><br><span class="line">| |-AvailabilityAttr <span class="number">0x7fa0c005f458</span> &lt;col:<span class="number">81</span>, col:<span class="number">115</span>&gt; tvos <span class="number">10.0</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">| |-AvailabilityAttr <span class="number">0x7fa0c005f4c0</span> &lt;col:<span class="number">81</span>, col:<span class="number">115</span>&gt; ios <span class="number">10.0</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">| `-AvailabilityAttr <span class="number">0x7fa0c005f528</span> &lt;col:<span class="number">81</span>, col:<span class="number">115</span>&gt; macos <span class="number">10.12</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">|-TypedefDecl 0x7fa0c005f5c0 &lt;/usr/include/_stdio.h:81:1, col:25&gt; col:25 referenced fpos_t '__darwin_off_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c005f590 '__darwin_off_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c004de20 '__darwin_off_t'</span><br><span class="line">|   `-TypedefType 0x7fa0c00044a0 '__int64_t' sugar</span><br><span class="line">|     |-Typedef 0x7fa0c0003b40 '__int64_t'</span><br><span class="line">|     `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c005f610</span> &lt;<span class="built_in">line</span>:<span class="number">92</span>:<span class="number">1</span>, <span class="built_in">line</span>:<span class="number">95</span>:<span class="number">1</span>&gt; <span class="built_in">line</span>:<span class="number">92</span>:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> __<span class="title">sbuf</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c005f700 &lt;line:93:2, col:17&gt; col:17 _base 'unsigned char *'</span><br><span class="line">| `-FieldDecl 0x7fa0c005f760 &lt;line:94:2, col:7&gt; col:7 _size 'int'</span><br><span class="line">|-RecordDecl <span class="number">0x7fa0c005f7a8</span> &lt;<span class="built_in">line</span>:<span class="number">98</span>:<span class="number">1</span>, col:<span class="number">8</span>&gt; col:<span class="number">8</span> <span class="class"><span class="keyword">struct</span> __<span class="title">sFILEX</span></span></span><br><span class="line"><span class="class">|-<span class="title">RecordDecl</span> 0<span class="title">x7fa0c005f850</span> &lt;line:126:9, line:157:1&gt; <span class="title">line</span>:</span><span class="number">126</span>:<span class="number">16</span> <span class="class"><span class="keyword">struct</span> __<span class="title">sFILE</span> <span class="title">definition</span></span></span><br><span class="line">| |-FieldDecl 0x7fa0c005f918 &lt;line:127:2, col:17&gt; col:17 referenced _p 'unsigned char *'</span><br><span class="line">| |-FieldDecl 0x7fa0c005f978 &lt;line:128:2, col:6&gt; col:6 _r 'int'</span><br><span class="line">| |-FieldDecl 0x7fa0c002f000 &lt;line:129:2, col:6&gt; col:6 referenced _w 'int'</span><br><span class="line">| |-FieldDecl 0x7fa0c002f060 &lt;line:130:2, col:8&gt; col:8 _flags 'short'</span><br><span class="line">| |-FieldDecl 0x7fa0c002f0c0 &lt;line:131:2, col:8&gt; col:8 _file 'short'</span><br><span class="line">| |-FieldDecl 0x7fa0c002f168 &lt;line:132:2, col:16&gt; col:16 _bf 'struct __sbuf':'struct __sbuf'</span><br><span class="line">| |-FieldDecl 0x7fa0c002f1c8 &lt;line:133:2, col:6&gt; col:6 referenced _lbfsize 'int'</span><br><span class="line">| |-FieldDecl 0x7fa0c002f228 &lt;line:136:2, col:8&gt; col:8 _cookie 'void *'</span><br><span class="line">| |-FieldDecl 0x7fa0c002f448 &lt;line:137:2, col:19&gt; col:19 _close 'int (* _Nullable)(void *)':'int (*)(void *)'</span><br><span class="line">| |-FieldDecl 0x7fa0c002f778 &lt;line:138:2, col:19&gt; col:19 _read 'int (* _Nullable)(void *, char *, int)':'int (*)(void *, char *, int)'</span><br><span class="line">| |-FieldDecl 0x7fa0c002fb00 &lt;line:139:2, col:22&gt; col:22 _seek 'fpos_t (* _Nullable)(void *, fpos_t, int)':'fpos_t (*)(void *, fpos_t, int)'</span><br><span class="line">| |-FieldDecl 0x7fa0c002fe28 &lt;line:140:2, col:19&gt; col:19 _write 'int (* _Nullable)(void *, const char *, int)':'int (*)(void *, const char *, int)'</span><br><span class="line">| |-FieldDecl 0x7fa0c002fe90 &lt;line:143:2, col:16&gt; col:16 _ub 'struct __sbuf':'struct __sbuf'</span><br><span class="line">| |-FieldDecl 0x7fa0c002ffa0 &lt;line:144:2, col:19&gt; col:19 _extra 'struct __sFILEX *'</span><br><span class="line">| |-FieldDecl 0x7fa0c0030000 &lt;line:145:2, col:6&gt; col:6 _ur 'int'</span><br><span class="line">| |-FieldDecl 0x7fa0c00300d0 &lt;line:148:2, col:23&gt; col:16 _ubuf 'unsigned char [3]'</span><br><span class="line">| |-FieldDecl 0x7fa0c00301a0 &lt;line:149:2, col:23&gt; col:16 _nbuf 'unsigned char [1]'</span><br><span class="line">| |-FieldDecl 0x7fa0c0030208 &lt;line:152:2, col:16&gt; col:16 _lb 'struct __sbuf':'struct __sbuf'</span><br><span class="line">| |-FieldDecl 0x7fa0c0030268 &lt;line:155:2, col:6&gt; col:6 _blksize 'int'</span><br><span class="line">| `-FieldDecl 0x7fa0c00302c0 &lt;line:156:2, col:9&gt; col:9 _offset 'fpos_t':'long long'</span><br><span class="line">|-TypedefDecl 0x7fa0c0030368 &lt;line:126:1, line:157:3&gt; col:3 referenced FILE 'struct __sFILE':'struct __sFILE'</span><br><span class="line">| `-ElaboratedType 0x7fa0c0030310 'struct __sFILE' sugar</span><br><span class="line">|   `-RecordType 0x7fa0c005f8e0 'struct __sFILE'</span><br><span class="line">|     `-Record 0x7fa0c005f850 '__sFILE'</span><br><span class="line">|-VarDecl 0x7fa0c0030458 &lt;/usr/include/stdio.h:67:1, col:14&gt; col:14 __stdinp 'FILE *' extern</span><br><span class="line">|-VarDecl 0x7fa0c00304c8 &lt;line:68:1, col:14&gt; col:14 __stdoutp 'FILE *' extern</span><br><span class="line">|-VarDecl 0x7fa0c0030538 &lt;line:69:1, col:14&gt; col:14 __stderrp 'FILE *' extern</span><br><span class="line">|-FunctionDecl 0x7fa0c00306b0 &lt;line:142:1, col:22&gt; col:7 clearerr 'void (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c00305a8 &lt;col:16, col:21&gt; col:22 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0030878 &lt;line:143:1, col:19&gt; col:6 fclose 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0030768 &lt;col:13, col:18&gt; col:19 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c00309c0 &lt;line:144:1, col:17&gt; col:6 feof 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0030930 &lt;col:11, col:16&gt; col:17 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0030b08 &lt;line:145:1, col:19&gt; col:6 ferror 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0030a78 &lt;col:13, col:18&gt; col:19 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0030c50 &lt;line:146:1, col:19&gt; col:6 fflush 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0030bc0 &lt;col:13, col:18&gt; col:19 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0030d98 &lt;line:147:1, col:18&gt; col:6 fgetc 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0030d08 &lt;col:12, col:17&gt; col:18 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0063238 &lt;line:148:1, col:41&gt; col:6 fgetpos 'int (FILE *restrict, fpos_t *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0030e50 &lt;col:14, col:19&gt; col:31 'FILE *restrict'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0030f18 &lt;col:33, col:40&gt; col:41 'fpos_t *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0063528 &lt;line:149:1, col:43&gt; col:7 fgets 'char *(char *restrict, int, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0063300 &lt;col:13, col:18&gt; col:30 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0063378 &lt;col:32&gt; col:35 'int'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c00633e8 &lt;col:37, col:42&gt; col:43 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0063830 &lt;line:153:7&gt; col:7 implicit fopen 'FILE *(const char *, const char *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00638d0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0063930 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c00639a0 prev 0x7fa0c0063830 &lt;col:1, /usr/include/sys/cdefs.h:590:84&gt; /usr/include/stdio.h:153:7 fopen 'FILE *(const char *, const char *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00635f8 &lt;col:13, col:37&gt; col:37 __filename 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0063670 &lt;col:49, col:73&gt; col:73 __mode 'const char *restrict'</span><br><span class="line">| `-AsmLabelAttr 0x7fa0c0063a40 &lt;/usr/include/sys/cdefs.h:590:47&gt; "_fopen"</span><br><span class="line">|-FunctionDecl 0x7fa0c0063ce0 &lt;/usr/include/stdio.h:155:6&gt; col:6 implicit fprintf 'int (FILE *, const char *, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0063d80 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'FILE *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0063de0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0063e50</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0063ea0 prev 0x7fa0c0063ce0 &lt;col:1, /usr/include/sys/cdefs.h:351:70&gt; /usr/include/stdio.h:155:6 fprintf 'int (FILE *, const char *, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0063ab0 &lt;col:14, col:19&gt; col:31 'FILE *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0063b28 &lt;col:33, col:44&gt; col:56 'const char *restrict'</span><br><span class="line">| `-FormatAttr 0x7fa0c0063f50 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 2 3</span><br><span class="line">|-FunctionDecl 0x7fa0c0064148 &lt;/usr/include/stdio.h:156:1, col:23&gt; col:6 fputc 'int (int, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0063fb8 &lt;col:12&gt; col:15 'int'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0064028 &lt;col:17, col:22&gt; col:23 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c00643d8 &lt;line:157:1, /usr/include/sys/cdefs.h:590:84&gt; /usr/include/stdio.h:157:6 fputs 'int (const char *restrict, FILE *restrict)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064218 &lt;col:12, col:23&gt; col:35 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064288 &lt;col:37, col:42&gt; col:54 'FILE *restrict'</span><br><span class="line">| `-AsmLabelAttr 0x7fa0c0064478 &lt;/usr/include/sys/cdefs.h:590:47&gt; "_fputs"</span><br><span class="line">|-FunctionDecl 0x7fa0c0064800 &lt;/usr/include/stdio.h:158:9&gt; col:9 implicit fread 'unsigned long (void *, unsigned long, unsigned long, FILE *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00648a0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'void *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064900 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064960 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'unsigned long'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c00649c0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0064a40 prev 0x7fa0c0064800 &lt;col:1, col:98&gt; col:9 fread 'unsigned long (void *, unsigned long, unsigned long, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064518 &lt;col:15, col:33&gt; col:33 __ptr 'void *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064588 &lt;col:40, col:47&gt; col:47 __size 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00645f8 &lt;col:55, col:62&gt; col:62 __nitems 'size_t':'unsigned long'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0064668 &lt;col:72, col:90&gt; col:90 __stream 'FILE *restrict'</span><br><span class="line">|-FunctionDecl 0x7fa0c0064da0 &lt;line:159:1, /usr/include/sys/cdefs.h:590:84&gt; /usr/include/stdio.h:159:7 freopen 'FILE *(const char *restrict, const char *restrict, FILE *restrict)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064b18 &lt;col:15, col:26&gt; col:38 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064b90 &lt;col:40, col:51&gt; col:63 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064c00 &lt;line:160:18, col:23&gt; col:35 'FILE *restrict'</span><br><span class="line">| `-AsmLabelAttr 0x7fa0c0064e40 &lt;/usr/include/sys/cdefs.h:590:47&gt; "_freopen"</span><br><span class="line">|-FunctionDecl 0x7fa0c0065018 &lt;/usr/include/stdio.h:161:6&gt; col:6 implicit fscanf 'int (FILE *restrict, const char *restrict, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00650b8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'FILE *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065118 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *restrict'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0065188</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">scanf</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0065200 prev 0x7fa0c0065018 &lt;col:1, /usr/include/sys/cdefs.h:355:69&gt; /usr/include/stdio.h:161:6 fscanf 'int (FILE *restrict, const char *restrict, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064eb8 &lt;col:13, col:18&gt; col:30 'FILE *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0064f30 &lt;col:32, col:43&gt; col:55 'const char *restrict'</span><br><span class="line">| `-FormatAttr 0x7fa0c00652b0 &lt;/usr/include/sys/cdefs.h:355:25, col:67&gt; scanf 2 3</span><br><span class="line">|-FunctionDecl 0x7fa0c0065538 &lt;/usr/include/stdio.h:162:1, col:29&gt; col:6 fseek 'int (FILE *, long, int)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065310 &lt;col:12, col:17&gt; col:18 'FILE *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065388 &lt;col:20&gt; col:24 'long'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0065400 &lt;col:26&gt; col:29 'int'</span><br><span class="line">|-FunctionDecl 0x7fa0c00657e8 &lt;line:163:1, col:36&gt; col:6 fsetpos 'int (FILE *, const fpos_t *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065600 &lt;col:14, col:19&gt; col:20 'FILE *'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c00656c8 &lt;col:22, col:35&gt; col:36 'const fpos_t *'</span><br><span class="line">|-FunctionDecl 0x7fa0c00659b8 &lt;line:164:1, col:19&gt; col:7 ftell 'long (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c00658a8 &lt;col:13, col:18&gt; col:19 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0065dc0 &lt;line:165:9&gt; col:9 implicit fwrite 'unsigned long (const void *, unsigned long, unsigned long, FILE *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065e60 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const void *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065ec0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065f20 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'unsigned long'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0065f80 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0066000 prev 0x7fa0c0065dc0 &lt;col:1, /usr/include/sys/cdefs.h:590:84&gt; /usr/include/stdio.h:165:9 fwrite 'unsigned long (const void *, unsigned long, unsigned long, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065aa0 &lt;col:16, col:40&gt; col:40 __ptr 'const void *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065b10 &lt;col:47, col:54&gt; col:54 __size 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065b80 &lt;col:62, col:69&gt; col:69 __nitems 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0065bf0 &lt;col:79, col:97&gt; col:97 __stream 'FILE *restrict'</span><br><span class="line">| `-AsmLabelAttr 0x7fa0c00660a0 &lt;/usr/include/sys/cdefs.h:590:47&gt; "_fwrite"</span><br><span class="line">|-FunctionDecl 0x7fa0c0066200 &lt;/usr/include/stdio.h:166:1, col:17&gt; col:6 getc 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0066120 &lt;col:11, col:16&gt; col:17 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0066378 &lt;line:167:1, col:18&gt; col:6 getchar 'int (void)'</span><br><span class="line">|-FunctionDecl 0x7fa0c00664f8 &lt;line:168:1, col:18&gt; col:7 gets 'char *(char *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0066430 &lt;col:12, col:17&gt; col:18 'char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0066680 &lt;line:169:1, col:26&gt; col:7 perror 'void (const char *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c00665b8 &lt;col:14, col:25&gt; col:26 'const char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0066898 &lt;line:170:6&gt; col:6 implicit used printf 'int (const char *, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0066938 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c00669a0</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line">|-FunctionDecl 0x7fa0c00669f0 prev 0x7fa0c0066898 &lt;col:1, /usr/include/sys/cdefs.h:351:70&gt; /usr/include/stdio.h:170:6 used printf 'int (const char *, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0066740 &lt;col:13, col:24&gt; col:36 'const char *restrict'</span><br><span class="line">| `-FormatAttr 0x7fa0c0066a98 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 1 2</span><br><span class="line">|-FunctionDecl 0x7fa0c0066c08 &lt;/usr/include/stdio.h:171:1, col:22&gt; col:6 putc 'int (int, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0066b00 &lt;col:11&gt; col:14 'int'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0066b70 &lt;col:16, col:21&gt; col:22 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0066d98 &lt;line:172:1, col:17&gt; col:6 putchar 'int (int)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0066cd0 &lt;col:14&gt; col:17 'int'</span><br><span class="line">|-FunctionDecl 0x7fa0c0066f28 &lt;line:173:1, col:23&gt; col:6 puts 'int (const char *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0066e58 &lt;col:11, col:22&gt; col:23 'const char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0067078 &lt;line:174:1, col:25&gt; col:6 remove 'int (const char *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0066fe8 &lt;col:13, col:24&gt; col:25 'const char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c00672d8 &lt;line:175:1, col:50&gt; col:6 rename 'int (const char *, const char *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0067138 &lt;col:14, col:26&gt; col:26 __old 'const char *'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0067200 &lt;col:33, col:45&gt; col:45 __new 'const char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0067420 &lt;line:176:1, col:20&gt; col:7 rewind 'void (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0067398 &lt;col:14, col:19&gt; col:20 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c00675c0 &lt;line:177:6&gt; col:6 implicit scanf 'int (const char *restrict, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0067660 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *restrict'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c00676c8</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">scanf</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0067718 prev 0x7fa0c00675c0 &lt;col:1, /usr/include/sys/cdefs.h:355:69&gt; /usr/include/stdio.h:177:6 scanf 'int (const char *restrict, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00674e0 &lt;col:12, col:23&gt; col:35 'const char *restrict'</span><br><span class="line">| `-FormatAttr 0x7fa0c00677c0 &lt;/usr/include/sys/cdefs.h:355:25, col:67&gt; scanf 1 2</span><br><span class="line">|-FunctionDecl 0x7fa0c00679b0 &lt;/usr/include/stdio.h:178:1, col:50&gt; col:7 setbuf 'void (FILE *restrict, char *restrict)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0067820 &lt;col:14, col:19&gt; col:31 'FILE *restrict'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0067898 &lt;col:33, col:38&gt; col:50 'char *restrict'</span><br><span class="line">|-FunctionDecl 0x7fa0c0067d18 &lt;line:179:1, col:63&gt; col:6 setvbuf 'int (FILE *restrict, char *restrict, int, size_t)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0067a70 &lt;col:14, col:19&gt; col:31 'FILE *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0067ae8 &lt;col:33, col:38&gt; col:50 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0067b60 &lt;col:52&gt; col:55 'int'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0067bd0 &lt;col:57&gt; col:63 'size_t':'unsigned long'</span><br><span class="line">|-FunctionDecl 0x7fa0c0068068 &lt;line:180:6&gt; col:6 implicit sprintf 'int (char *, const char *, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0068108 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0068168 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c00681d8</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0068230 prev 0x7fa0c0068068 &lt;col:1, /usr/include/sys/cdefs.h:275:107&gt; /usr/include/stdio.h:180:6 sprintf 'int (char *, const char *, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0067df0 &lt;col:14, col:19&gt; col:31 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0067e68 &lt;col:33, col:44&gt; col:56 'const char *restrict'</span><br><span class="line">| |-AvailabilityAttr 0x7fa0c00682e0 &lt;/usr/include/sys/cdefs.h:275:56, col:105&gt; swift 0 0 0 Unavailable "Use snprintf instead." ""</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0068390</span> &lt;<span class="built_in">line</span>:<span class="number">351</span>:<span class="number">25</span>, col:<span class="number">68</span>&gt; <span class="built_in">printf</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">|-FunctionDecl 0x7fa0c00685a8 &lt;/usr/include/stdio.h:181:6&gt; col:6 implicit sscanf 'int (const char *restrict, const char *restrict, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0068648 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00686a8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *restrict'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0068718</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">scanf</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0068768 prev 0x7fa0c00685a8 &lt;col:1, /usr/include/sys/cdefs.h:355:69&gt; /usr/include/stdio.h:181:6 sscanf 'int (const char *restrict, const char *restrict, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00683c8 &lt;col:13, col:24&gt; col:36 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0068440 &lt;col:38, col:49&gt; col:61 'const char *restrict'</span><br><span class="line">| `-FormatAttr 0x7fa0c0068818 &lt;/usr/include/sys/cdefs.h:355:25, col:67&gt; scanf 2 3</span><br><span class="line">|-FunctionDecl 0x7fa0c0068960 &lt;/usr/include/stdio.h:182:1, col:19&gt; col:7 tmpfile 'FILE *(void)'</span><br><span class="line">|-FunctionDecl 0x7fa0c0068c50 &lt;/usr/include/sys/cdefs.h:275:41, /usr/include/stdio.h:188:20&gt; col:7 tmpnam 'char *(char *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0068bc0 &lt;col:14, col:19&gt; col:20 'char *'</span><br><span class="line">| |-DeprecatedAttr 0x7fa0c0068cf8 &lt;/usr/include/sys/cdefs.h:180:48, col:63&gt; "This function is provided for compatibility reasons only.  Due to security concerns inherent in the design of tmpnam(3), it is highly recommended that you use mkstemp(3) instead." ""</span><br><span class="line">| `-AvailabilityAttr <span class="number">0x7fa0c0068e08</span> &lt;<span class="built_in">line</span>:<span class="number">275</span>:<span class="number">56</span>, col:<span class="number">105</span>&gt; swift <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> Unavailable <span class="string">"Use mkstemp(3) instead."</span> <span class="string">""</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0068fa8 &lt;/usr/include/stdio.h:189:1, col:24&gt; col:6 ungetc 'int (int, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0068ea0 &lt;col:13&gt; col:16 'int'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0068f10 &lt;col:18, col:23&gt; col:24 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c00693d8 &lt;line:190:6&gt; col:6 implicit vfprintf 'int (FILE *, const char *, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069478 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'FILE *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00694d8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069538 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c00695b0</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">2</span> <span class="number">0</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0069600 prev 0x7fa0c00693d8 &lt;col:1, /usr/include/sys/cdefs.h:351:70&gt; /usr/include/stdio.h:190:6 vfprintf 'int (FILE *, const char *, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069068 &lt;col:15, col:20&gt; col:32 'FILE *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00690e0 &lt;col:34, col:45&gt; col:57 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069200 &lt;col:59&gt; col:66 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr 0x7fa0c00696b8 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 2 0</span><br><span class="line">|-FunctionDecl 0x7fa0c00698f8 &lt;/usr/include/stdio.h:191:6&gt; col:6 implicit vprintf 'int (const char *, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069998 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00699f8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0069a68</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0069ab8 prev 0x7fa0c00698f8 &lt;col:1, /usr/include/sys/cdefs.h:351:70&gt; /usr/include/stdio.h:191:6 vprintf 'int (const char *, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069720 &lt;col:14, col:25&gt; col:37 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069790 &lt;col:39&gt; col:46 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr 0x7fa0c0069b68 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 1 0</span><br><span class="line">|-FunctionDecl 0x7fa0c0069ed8 &lt;/usr/include/stdio.h:192:6&gt; col:6 implicit vsprintf 'int (char *, const char *, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069f78 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069fd8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006a038 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c006a0b0</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">2</span> <span class="number">0</span></span><br><span class="line">|-FunctionDecl 0x7fa0c006a100 prev 0x7fa0c0069ed8 &lt;col:1, /usr/include/sys/cdefs.h:275:107&gt; /usr/include/stdio.h:192:6 vsprintf 'int (char *, const char *, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069bd0 &lt;col:15, col:20&gt; col:32 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069c48 &lt;col:34, col:45&gt; col:57 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0069cb8 &lt;col:59&gt; col:66 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| |-AvailabilityAttr 0x7fa0c006a200 &lt;/usr/include/sys/cdefs.h:275:56, col:105&gt; swift 0 0 0 Unavailable "Use vsnprintf instead." ""</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c006a2b0</span> &lt;<span class="built_in">line</span>:<span class="number">351</span>:<span class="number">25</span>, col:<span class="number">68</span>&gt; <span class="built_in">printf</span> <span class="number">2</span> <span class="number">0</span></span><br><span class="line">|-FunctionDecl 0x7fa0c006a378 &lt;/usr/include/stdio.h:208:1, col:21&gt; col:7 ctermid 'char *(char *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006a2e8 &lt;col:15, col:20&gt; col:21 'char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006a600 &lt;line:214:1, /usr/include/sys/cdefs.h:590:84&gt; /usr/include/stdio.h:214:7 fdopen 'FILE *(int, const char *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006a438 &lt;col:14&gt; col:17 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006a4b0 &lt;col:19, col:30&gt; col:31 'const char *'</span><br><span class="line">| `-AsmLabelAttr 0x7fa0c006a6a0 &lt;/usr/include/sys/cdefs.h:590:47&gt; "_fdopen"</span><br><span class="line">|-FunctionDecl 0x7fa0c006a7a0 &lt;/usr/include/stdio.h:216:1, col:19&gt; col:6 fileno 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006a710 &lt;col:13, col:18&gt; col:19 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006a948 &lt;line:232:1, /usr/include/sys/cdefs.h:275:107&gt; /usr/include/stdio.h:232:6 pclose 'int (FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006a858 &lt;col:13, col:18&gt; col:19 'FILE *'</span><br><span class="line">| `-AvailabilityAttr 0x7fa0c006a9f0 &lt;/usr/include/sys/cdefs.h:275:56, col:105&gt; swift 0 0 0 Unavailable "Use posix_spawn APIs or NSTask instead." ""</span><br><span class="line">|-FunctionDecl 0x7fa0c006ac68 &lt;/usr/include/stdio.h:236:1, /usr/include/sys/cdefs.h:275:107&gt; /usr/include/stdio.h:236:7 popen 'FILE *(const char *, const char *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006aac8 &lt;col:13, col:24&gt; col:25 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006ab40 &lt;col:27, col:38&gt; col:39 'const char *'</span><br><span class="line">| |-AsmLabelAttr 0x7fa0c006ad08 &lt;/usr/include/sys/cdefs.h:590:47&gt; "_popen"</span><br><span class="line">| `-AvailabilityAttr <span class="number">0x7fa0c006ad68</span> &lt;<span class="built_in">line</span>:<span class="number">275</span>:<span class="number">56</span>, col:<span class="number">105</span>&gt; swift <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> Unavailable <span class="string">"Use posix_spawn APIs or NSTask instead."</span> <span class="string">""</span></span><br><span class="line">|-FunctionDecl 0x7fa0c006ae98 &lt;/usr/include/stdio.h:253:1, col:19&gt; col:5 __srget 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006ae08 &lt;col:13, col:18&gt; col:19 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006b200 &lt;line:254:1, /usr/include/sys/cdefs.h:355:69&gt; /usr/include/stdio.h:254:5 __svfscanf 'int (FILE *, const char *, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006af50 &lt;col:16, col:21&gt; col:22 'FILE *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006afc8 &lt;col:24, col:35&gt; col:36 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006b038 &lt;col:38&gt; col:45 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr 0x7fa0c006b2b8 &lt;/usr/include/sys/cdefs.h:355:25, col:67&gt; scanf 2 0</span><br><span class="line">|-FunctionDecl 0x7fa0c006b428 &lt;/usr/include/stdio.h:255:1, col:24&gt; col:5 used __swbuf 'int (int, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006b320 &lt;col:13&gt; col:16 'int'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006b390 &lt;col:18, col:23&gt; col:24 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006b5f8 &lt;/usr/include/sys/cdefs.h:300:36, /usr/include/stdio.h:269:1&gt; line:264:28 __sputc 'int (int, FILE *)' inline</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006b4f0 &lt;col:36, col:40&gt; col:40 used _c 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006b560 &lt;col:44, col:50&gt; col:50 used _p 'FILE *'</span><br><span class="line">| |-CompoundStmt <span class="number">0x7fa0c006bd98</span> &lt;col:<span class="number">54</span>, <span class="built_in">line</span>:<span class="number">269</span>:<span class="number">1</span>&gt;</span><br><span class="line">| | `-IfStmt <span class="number">0x7fa0c006bd60</span> &lt;<span class="built_in">line</span>:<span class="number">265</span>:<span class="number">2</span>, <span class="built_in">line</span>:<span class="number">268</span>:<span class="number">26</span>&gt;</span><br><span class="line">| |   |-&lt;&lt;&lt;<span class="literal">NULL</span>&gt;&gt;&gt;</span><br><span class="line">| |   |-&lt;&lt;&lt;<span class="literal">NULL</span>&gt;&gt;&gt;</span><br><span class="line">| |   |-BinaryOperator 0x7fa0c006ba28 &lt;line:265:6, col:66&gt; 'int' '||'</span><br><span class="line">| |   | |-BinaryOperator 0x7fa0c006b7a0 &lt;col:6, col:18&gt; 'int' '&gt;='</span><br><span class="line">| |   | | |-UnaryOperator 0x7fa0c006b760 &lt;col:6, col:12&gt; 'int' prefix '--'</span><br><span class="line">| |   | | | `-MemberExpr 0x7fa0c006b728 &lt;col:8, col:12&gt; 'int' lvalue -&gt;_w 0x7fa0c002f000</span><br><span class="line">| |   | | |   `-ImplicitCastExpr 0x7fa0c006b710 &lt;col:8&gt; 'FILE *' &lt;LValueToRValue&gt;</span><br><span class="line">| |   | | |     `-DeclRefExpr 0x7fa0c006b6e8 &lt;col:8&gt; 'FILE *' lvalue ParmVar 0x7fa0c006b560 '_p' 'FILE *'</span><br><span class="line">| |   | | `-IntegerLiteral 0x7fa0c006b780 &lt;col:18&gt; 'int' 0</span><br><span class="line">| |   | `-ParenExpr 0x7fa0c006ba08 &lt;col:23, col:66&gt; 'int'</span><br><span class="line">| |   |   `-BinaryOperator 0x7fa0c006b9e0 &lt;col:24, col:62&gt; 'int' '&amp;&amp;'</span><br><span class="line">| |   |     |-BinaryOperator 0x7fa0c006b8e8 &lt;col:24, col:38&gt; 'int' '&gt;='</span><br><span class="line">| |   |     | |-ImplicitCastExpr 0x7fa0c006b8b8 &lt;col:24, col:28&gt; 'int' &lt;LValueToRValue&gt;</span><br><span class="line">| |   |     | | `-MemberExpr 0x7fa0c006b808 &lt;col:24, col:28&gt; 'int' lvalue -&gt;_w 0x7fa0c002f000</span><br><span class="line">| |   |     | |   `-ImplicitCastExpr 0x7fa0c006b7f0 &lt;col:24&gt; 'FILE *' &lt;LValueToRValue&gt;</span><br><span class="line">| |   |     | |     `-DeclRefExpr 0x7fa0c006b7c8 &lt;col:24&gt; 'FILE *' lvalue ParmVar 0x7fa0c006b560 '_p' 'FILE *'</span><br><span class="line">| |   |     | `-ImplicitCastExpr 0x7fa0c006b8d0 &lt;col:34, col:38&gt; 'int' &lt;LValueToRValue&gt;</span><br><span class="line">| |   |     |   `-MemberExpr 0x7fa0c006b880 &lt;col:34, col:38&gt; 'int' lvalue -&gt;_lbfsize 0x7fa0c002f1c8</span><br><span class="line">| |   |     |     `-ImplicitCastExpr 0x7fa0c006b868 &lt;col:34&gt; 'FILE *' &lt;LValueToRValue&gt;</span><br><span class="line">| |   |     |       `-DeclRefExpr 0x7fa0c006b840 &lt;col:34&gt; 'FILE *' lvalue ParmVar 0x7fa0c006b560 '_p' 'FILE *'</span><br><span class="line">| |   |     `-BinaryOperator 0x7fa0c006b9b8 &lt;col:50, col:62&gt; 'int' '!='</span><br><span class="line">| |   |       |-ImplicitCastExpr 0x7fa0c006b9a0 &lt;col:50, col:56&gt; 'int' &lt;IntegralCast&gt;</span><br><span class="line">| |   |       | `-CStyleCastExpr 0x7fa0c006b960 &lt;col:50, col:56&gt; 'char' &lt;IntegralCast&gt;</span><br><span class="line">| |   |       |   `-ImplicitCastExpr 0x7fa0c006b948 &lt;col:56&gt; 'int' &lt;LValueToRValue&gt; part_of_explicit_cast</span><br><span class="line">| |   |       |     `-DeclRefExpr 0x7fa0c006b910 &lt;col:56&gt; 'int' lvalue ParmVar 0x7fa0c006b4f0 '_c' 'int'</span><br><span class="line">| |   |       `-CharacterLiteral 0x7fa0c006b988 &lt;col:62&gt; 'int' 10</span><br><span class="line">| |   |-ReturnStmt <span class="number">0x7fa0c006bbc0</span> &lt;<span class="built_in">line</span>:<span class="number">266</span>:<span class="number">3</span>, col:<span class="number">25</span>&gt;</span><br><span class="line">| |   | `-ImplicitCastExpr 0x7fa0c006bba8 &lt;col:10, col:25&gt; 'int' &lt;IntegralCast&gt;</span><br><span class="line">| |   |   `-ParenExpr 0x7fa0c006bb88 &lt;col:10, col:25&gt; 'unsigned char'</span><br><span class="line">| |   |     `-BinaryOperator 0x7fa0c006bb60 &lt;col:11, col:23&gt; 'unsigned char' '='</span><br><span class="line">| |   |       |-UnaryOperator 0x7fa0c006bae8 &lt;col:11, col:18&gt; 'unsigned char' lvalue prefix '*' cannot overflow</span><br><span class="line">| |   |       | `-UnaryOperator 0x7fa0c006bac8 &lt;col:12, col:18&gt; 'unsigned char *' postfix '++'</span><br><span class="line">| |   |       |   `-MemberExpr 0x7fa0c006ba90 &lt;col:12, col:16&gt; 'unsigned char *' lvalue -&gt;_p 0x7fa0c005f918</span><br><span class="line">| |   |       |     `-ImplicitCastExpr 0x7fa0c006ba78 &lt;col:12&gt; 'FILE *' &lt;LValueToRValue&gt;</span><br><span class="line">| |   |       |       `-DeclRefExpr 0x7fa0c006ba50 &lt;col:12&gt; 'FILE *' lvalue ParmVar 0x7fa0c006b560 '_p' 'FILE *'</span><br><span class="line">| |   |       `-ImplicitCastExpr 0x7fa0c006bb48 &lt;col:23&gt; 'unsigned char' &lt;IntegralCast&gt;</span><br><span class="line">| |   |         `-ImplicitCastExpr 0x7fa0c006bb30 &lt;col:23&gt; 'int' &lt;LValueToRValue&gt;</span><br><span class="line">| |   |           `-DeclRefExpr 0x7fa0c006bb08 &lt;col:23&gt; 'int' lvalue ParmVar 0x7fa0c006b4f0 '_c' 'int'</span><br><span class="line">| |   `-ReturnStmt <span class="number">0x7fa0c006bd48</span> &lt;<span class="built_in">line</span>:<span class="number">268</span>:<span class="number">3</span>, col:<span class="number">26</span>&gt;</span><br><span class="line">| |     `-ParenExpr 0x7fa0c006bd28 &lt;col:10, col:26&gt; 'int'</span><br><span class="line">| |       `-CallExpr 0x7fa0c006bcc0 &lt;col:11, col:25&gt; 'int'</span><br><span class="line">| |         |-ImplicitCastExpr 0x7fa0c006bca8 &lt;col:11&gt; 'int (*)(int, FILE *)' &lt;FunctionToPointerDecay&gt;</span><br><span class="line">| |         | `-DeclRefExpr 0x7fa0c006bbd8 &lt;col:11&gt; 'int (int, FILE *)' Function 0x7fa0c006b428 '__swbuf' 'int (int, FILE *)'</span><br><span class="line">| |         |-ImplicitCastExpr 0x7fa0c006bcf8 &lt;col:19&gt; 'int' &lt;LValueToRValue&gt;</span><br><span class="line">| |         | `-DeclRefExpr 0x7fa0c006bc00 &lt;col:19&gt; 'int' lvalue ParmVar 0x7fa0c006b4f0 '_c' 'int'</span><br><span class="line">| |         `-ImplicitCastExpr 0x7fa0c006bd10 &lt;col:23&gt; 'FILE *' &lt;LValueToRValue&gt;</span><br><span class="line">| |           `-DeclRefExpr 0x7fa0c006bc28 &lt;col:23&gt; 'FILE *' lvalue ParmVar 0x7fa0c006b560 '_p' 'FILE *'</span><br><span class="line">| `-AlwaysInlineAttr 0x7fa0c006b6a8 &lt;/usr/include/sys/cdefs.h:313:68&gt; always_inline</span><br><span class="line">|-FunctionDecl 0x7fa0c006be48 &lt;/usr/include/stdio.h:290:1, col:23&gt; col:7 flockfile 'void (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006bdc0 &lt;col:17, col:22&gt; col:23 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006bf90 &lt;line:291:1, col:25&gt; col:6 ftrylockfile 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006bf00 &lt;col:19, col:24&gt; col:25 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006c0d0 &lt;line:292:1, col:25&gt; col:7 funlockfile 'void (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006c048 &lt;col:19, col:24&gt; col:25 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006e230 &lt;line:293:1, col:26&gt; col:6 getc_unlocked 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006c188 &lt;col:20, col:25&gt; col:26 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006e370 &lt;line:294:1, col:27&gt; col:6 getchar_unlocked 'int (void)'</span><br><span class="line">|-FunctionDecl 0x7fa0c006e530 &lt;line:295:1, col:31&gt; col:6 putc_unlocked 'int (int, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006e428 &lt;col:20&gt; col:23 'int'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006e498 &lt;col:25, col:30&gt; col:31 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006e688 &lt;line:296:1, col:26&gt; col:6 putchar_unlocked 'int (int)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006e5f8 &lt;col:23&gt; col:26 'int'</span><br><span class="line">|-FunctionDecl 0x7fa0c006e7d0 &lt;line:300:1, col:17&gt; col:6 getw 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006e740 &lt;col:11, col:16&gt; col:17 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006e998 &lt;line:301:1, col:22&gt; col:6 putw 'int (int, FILE *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006e890 &lt;col:11&gt; col:14 'int'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006e900 &lt;col:16, col:21&gt; col:22 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c006ed58 &lt;/usr/include/sys/cdefs.h:275:41, line:590:84&gt; /usr/include/stdio.h:308:7 tempnam 'char *(const char *, const char *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006ebd0 &lt;col:15, col:27&gt; col:27 __dir 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006ec48 &lt;col:34, col:46&gt; col:46 __prefix 'const char *'</span><br><span class="line">| |-AsmLabelAttr 0x7fa0c006edf8 &lt;/usr/include/sys/cdefs.h:590:47&gt; "_tempnam"</span><br><span class="line">| |-DeprecatedAttr <span class="number">0x7fa0c006ee58</span> &lt;<span class="built_in">line</span>:<span class="number">180</span>:<span class="number">48</span>, col:<span class="number">63</span>&gt; <span class="string">"This function is provided for compatibility reasons only.  Due to security concerns inherent in the design of tempnam(3), it is highly recommended that you use mkstemp(3) instead."</span> <span class="string">""</span></span><br><span class="line">| `-AvailabilityAttr <span class="number">0x7fa0c006ef38</span> &lt;<span class="built_in">line</span>:<span class="number">275</span>:<span class="number">56</span>, col:<span class="number">105</span>&gt; swift <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> Unavailable <span class="string">"Use mkstemp(3) instead."</span> <span class="string">""</span></span><br><span class="line">|-TypedefDecl 0x7fa0c006efc8 &lt;/usr/include/sys/_types/_off_t.h:31:1, col:33&gt; col:33 referenced off_t '__darwin_off_t':'long long'</span><br><span class="line">| `-TypedefType 0x7fa0c005f590 '__darwin_off_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c004de20 '__darwin_off_t'</span><br><span class="line">|   `-TypedefType 0x7fa0c00044a0 '__int64_t' sugar</span><br><span class="line">|     |-Typedef 0x7fa0c0003b40 '__int64_t'</span><br><span class="line">|     `-BuiltinType 0x7fa0bf82ec20 'long long'</span><br><span class="line">|-FunctionDecl 0x7fa0c0071288 &lt;/usr/include/stdio.h:331:1, col:58&gt; col:6 fseeko 'int (FILE *, off_t, int)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006f028 &lt;col:13, col:20&gt; col:20 __stream 'FILE *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c006f0c0 &lt;col:30, col:36&gt; col:36 __offset 'off_t':'long long'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c006f138 &lt;col:46, col:50&gt; col:50 __whence 'int'</span><br><span class="line">|-FunctionDecl 0x7fa0c0071450 &lt;line:332:1, col:30&gt; col:8 ftello 'off_t (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0071350 &lt;col:15, col:22&gt; col:22 __stream 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0071788 &lt;line:338:6&gt; col:6 implicit snprintf 'int (char *, unsigned long, const char *, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071828 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071888 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00718e8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0071960</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line">|-FunctionDecl 0x7fa0c00719b0 prev 0x7fa0c0071788 &lt;col:1, /usr/include/sys/cdefs.h:351:70&gt; /usr/include/stdio.h:338:6 snprintf 'int (char *, unsigned long, const char *, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071510 &lt;col:15, col:33&gt; col:33 __str 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071580 &lt;col:40, col:47&gt; col:47 __size 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00715f8 &lt;col:55, col:79&gt; col:79 __format 'const char *restrict'</span><br><span class="line">| `-FormatAttr 0x7fa0c0071a68 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 3 4</span><br><span class="line">|-FunctionDecl 0x7fa0c0071ce8 &lt;/usr/include/stdio.h:339:6&gt; col:6 implicit vfscanf 'int (FILE *restrict, const char *restrict, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071d88 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'FILE *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071de8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071e48 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0071ec0</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">scanf</span> <span class="number">2</span> <span class="number">0</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0071f10 prev 0x7fa0c0071ce8 &lt;col:1, /usr/include/sys/cdefs.h:355:69&gt; /usr/include/stdio.h:339:6 vfscanf 'int (FILE *restrict, const char *restrict, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071ac8 &lt;col:14, col:32&gt; col:32 __stream 'FILE *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071b40 &lt;col:42, col:66&gt; col:66 __format 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0071bb0 &lt;col:76&gt; col:83 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr 0x7fa0c0071fc8 &lt;/usr/include/sys/cdefs.h:355:25, col:67&gt; scanf 2 0</span><br><span class="line">|-FunctionDecl 0x7fa0c0072200 &lt;/usr/include/stdio.h:340:6&gt; col:6 implicit vscanf 'int (const char *restrict, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00722a0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072300 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0072370</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">scanf</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line">|-FunctionDecl 0x7fa0c00723c0 prev 0x7fa0c0072200 &lt;col:1, /usr/include/sys/cdefs.h:355:69&gt; /usr/include/stdio.h:340:6 vscanf 'int (const char *restrict, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072030 &lt;col:13, col:37&gt; col:37 __format 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00720a0 &lt;col:47&gt; col:54 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr 0x7fa0c0072470 &lt;/usr/include/sys/cdefs.h:355:25, col:67&gt; scanf 1 0</span><br><span class="line">|-FunctionDecl 0x7fa0c00727c8 &lt;/usr/include/stdio.h:341:6&gt; col:6 implicit vsnprintf 'int (char *, unsigned long, const char *, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072868 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00728c8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072928 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072988 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0072a08</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">printf</span> <span class="number">3</span> <span class="number">0</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0072a58 prev 0x7fa0c00727c8 &lt;col:1, /usr/include/sys/cdefs.h:351:70&gt; /usr/include/stdio.h:341:6 vsnprintf 'int (char *, unsigned long, const char *, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00724d8 &lt;col:16, col:34&gt; col:34 __str 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072548 &lt;col:41, col:48&gt; col:48 __size 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00725c0 &lt;col:56, col:80&gt; col:80 __format 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072630 &lt;col:90&gt; col:97 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr 0x7fa0c0072b18 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 3 0</span><br><span class="line">|-FunctionDecl 0x7fa0c0072e48 &lt;/usr/include/stdio.h:342:6&gt; col:6 implicit vsscanf 'int (const char *restrict, const char *restrict, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072ee8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072f48 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072fa8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; 'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr <span class="number">0x7fa0c0073020</span> &lt;col:<span class="number">6</span>&gt; Implicit <span class="built_in">scanf</span> <span class="number">2</span> <span class="number">0</span></span><br><span class="line">|-FunctionDecl 0x7fa0c0073070 prev 0x7fa0c0072e48 &lt;col:1, /usr/include/sys/cdefs.h:355:69&gt; /usr/include/stdio.h:342:6 vsscanf 'int (const char *restrict, const char *restrict, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072b80 &lt;col:14, col:38&gt; col:38 __str 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072bf8 &lt;col:45, col:69&gt; col:69 __format 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0072c68 &lt;col:79&gt; col:86 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr 0x7fa0c0073128 &lt;/usr/include/sys/cdefs.h:355:25, col:67&gt; scanf 2 0</span><br><span class="line">|-TypedefDecl 0x7fa0c00731b0 &lt;/usr/include/sys/_types/_ssize_t.h:31:1, col:33&gt; col:33 referenced ssize_t '__darwin_ssize_t':'long'</span><br><span class="line">| `-TypedefType 0x7fa0c0073180 '__darwin_ssize_t' sugar</span><br><span class="line">|   |-Typedef 0x7fa0c00043e8 '__darwin_ssize_t'</span><br><span class="line">|   `-BuiltinType 0x7fa0bf82ec00 'long'</span><br><span class="line">|-FunctionDecl 0x7fa0c1002a08 &lt;/usr/include/stdio.h:356:1, /usr/include/AvailabilityInternal.h:48327:124&gt; /usr/include/stdio.h:356:5 dprintf 'int (int, const char *restrict, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1002818 &lt;col:13&gt; col:16 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1002890 &lt;col:18, col:29&gt; col:41 'const char *restrict'</span><br><span class="line">| |-AvailabilityAttr 0x7fa0c1002ab8 &lt;/usr/include/AvailabilityInternal.h:48327:87, col:122&gt; macos 10.7 0 0 "" ""</span><br><span class="line">| `-FormatAttr 0x7fa0c1002b50 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 2 3</span><br><span class="line">|-FunctionDecl 0x7fa0c1002e08 &lt;/usr/include/stdio.h:357:1, /usr/include/AvailabilityInternal.h:48327:124&gt; /usr/include/stdio.h:357:5 vdprintf 'int (int, const char *restrict, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1002b88 &lt;col:14&gt; col:17 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1002c00 &lt;col:19, col:30&gt; col:42 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1002c70 &lt;col:44&gt; col:51 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| |-AvailabilityAttr 0x7fa0c1002ec0 &lt;/usr/include/AvailabilityInternal.h:48327:87, col:122&gt; macos 10.7 0 0 "" ""</span><br><span class="line">| `-FormatAttr 0x7fa0c1002f58 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 2 0</span><br><span class="line">|-FunctionDecl 0x7fa0c10032e0 &lt;/usr/include/stdio.h:358:1, /usr/include/AvailabilityInternal.h:48327:124&gt; /usr/include/stdio.h:358:9 getdelim 'ssize_t (char **restrict, size_t *restrict, int, FILE *restrict)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1002fe0 &lt;col:18, col:37&gt; col:37 __linep 'char **restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c10030a8 &lt;col:46, col:66&gt; col:66 __linecapp 'size_t *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1003120 &lt;col:78, col:82&gt; col:82 __delimiter 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1003190 &lt;col:95, col:113&gt; col:113 __stream 'FILE *restrict'</span><br><span class="line">| `-AvailabilityAttr 0x7fa0c10033a0 &lt;/usr/include/AvailabilityInternal.h:48327:87, col:122&gt; macos 10.7 0 0 "" ""</span><br><span class="line">|-FunctionDecl 0x7fa0c1003670 &lt;/usr/include/stdio.h:359:1, /usr/include/AvailabilityInternal.h:48327:124&gt; /usr/include/stdio.h:359:9 getline 'ssize_t (char **restrict, size_t *restrict, FILE *restrict)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1003450 &lt;col:17, col:36&gt; col:36 __linep 'char **restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c10034c0 &lt;col:45, col:65&gt; col:65 __linecapp 'size_t *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1003530 &lt;col:77, col:95&gt; col:95 __stream 'FILE *restrict'</span><br><span class="line">| `-AvailabilityAttr 0x7fa0c1003728 &lt;/usr/include/AvailabilityInternal.h:48327:87, col:122&gt; macos 10.7 0 0 "" ""</span><br><span class="line">|-FunctionDecl 0x7fa0c1004260 &lt;/usr/include/stdio.h:360:1, /usr/include/AvailabilityInternal.h:52023:82&gt; /usr/include/stdio.h:360:7 fmemopen 'FILE *(void *restrict, size_t, const char *restrict)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1004000 &lt;col:16, col:34&gt; col:34 __buf 'void *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1004070 &lt;col:41, col:48&gt; col:48 __size 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c10040e8 &lt;col:56, col:80&gt; col:80 __mode 'const char *restrict'</span><br><span class="line">| |-AvailabilityAttr 0x7fa0c1004318 &lt;/usr/include/AvailabilityInternal.h:52023:39, col:80&gt; watchos 4.0 0 0 "" ""</span><br><span class="line">| |-AvailabilityAttr <span class="number">0x7fa0c10043b0</span> &lt;col:<span class="number">39</span>, col:<span class="number">80</span>&gt; tvos <span class="number">11.0</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">| |-AvailabilityAttr <span class="number">0x7fa0c1004418</span> &lt;col:<span class="number">39</span>, col:<span class="number">80</span>&gt; ios <span class="number">11.0</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">| `-AvailabilityAttr <span class="number">0x7fa0c1004480</span> &lt;col:<span class="number">39</span>, col:<span class="number">80</span>&gt; macos <span class="number">10.13</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">|-FunctionDecl 0x7fa0c10046c0 &lt;/usr/include/stdio.h:361:1, /usr/include/AvailabilityInternal.h:52023:82&gt; /usr/include/stdio.h:361:7 open_memstream 'FILE *(char **, size_t *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1004500 &lt;col:22, col:29&gt; col:29 __bufp 'char **'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1004570 &lt;col:37, col:45&gt; col:45 __sizep 'size_t *'</span><br><span class="line">| |-AvailabilityAttr 0x7fa0c1004770 &lt;/usr/include/AvailabilityInternal.h:52023:39, col:80&gt; watchos 4.0 0 0 "" ""</span><br><span class="line">| |-AvailabilityAttr <span class="number">0x7fa0c1004808</span> &lt;col:<span class="number">39</span>, col:<span class="number">80</span>&gt; tvos <span class="number">11.0</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">| |-AvailabilityAttr <span class="number">0x7fa0c1004870</span> &lt;col:<span class="number">39</span>, col:<span class="number">80</span>&gt; ios <span class="number">11.0</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">| `-AvailabilityAttr <span class="number">0x7fa0c10048d8</span> &lt;col:<span class="number">39</span>, col:<span class="number">80</span>&gt; macos <span class="number">10.13</span> <span class="number">0</span> <span class="number">0</span> <span class="string">""</span> <span class="string">""</span></span><br><span class="line">|-VarDecl 0x7fa0c1004958 &lt;/usr/include/stdio.h:371:1, col:20&gt; col:20 sys_nerr 'const int' extern</span><br><span class="line">|-VarDecl 0x7fa0c1004a40 &lt;line:372:1, col:42&gt; col:30 sys_errlist 'const char *const []' extern</span><br><span class="line">|-FunctionDecl 0x7fa0c1004c98 &lt;line:374:1, /usr/include/sys/cdefs.h:351:70&gt; /usr/include/stdio.h:374:6 asprintf 'int (char **restrict, const char *restrict, ...)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1004ab8 &lt;col:15, col:21&gt; col:33 'char **restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1004b30 &lt;col:35, col:46&gt; col:58 'const char *restrict'</span><br><span class="line">| `-FormatAttr 0x7fa0c1004d48 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 2 3</span><br><span class="line">|-FunctionDecl 0x7fa0c1004e40 &lt;/usr/include/stdio.h:375:1, col:23&gt; col:7 ctermid_r 'char *(char *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c1004db0 &lt;col:17, col:22&gt; col:23 'char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c1005eb8 &lt;line:376:1, col:30&gt; col:7 fgetln 'char *(FILE *, size_t *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1004ef8 &lt;col:14, col:19&gt; col:20 'FILE *'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c1004f68 &lt;col:22, col:29&gt; col:30 'size_t *'</span><br><span class="line">|-FunctionDecl 0x7fa0c10060d8 &lt;/usr/include/sys/cdefs.h:116:25, /usr/include/stdio.h:377:50&gt; col:15 fmtcheck 'const char *(const char *, const char *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1005f80 &lt;col:24, col:35&gt; col:36 'const char *'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c1005ff8 &lt;col:38, col:49&gt; col:50 'const char *'</span><br><span class="line">|-FunctionDecl 0x7fa0c1006228 &lt;line:378:1, col:19&gt; col:6 fpurge 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c1006198 &lt;col:13, col:18&gt; col:19 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c1006500 &lt;line:379:1, col:36&gt; col:7 setbuffer 'void (FILE *, char *, int)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c10062e0 &lt;col:17, col:22&gt; col:23 'FILE *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1006358 &lt;col:25, col:30&gt; col:31 'char *'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c10063d0 &lt;col:33&gt; col:36 'int'</span><br><span class="line">|-FunctionDecl 0x7fa0c1006658 &lt;line:380:1, col:23&gt; col:6 setlinebuf 'int (FILE *)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c10065c8 &lt;col:17, col:22&gt; col:23 'FILE *'</span><br><span class="line">|-FunctionDecl 0x7fa0c1006988 &lt;line:381:1, /usr/include/sys/cdefs.h:351:70&gt; /usr/include/stdio.h:381:6 vasprintf 'int (char **restrict, const char *restrict, struct __va_list_tag *)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1006718 &lt;col:16, col:22&gt; col:34 'char **restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1006790 &lt;col:36, col:47&gt; col:59 'const char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1006800 &lt;col:61&gt; col:68 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">| `-FormatAttr 0x7fa0c1006a40 &lt;/usr/include/sys/cdefs.h:351:25, col:68&gt; printf 2 0</span><br><span class="line">|-FunctionDecl 0x7fa0c1006cd0 &lt;/usr/include/stdio.h:382:1, col:44&gt; col:7 zopen 'FILE *(const char *, const char *, int)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1006aa8 &lt;col:13, col:24&gt; col:25 'const char *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1006b20 &lt;col:27, col:38&gt; col:39 'const char *'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c1006b98 &lt;col:41&gt; col:44 'int'</span><br><span class="line">|-FunctionDecl 0x7fa0c10076b0 &lt;line:388:1, line:392:43&gt; line:388:7 funopen 'FILE *(const void *, int (* _Nullable)(void *, char *, int), int (* _Nullable)(void *, const char *, int), fpos_t (* _Nullable)(void *, fpos_t, int), int (* _Nullable)(void *))'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1006da0 &lt;col:15, col:26&gt; col:27 'const void *'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1006fd0 &lt;line:389:18, col:25&gt; col:34 'int (* _Nullable)(void *, char *, int)':'int (*)(void *, char *, int)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007200 &lt;line:390:18, col:25&gt; col:34 'int (* _Nullable)(void *, const char *, int)':'int (*)(void *, const char *, int)'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007420 &lt;line:391:18, col:28&gt; col:37 'fpos_t (* _Nullable)(void *, fpos_t, int)':'fpos_t (*)(void *, fpos_t, int)'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c1007550 &lt;line:392:18, col:25&gt; col:34 'int (* _Nullable)(void *)':'int (*)(void *)'</span><br><span class="line">|-FunctionDecl 0x7fa0c1007a38 &lt;/usr/include/secure/_stdio.h:42:1, line:43:34&gt; line:42:12 __sprintf_chk 'int (char *restrict, int, size_t, const char *restrict, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007790 &lt;col:27, col:32&gt; col:44 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007808 &lt;col:46&gt; col:49 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007878 &lt;col:51&gt; col:57 'size_t':'unsigned long'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c10078f0 &lt;line:43:6, col:17&gt; col:29 'const char *restrict'</span><br><span class="line">|-FunctionDecl 0x7fa0c0074e50 &lt;line:52:1, line:53:35&gt; line:52:12 __snprintf_chk 'int (char *restrict, size_t, int, size_t, const char *restrict, ...)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007b10 &lt;col:28, col:33&gt; col:45 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007b80 &lt;col:47&gt; col:53 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007bf8 &lt;col:55&gt; col:58 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c1007c68 &lt;col:60&gt; col:66 'size_t':'unsigned long'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c1007ce0 &lt;line:53:7, col:18&gt; col:30 'const char *restrict'</span><br><span class="line">|-FunctionDecl 0x7fa0c0075268 &lt;line:61:1, line:62:39&gt; line:61:12 __vsprintf_chk 'int (char *restrict, int, size_t, const char *restrict, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0074f30 &lt;col:28, col:33&gt; col:45 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0074fa8 &lt;col:47&gt; col:50 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0075018 &lt;col:52&gt; col:58 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0075090 &lt;line:62:7, col:18&gt; col:30 'const char *restrict'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0075100 &lt;col:32&gt; col:39 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">|-FunctionDecl 0x7fa0c0075708 &lt;line:70:1, line:71:40&gt; line:70:12 __vsnprintf_chk 'int (char *restrict, size_t, int, size_t, const char *restrict, struct __va_list_tag *)' extern</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0075348 &lt;col:29, col:34&gt; col:46 'char *restrict'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00753b8 &lt;col:48&gt; col:54 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0075430 &lt;col:56&gt; col:59 'int'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c00754a0 &lt;col:61&gt; col:67 'size_t':'unsigned long'</span><br><span class="line">| |-ParmVarDecl 0x7fa0c0075518 &lt;line:71:8, col:19&gt; col:31 'const char *restrict'</span><br><span class="line">| `-ParmVarDecl 0x7fa0c0075588 &lt;col:33&gt; col:40 'struct __va_list_tag *':'struct __va_list_tag *'</span><br><span class="line">`-FunctionDecl 0x7fa0c00759e8 &lt;hello.c:3:1, line:12:1&gt; line:3:5 main 'int (int, char **)'</span><br><span class="line">  |-ParmVarDecl 0x7fa0c00757f0 &lt;col:10, col:14&gt; col:14 argc 'int'</span><br><span class="line">  |-ParmVarDecl 0x7fa0c00758d0 &lt;col:20, col:31&gt; col:26 argv 'char **':'char **'</span><br><span class="line">  `-CompoundStmt <span class="number">0x7fa0c0078f78</span> &lt;col:<span class="number">33</span>, <span class="built_in">line</span>:<span class="number">12</span>:<span class="number">1</span>&gt;</span><br><span class="line">    |-DeclStmt <span class="number">0x7fa0c0075b30</span> &lt;<span class="built_in">line</span>:<span class="number">4</span>:<span class="number">5</span>, col:<span class="number">17</span>&gt;</span><br><span class="line">    | `-VarDecl 0x7fa0c0075ab0 &lt;col:5, col:15&gt; col:9 used age 'int' cinit</span><br><span class="line">    |   `-IntegerLiteral 0x7fa0c0075b10 &lt;col:15&gt; 'int' 45</span><br><span class="line">    |-IfStmt <span class="number">0x7fa0c0078f08</span> &lt;<span class="built_in">line</span>:<span class="number">5</span>:<span class="number">5</span>, <span class="built_in">line</span>:<span class="number">10</span>:<span class="number">5</span>&gt;</span><br><span class="line">    | |-&lt;&lt;&lt;<span class="literal">NULL</span>&gt;&gt;&gt;</span><br><span class="line">    | |-&lt;&lt;&lt;<span class="literal">NULL</span>&gt;&gt;&gt;</span><br><span class="line">    | |-BinaryOperator 0x7fa0c0075c38 &lt;line:5:9, col:21&gt; 'int' '&gt;='</span><br><span class="line">    | | |-ImplicitCastExpr 0x7fa0c0075c20 &lt;col:9&gt; 'int' &lt;LValueToRValue&gt;</span><br><span class="line">    | | | `-DeclRefExpr 0x7fa0c0075b48 &lt;col:9&gt; 'int' lvalue Var 0x7fa0c0075ab0 'age' 'int'</span><br><span class="line">    | | `-BinaryOperator 0x7fa0c0075bf8 &lt;col:16, col:21&gt; 'int' '+'</span><br><span class="line">    | |   |-BinaryOperator 0x7fa0c0075bb0 &lt;col:16, col:19&gt; 'int' '+'</span><br><span class="line">    | |   | |-IntegerLiteral 0x7fa0c0075b70 &lt;col:16&gt; 'int' 17</span><br><span class="line">    | |   | `-IntegerLiteral 0x7fa0c0075b90 &lt;col:19&gt; 'int' 8</span><br><span class="line">    | |   `-IntegerLiteral 0x7fa0c0075bd8 &lt;col:21&gt; 'int' 20</span><br><span class="line">    | |-CompoundStmt <span class="number">0x7fa0c0075da0</span> &lt;col:<span class="number">25</span>, <span class="built_in">line</span>:<span class="number">7</span>:<span class="number">5</span>&gt;</span><br><span class="line">    | | `-CallExpr 0x7fa0c0075d40 &lt;line:6:9, col:35&gt; 'int'</span><br><span class="line">    | |   |-ImplicitCastExpr 0x7fa0c0075d28 &lt;col:9&gt; 'int (*)(const char *, ...)' &lt;FunctionToPointerDecay&gt;</span><br><span class="line">    | |   | `-DeclRefExpr 0x7fa0c0075c60 &lt;col:9&gt; 'int (const char *, ...)' Function 0x7fa0c00669f0 'printf' 'int (const char *, ...)'</span><br><span class="line">    | |   `-ImplicitCastExpr 0x7fa0c0075d88 &lt;col:16&gt; 'const char *' &lt;BitCast&gt;</span><br><span class="line">    | |     `-ImplicitCastExpr 0x7fa0c0075d70 &lt;col:16&gt; 'char *' &lt;ArrayToPointerDecay&gt;</span><br><span class="line">    | |       `-StringLiteral 0x7fa0c0075cc8 &lt;col:16&gt; 'char [17]' lvalue "Hello old man!\\n"</span><br><span class="line">    | `-CompoundStmt <span class="number">0x7fa0c0078ef0</span> &lt;<span class="built_in">line</span>:<span class="number">8</span>:<span class="number">9</span>, <span class="built_in">line</span>:<span class="number">10</span>:<span class="number">5</span>&gt;</span><br><span class="line">    |   `-CallExpr 0x7fa0c0078e90 &lt;line:9:9, col:37&gt; 'int'</span><br><span class="line">    |     |-ImplicitCastExpr 0x7fa0c0078e78 &lt;col:9&gt; 'int (*)(const char *, ...)' &lt;FunctionToPointerDecay&gt;</span><br><span class="line">    |     | `-DeclRefExpr 0x7fa0c0075db8 &lt;col:9&gt; 'int (const char *, ...)' Function 0x7fa0c00669f0 'printf' 'int (const char *, ...)'</span><br><span class="line">    |     `-ImplicitCastExpr 0x7fa0c0078ed8 &lt;col:16&gt; 'const char *' &lt;BitCast&gt;</span><br><span class="line">    |       `-ImplicitCastExpr 0x7fa0c0078ec0 &lt;col:16&gt; 'char *' &lt;ArrayToPointerDecay&gt;</span><br><span class="line">    |         `-StringLiteral 0x7fa0c0078e38 &lt;col:16&gt; 'char [19]' lvalue "Hello young man!\\n"</span><br><span class="line">    `-ReturnStmt <span class="number">0x7fa0c0078f60</span> &lt;<span class="built_in">line</span>:<span class="number">11</span>:<span class="number">5</span>, col:<span class="number">12</span>&gt;</span><br><span class="line">      `-IntegerLiteral 0x7fa0c0078f40 &lt;col:12&gt; 'int' 0</span><br></pre></td></tr></table></figure>

<p>如果你觉得这棵树还不够直观，可以参考我提供的<a href="https://resources.jointjs.com/demos/javascript-ast" target="_blank" rel="noopener">网址</a>，它能够生成 JavaScript 语言的 AST，并以更加直观的方式呈现。</p>
<p>在这个网址里输入一个可以计算的表达式，例如“2+3*5”，你会得到一棵类似下图的 AST。</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=7dba666e-6d0e-4aa7-843a-7ae8ed4a33d5&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:TPOuF2yFJRiRo8iMBsfbGW6YC4Q&expireAt=1592274054592&policy=eyJkZW50cnlJZCI6IjdkYmE2NjZlLTZkMGUtNGFhNy04NDNhLTdhZThlZDRhMzNkNSIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="2+3*5"></p>
<p>在网页上显示为：<img src="https://fz-cs.101.com/v0.1/download?dentryId=13d54b47-80de-458a-b9ef-5bf058fa0428&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:aiQZA61FGvtdXzihn47g7jeII2w&expireAt=1592273968647&policy=eyJkZW50cnlJZCI6IjEzZDU0YjQ3LTgwZGUtNDU4YS1iOWVmLTViZjA1OGZhMDQyOCIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt=""></p>
<p><strong>形成 AST 以后有什么好处呢？就是计算机很容易去处理。</strong>比如，针对表达式形成的这棵树，从根节点遍历整棵树就可以获得表达式的值。</p>
<p>如果再把循环语句、判断语句、赋值语句等节点加到 AST 上，并解释执行它，那么你实际上就实现了一个脚本语言。而执行脚本语言的过程，就是遍历 AST 的过程。</p>
<p><strong>好了，你已经知道了 AST 的作用，那么怎样写程序构造它呢？</strong></p>
<p>一种非常直观的构造思路是自上而下进行分析。首先构造根节点，代表整个程序，之后向下扫描 Token 串，构建它的子节点。当它看到一个 int 类型的 Token 时，知道这儿遇到了一个变量声明语句，于是建立一个“变量声明”节点；接着遇到 age，建立一个子节点，这是第一个变量；之后遇到 =，意味着这个变量有初始化值，那么建立一个初始化的子节点；最后，遇到“字面量”，其值是 45。</p>
<p>这样，一棵子树就扫描完毕了。程序退回到根节点，开始构建根节点的第二个子节点。这样递归地扫描，直到构建起一棵完整的树。</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=f5ddff3c-d70d-46af-9277-ff9cf1004ae1&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:eX8wD-QNJdczlooQ9BHXebpW4tw&expireAt=1592274127843&policy=eyJkZW50cnlJZCI6ImY1ZGRmZjNjLWQ3MGQtNDZhZi05Mjc3LWZmOWNmMTAwNGFlMSIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="完整的树"></p>
<p>这个算法就是非常常用的递归下降算法（Recursive Descent Parsing）。</p>
<p>递归下降算法是一种自顶向下的算法，与之对应的，还有自底向上的算法。这个算法会先将最下面的叶子节点识别出来，然后再组装上一级节点。有点儿像搭积木，我们总是先构造出小的单元，然后再组装成更大的单元。原理就是这么简单。</p>
<p>练习一：</p>
<p>我们在<a href="https://resources.jointjs.com/demos/javascript-ast" target="_blank" rel="noopener">ast网站</a>输入</p>
<p><img src="https://cdncs.101.com/v0.1/download?dentryId=c843c5ff-8ca5-498f-8a67-8d8f19978924&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:iM-0l35wM7kHtHz-eZWPL1mjp9s&expireAt=1592214742218&policy=eyJkZW50cnlJZCI6ImM4NDNjNWZmLThjYTUtNDk4Zi04YTY3LThkOGYxOTk3ODkyNCIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="ab3"></p>
<p>生成的图片为：<img src="https://cdncs.101.com/v0.1/download?dentryId=c1fa3472-786b-4fcd-b949-385989e2fff3&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:PZZgKjzbS91UfWsnVJG0HwB4Knw&expireAt=1592215188531&policy=eyJkZW50cnlJZCI6ImMxZmEzNDcyLTc4NmItNGZjZC1iOTQ5LTM4NTk4OWUyZmZmMyIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="asl"></p>
<p>类似的，题目要求为终端输入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = b+<span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>输出为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IntDeclaration a</span><br><span class="line">	Additive +</span><br><span class="line">		Identifier b</span><br><span class="line">		IntLiteral <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h2 id="解析："><a href="#解析：" class="headerlink" title="解析："></a>解析：</h2><ol>
<li>首先导入之前的代码</li>
<li>增加ASTNodeType，ASTNode类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AST节点的类型。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> ASTNodeType&#123;</span><br><span class="line">    Programm,           <span class="comment">//程序入口，根节点</span></span><br><span class="line"></span><br><span class="line">    IntDeclaration,     <span class="comment">//整型变量声明</span></span><br><span class="line">    ExpressionStmt,     <span class="comment">//表达式语句，即表达式后面跟个分号</span></span><br><span class="line">    AssignmentStmt,     <span class="comment">//赋值语句</span></span><br><span class="line"></span><br><span class="line">    Primary,            <span class="comment">//基础表达式</span></span><br><span class="line">    Multiplicative,     <span class="comment">//乘法表达式</span></span><br><span class="line">    Additive,           <span class="comment">//加法表达式</span></span><br><span class="line"></span><br><span class="line">    Identifier,         <span class="comment">//标识符</span></span><br><span class="line">    IntLiteral          <span class="comment">//整型字面量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AST的节点。</span></span><br><span class="line"><span class="comment"> * 属性包括AST的类型、文本值、下级子节点和父节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ASTNode</span></span>&#123;</span><br><span class="line">    <span class="comment">//父节点</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ASTNode <span class="title">getParent</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//子节点</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;ASTNode&gt; <span class="title">getChildren</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//AST类型</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ASTNodeType <span class="title">getType</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//文本值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getText</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>SimpleCalculator类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleCalculator</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SimpleCalculator calculator = <span class="keyword">new</span> SimpleCalculator();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//测试变量声明语句的解析</span></span><br><span class="line">        String script = <span class="string">"int a = b+3;"</span>;</span><br><span class="line">        System.out.println(<span class="string">"解析变量声明语句: "</span> + script);</span><br><span class="line">        SimpleLexer lexer = <span class="keyword">new</span> SimpleLexer();</span><br><span class="line">        TokenReader tokens = lexer.tokenize(script);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            SimpleASTNode node = calculator.intDeclare(tokens);</span><br><span class="line">            calculator.dumpAST(node,<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	 <span class="function"><span class="keyword">private</span> SimpleASTNode <span class="title">intDeclare</span><span class="params">(TokenReader tokens)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">	        SimpleASTNode node = <span class="keyword">null</span>;</span><br><span class="line">	        Token token = tokens.peek();    <span class="comment">//预读</span></span><br><span class="line">	        <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.Int) &#123;   <span class="comment">//匹配Int</span></span><br><span class="line">	            token = tokens.read();      <span class="comment">//消耗掉int</span></span><br><span class="line">	            <span class="keyword">if</span> (tokens.peek().getType() == TokenType.Identifier) &#123; <span class="comment">//匹配标识符</span></span><br><span class="line">	                token = tokens.read();  <span class="comment">//消耗掉标识符</span></span><br><span class="line">	                <span class="comment">//创建当前节点，并把变量名记到AST节点的文本值中，这里新建一个变量子节点也是可以的</span></span><br><span class="line">	                node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.IntDeclaration, token.getText());</span><br><span class="line">	                token = tokens.peek();  <span class="comment">//预读</span></span><br><span class="line">	                <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.Assignment) &#123;</span><br><span class="line">	                    tokens.read();      <span class="comment">//消耗掉等号</span></span><br><span class="line">	                    SimpleASTNode child = additive(tokens);  <span class="comment">//匹配一个表达式</span></span><br><span class="line">	                    <span class="keyword">if</span> (child == <span class="keyword">null</span>) &#123;</span><br><span class="line">	                        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"invalide variable initialization, expecting an expression"</span>);</span><br><span class="line">	                    &#125;</span><br><span class="line">	                    <span class="keyword">else</span>&#123;</span><br><span class="line">	                        node.addChild(child);</span><br><span class="line">	                    &#125;</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"variable name expected"</span>);</span><br><span class="line">	            &#125;</span><br><span class="line"></span><br><span class="line">	            <span class="keyword">if</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">	                token = tokens.peek();</span><br><span class="line">	                <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; token.getType() == TokenType.SemiColon) &#123;</span><br><span class="line">	                    tokens.read();</span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"invalid statement, expecting semicolon"</span>);</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	        <span class="keyword">return</span> node;</span><br><span class="line">	    &#125;</span><br><span class="line">	 </span><br><span class="line">	 </span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment">	     * 语法解析：加法表达式</span></span><br><span class="line"><span class="comment">	     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">	     */</span></span><br><span class="line">	    <span class="function"><span class="keyword">private</span> SimpleASTNode <span class="title">additive</span><span class="params">(TokenReader tokens)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">	    	SimpleASTNode child1 = primary(tokens);</span><br><span class="line">	        SimpleASTNode node = child1;</span><br><span class="line"></span><br><span class="line">	        Token token = tokens.peek();</span><br><span class="line">	        <span class="keyword">if</span> (child1 != <span class="keyword">null</span> &amp;&amp; token != <span class="keyword">null</span>) &#123;</span><br><span class="line">	            <span class="keyword">if</span> (token.getType() == TokenType.Plus) &#123;</span><br><span class="line">	                token = tokens.read();</span><br><span class="line">	                SimpleASTNode child2 = primary(tokens);</span><br><span class="line">	                <span class="keyword">if</span> (child2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">	                    node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.Additive, token.getText());</span><br><span class="line">	                    node.addChild(child1);</span><br><span class="line">	                    node.addChild(child2);</span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"invalid multiplicative expression, expecting the right part."</span>);</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	        <span class="keyword">return</span> node;</span><br><span class="line">	    &#125;</span><br><span class="line">	    </span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment">	     * 语法解析：基础表达式</span></span><br><span class="line"><span class="comment">	     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">	     */</span></span><br><span class="line">	    <span class="function"><span class="keyword">private</span> SimpleASTNode <span class="title">primary</span><span class="params">(TokenReader tokens)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">	        SimpleASTNode node = <span class="keyword">null</span>;</span><br><span class="line">	        Token token = tokens.peek();</span><br><span class="line">	        <span class="keyword">if</span> (token != <span class="keyword">null</span>) &#123;</span><br><span class="line">	            <span class="keyword">if</span> (token.getType() == TokenType.IntLiteral) &#123;</span><br><span class="line">	                token = tokens.read();</span><br><span class="line">	                node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.IntLiteral, token.getText());</span><br><span class="line">	            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (token.getType() == TokenType.Identifier) &#123;</span><br><span class="line">	                token = tokens.read();</span><br><span class="line">	                node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.Identifier, token.getText());</span><br><span class="line">	            &#125; </span><br><span class="line">	        &#125;</span><br><span class="line">	        <span class="keyword">return</span> node;  <span class="comment">//这个方法也做了AST的简化，就是不用构造一个primary节点，直接返回子节点。因为它只有一个子节点。</span></span><br><span class="line">	    &#125;</span><br><span class="line">	    </span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 一个简单的AST节点的实现。</span></span><br><span class="line"><span class="comment">     * 属性包括：类型、文本值、父节点、子节点。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleASTNode</span> <span class="keyword">implements</span> <span class="title">ASTNode</span> </span>&#123;</span><br><span class="line">        SimpleASTNode parent = <span class="keyword">null</span>;</span><br><span class="line">        List&lt;ASTNode&gt; children = <span class="keyword">new</span> ArrayList&lt;ASTNode&gt;();</span><br><span class="line">        List&lt;ASTNode&gt; readonlyChildren = Collections.unmodifiableList(children);</span><br><span class="line">        ASTNodeType nodeType = <span class="keyword">null</span>;</span><br><span class="line">        String text = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SimpleASTNode</span><span class="params">(ASTNodeType nodeType, String text)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.nodeType = nodeType;</span><br><span class="line">            <span class="keyword">this</span>.text = text;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> ASTNode <span class="title">getParent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> parent;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> List&lt;ASTNode&gt; <span class="title">getChildren</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> readonlyChildren;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> ASTNodeType <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> nodeType;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getText</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> text;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addChild</span><span class="params">(SimpleASTNode child)</span> </span>&#123;</span><br><span class="line">            children.add(child);</span><br><span class="line">            child.parent = <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dumpAST</span><span class="params">(ASTNode node, String indent)</span> </span>&#123;</span><br><span class="line">        System.out.println(indent + node.getType() + <span class="string">" "</span> + node.getText());</span><br><span class="line">        <span class="keyword">for</span> (ASTNode child : node.getChildren()) &#123;</span><br><span class="line">            dumpAST(child, indent + <span class="string">"\t"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="4">
<li><p>运行输出为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">解析变量声明语句: int a &#x3D; b+3;</span><br><span class="line">IntDeclaration a</span><br><span class="line">	Additive +</span><br><span class="line">		Identifier b</span><br><span class="line">		IntLiteral 3</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/xuejh/complicationBook/tree/master/03/%E7%BB%83%E4%B9%A0%E4%B8%80" target="_blank" rel="noopener">完整代码</a></p>
</li>
</ol>
<h1 id="练习二"><a href="#练习二" class="headerlink" title="练习二"></a>练习二</h1><p>类似的，题目要求为终端输入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = b+<span class="number">3</span>+c+<span class="number">5</span>+<span class="number">6</span>;</span><br></pre></td></tr></table></figure>

<p>输出为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">解析变量声明语句: <span class="keyword">int</span> a = b+<span class="number">3</span>+c+<span class="number">5</span>+<span class="number">6</span>;</span><br><span class="line">IntDeclaration a</span><br><span class="line">	Additive +</span><br><span class="line">		Identifier b</span><br><span class="line">		Additive +</span><br><span class="line">			IntLiteral <span class="number">3</span></span><br><span class="line">			Additive +</span><br><span class="line">				Identifier c</span><br><span class="line">				Additive +</span><br><span class="line">					IntLiteral <span class="number">5</span></span><br><span class="line">					IntLiteral <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>代码为<a href="https://github.com/xuejh/complicationBook/tree/master/03/%E7%BB%83%E4%B9%A0%E4%BA%8C" target="_blank" rel="noopener">练习二</a></p>
<p>但是上面代码存在一个问题，结合性错了，左结合性变成右结合性了。</p>
<h1 id="练习三"><a href="#练习三" class="headerlink" title="练习三"></a>练习三</h1><p>类似的，题目要求为终端输入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>+<span class="number">3</span>*<span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>输出为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">计算: <span class="number">2</span>+<span class="number">3</span>*<span class="number">5</span>，看上去一切正常。</span><br><span class="line">Programm Calculator</span><br><span class="line">	Additive +</span><br><span class="line">		IntLiteral <span class="number">2</span></span><br><span class="line">		Multiplicative *</span><br><span class="line">			IntLiteral <span class="number">3</span></span><br><span class="line">			IntLiteral <span class="number">5</span></span><br><span class="line">Calculating: Programm</span><br><span class="line">	Calculating: Additive</span><br><span class="line">		Calculating: IntLiteral</span><br><span class="line">		Result: <span class="number">2</span></span><br><span class="line">		Calculating: Multiplicative</span><br><span class="line">			Calculating: IntLiteral</span><br><span class="line">			Result: <span class="number">3</span></span><br><span class="line">			Calculating: IntLiteral</span><br><span class="line">			Result: <span class="number">5</span></span><br><span class="line">		Result: <span class="number">15</span></span><br><span class="line">	Result: <span class="number">17</span></span><br><span class="line">Result: <span class="number">17</span></span><br></pre></td></tr></table></figure>

<p>完整代码详见<a href="https://github.com/xuejh/complicationBook/tree/master/03/%E7%BB%83%E4%B9%A0%E4%B8%89" target="_blank" rel="noopener">练习三</a></p>
<h1 id="上下文无关文法"><a href="#上下文无关文法" class="headerlink" title="上下文无关文法"></a>上下文无关文法</h1><p>我们解析算术表达式的时候，会遇到更复杂的情况，这时，正则文法不够用，我们必须用上下文无关文法来表达。</p>
<p>比如我们在计算2+3*5时，实际上用了两级：第一级时加法规则，第二级是乘法规则。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">additiveExpression</span><br><span class="line">    :   multiplicativeExpression</span><br><span class="line">    |   additiveExpression Plus multiplicativeExpression</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">multiplicativeExpression</span><br><span class="line">    :   IntLiteral</span><br><span class="line">    |   multiplicativeExpression Star IntLiteral</span><br><span class="line">    ;</span><br></pre></td></tr></table></figure>

<p>比如计算“2+3*5” 的推导过程：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--&gt;additiveExpression + multiplicativeExpression</span><br><span class="line">--&gt;multiplicativeExpression + multiplicativeExpression</span><br><span class="line">--&gt;IntLiteral + multiplicativeExpression</span><br><span class="line">--&gt;IntLiteral + multiplicativeExpression * IntLiteral </span><br><span class="line">--&gt;IntLiteral + IntLiteral * IntLiteral</span><br></pre></td></tr></table></figure>

<p>这种文法已经没有办法改写成正则文法了，它比正则文法的表达能力更强，叫做“上下文无关文法”。正则文法是上下文无关文法的一个子集。它们的区别呢，就是上下文无关文法允许递归调用，而正则文法不允许。</p>
<p>上下文无关的意思是，无论在任何情况下，文法的推导规则都是一样的。比如，在变量声明语句中可能要用到一个算术表达式来做变量初始化，而在其他地方可能也会用到算术表达式。不管在什么地方，算术表达式的语法都一样，都允许用加法和乘法，计算优先级也不变。好在你见到的大多数计算机语言，都能用上下文无关文法来表达它的语法。</p>
<h2 id="解析算术表达式：理解“递归”的含义"><a href="#解析算术表达式：理解“递归”的含义" class="headerlink" title="解析算术表达式：理解“递归”的含义"></a>解析算术表达式：理解“递归”的含义</h2><p>比如我们为了简化去掉乘法的层次：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">additiveExpression</span><br><span class="line">    :   IntLiteral</span><br><span class="line">    |   additiveExpression Plus IntLiteral</span><br><span class="line">    ;</span><br></pre></td></tr></table></figure>

<p>在解析 “2 + 3”这样一个最简单的加法表达式的时候，我们直观地将其翻译成算法，结果出现了如下的情况：</p>
<ul>
<li>首先匹配是不是整型字面量，发现不是；</li>
<li>然后匹配是不是加法表达式，这里是递归调用；</li>
<li>会重复上面两步，无穷无尽。</li>
</ul>
<p>“additiveExpression Plus multiplicativeExpression”这个文法规则的第一部分就递归地引用了自身，这种情况叫做左递归。通过上面的分析，我们知道左递归是递归下降算法无法处理的，这是递归下降算法最大的问题。</p>
<p>怎么解决呢？把“additiveExpression”调换到加号后面怎么样？我们来试一试。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">additiveExpression</span><br><span class="line">    :   multiplicativeExpression</span><br><span class="line">    |   multiplicativeExpression Plus additiveExpression</span><br><span class="line">    ;</span><br></pre></td></tr></table></figure>

<p>我们接着改写成算法，这个算法确实不会出现无限调用的问题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> SimpleASTNode <span class="title">additive</span><span class="params">(TokenReader tokens)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    SimpleASTNode child1 = multiplicative();  <span class="comment">//计算第一个子节点</span></span><br><span class="line">    SimpleASTNode node = child1;  <span class="comment">//如果没有第二个子节点，就返回这个</span></span><br><span class="line">    Token token = tokens.peek();</span><br><span class="line">    <span class="keyword">if</span> (child1 != <span class="keyword">null</span> &amp;&amp; token != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (token.getType() == TokenType.Plus) &#123;</span><br><span class="line">            token = tokens.read();</span><br><span class="line">            SimpleASTNode child2 = additive(); <span class="comment">//递归地解析第二个节点</span></span><br><span class="line">            <span class="keyword">if</span> (child2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">                node = <span class="keyword">new</span> SimpleASTNode(ASTNodeType.AdditiveExp, token.getText());</span><br><span class="line">                node.addChild(child1);</span><br><span class="line">                node.addChild(child2);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"invalid additive expression, expecting the right part."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为了便于你理解，我解读一下上面的算法：</p>
<p>我们先尝试能否匹配乘法表达式，如果不能，那么这个节点肯定不是加法节点，因为加法表达式的两个产生式都必须首先匹配乘法表达式。遇到这种情况，返回 null 就可以了，调用者就这次匹配没有成功。如果乘法表达式匹配成功，那就再尝试匹配加号右边的部分，也就是去递归地匹配加法表达式。如果匹配成功，就构造一个加法的 ASTNode 返回。</p>
<p>同样的，乘法的文法规则也可以做类似的改写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">multiplicativeExpression</span><br><span class="line">    :   IntLiteral</span><br><span class="line">    |   IntLiteral Star multiplicativeExpression</span><br><span class="line">    ;</span><br></pre></td></tr></table></figure>

<p>现在我们貌似解决了左递归问题，运行这个算法解析 “2+3*5”，得到下面的 AST：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Programm Calculator</span><br><span class="line">    AdditiveExp +</span><br><span class="line">        IntLiteral <span class="number">2</span></span><br><span class="line">        MulticativeExp *</span><br><span class="line">            IntLiteral <span class="number">3</span></span><br><span class="line">            IntLiteral <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>是不是看上去一切正常？可如果让这个程序解析“2+3+4”呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Programm Calculator</span><br><span class="line">    AdditiveExp +</span><br><span class="line">        IntLiteral <span class="number">2</span></span><br><span class="line">        AdditiveExp +</span><br><span class="line">            IntLiteral <span class="number">3</span></span><br><span class="line">            IntLiteral <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>问题是什么呢？计算顺序发生错误了。连续相加的表达式要从左向右计算，这是加法运算的结合性规则。但按照我们生成的 AST，变成从右向左了，先计算了“3+4”，然后才跟“2”相加。这可不行！</p>
<p>为什么产生上面的问题呢？是因为我们修改了文法，把文法中加号左右两边的部分调换了一下。造成的影响是什么呢？你可以推导一下“2+3+4”的解析过程：</p>
<ul>
<li>首先调用乘法表达式匹配函数 multiplicative()，成功，返回了一个字面量节点 2。</li>
<li>接着看看右边是否能递归地匹配加法表达式。</li>
<li>匹配的结果，真的返回了一个加法表达式“3+4”，这个变成了第二个子节点。错误就出在这里了。这样的匹配顺序，“3+4”一定会成为子节点，在求值时被优先计算。</li>
</ul>
<p>所以，我们前面的方法其实并没有完美地解决左递归，因为它改变了加法运算的结合性规则。那么，我们能否既解决左递归问题，又不产生计算顺序的错误呢？答案是肯定的。不过我们下一讲再来解决它。目前先忍耐一下，凑合着用这个“半吊子”的算法吧。</p>
<h2 id="实现表达式求值"><a href="#实现表达式求值" class="headerlink" title="实现表达式求值"></a>实现表达式求值</h2><p>深度优先的遍历也是一个递归算法。以上文中“2 + 3 * 5”的 AST 为例看一下。</p>
<ul>
<li>对表达式的求值，等价于对 AST 根节点求值。</li>
<li>首先求左边子节点，算出是 2。</li>
<li>接着对右边子节点求值，这时候需要递归计算下一层。计算完了以后，返回是 15（3*5）。</li>
<li>把左右节点相加，计算出根节点的值 17。</li>
</ul>
<p>代码参见 SimpleCalculator.Java 中的 evaluate() 方法。还是以“2+3*5”为例。它的求值过程输出如下，你可以看到求值过程中遍历了整棵树：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Calculating: AdditiveExp          <span class="comment">//计算根节点</span></span><br><span class="line">      Calculating: IntLiteral      <span class="comment">//计算第一个子节点</span></span><br><span class="line">      Result: <span class="number">2</span>                     <span class="comment">//结果是2</span></span><br><span class="line">      Calculating: MulticativeExp   <span class="comment">//递归计算第二个子节点</span></span><br><span class="line">          Calculating: IntLiteral</span><br><span class="line">          Result: <span class="number">3</span></span><br><span class="line">          Calculating: IntLiteral</span><br><span class="line">          Result: <span class="number">5</span></span><br><span class="line">      Result: <span class="number">15</span>                <span class="comment">//忽略递归的细节，得到结果是15</span></span><br><span class="line">  Result: <span class="number">17</span>                    <span class="comment">//根节点的值是17</span></span><br></pre></td></tr></table></figure>



<p>完整代码详见<a href="https://github.com/xuejh/complicationBook/tree/master/03/%E7%BB%83%E4%B9%A0%E5%9B%9B" target="_blank" rel="noopener">练习四</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/12/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%80%EF%BC%89/" data-id="ckblm6dcr000v71z70oudcq57" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/词法分析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/10/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90/" class="article-date">
  <time datetime="2020-06-10T12:57:53.000Z" itemprop="datePublished">2020-06-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/10/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90/">词法分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="词法分析（Lexical-Analysis）"><a href="#词法分析（Lexical-Analysis）" class="headerlink" title="词法分析（Lexical Analysis）"></a>词法分析（Lexical Analysis）</h1><p>通常编译器的第一项工作叫做词法分析。一篇文章是由一个个的单词组成。程序处理也一样，只不过这里不叫单词，而是叫做“词法记号”，英文叫Token。</p>
<p>如下代码，如果我们要读懂它，首先要怎么做呢？</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> age = <span class="number">45</span>;</span><br><span class="line">    <span class="keyword">if</span> (age &gt;= <span class="number">17</span>+<span class="number">8</span>+<span class="number">20</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Hello old man!\\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Hello young man!\\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>首先我们需要识别出if，else，int这样的关键字，main、printf、age这样的标识符，+、-、=这样的操作符号，还有花括号，圆括号，分号这样的符号，以及数字字面量、字符串字面量等，这些都是Token。</p>
<p>那么，如何写一个程序来识别Token呢？可以看到，英文内容中通常用空格和标点把单词分开，方便读者阅读和理解。但在计算机程序中，仅仅用空格和标点分割是不行的。比如“age&gt;=45”应该分成“age””&gt;=“”45”这三个Token，但在代码中它们可以是连在一起的，中间不得非用空格。</p>
<p>其实，我们可以通过制定一些规则来区分每个不同的Token，我举几个例子，你可以看一下。</p>
<p><strong>识别age这样的标识符。</strong>它以字母开头，后面可以是字母或数字，直到遇到第一个既不是字母又不是数字的字符时结束。</p>
<p><strong>识别&gt;=这样的操作符。</strong>当扫描到一个&gt;字符的时候，就要注意，它可能是一个GT（Greater Than，大于）操作符。但由于GE（Greater Equal，大于等于）也是以&gt;开头的，所以再往下再看一位，如果是=，那么这个Token就是GE，否则就是GT。</p>
<p><strong>识别45这样的数字字面量。</strong>当扫描到一个数字字符的时候，就开始把它看做数字，直到遇到非数字的字符。</p>
<p>这些规则规则可以通过手写程序来实现的。当然也可以借助词法分析器的生成工具生成，比如Lex。这些生成工具是基于一些规则来工作的，这些规则用”正则文法“表达，符合正则文法的表达式称为”正则表达式“。生成工具可以读入正则表达式，生成一种”有限自动机“的算法，来完成具体的词法分析工作。</p>
<p><strong>正则文法（Regular Grammar）</strong>是一种最普通、最常见的规则，写正则表达式的时候用的就是正则文法。</p>
<p><strong>有限自动机（Finite-state Automaton，FSA，or Finite Automaton）</strong>是有限个状态的自动机器。我们可以拿抽水马桶举例，它分为两个状态：“注水”和“水满”。摁下冲马桶的按钮，它转到“注水”的状态，而浮球上升到一定高度，就会把注水阀门关闭，它转到“水满”状态。</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=61da3455-20b9-44f6-9733-23e83399a43d&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:B5zCPijUHG8pag9UHtaXtmVtIdM&expireAt=1592273622969&policy=eyJkZW50cnlJZCI6IjYxZGEzNDU1LTIwYjktNDRmNi05NzMzLTIzZTgzMzk5YTQzZCIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="注水"></p>
<p>词法分析器也是一样，它分析整个程序的字符串，当遇到不同的字符时，会驱使它迁移到不同的状态。例如，词法分析程序在扫描 age 的时候，处于“标识符”状态，等它遇到一个 &gt; 符号，就切换到“比较操作符”的状态。词法分析过程，就是这样一个个状态迁移的过程。</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=1ffeb36b-b606-4f26-b934-112e612cc0a3&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:KMI0lJTwA7GrqwvSWnMMEcAr7_c&expireAt=1592273670363&policy=eyJkZW50cnlJZCI6IjFmZmViMzZiLWI2MDYtNGYyNi1iOTM0LTExMmU2MTJjYzBhMyIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="状态迁移"></p>
<h1 id="代码编写"><a href="#代码编写" class="headerlink" title="代码编写"></a>代码编写</h1><p>接下来就用代码来识别出Token</p>
<h2 id="练习一"><a href="#练习一" class="headerlink" title="练习一"></a>练习一</h2><p>有如下代码age &gt;= 45，识别出Token。比如：代码为age &gt;= 45，最后输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Identifier  age</span><br><span class="line"></span><br><span class="line">GE          &gt;&#x3D; </span><br><span class="line"></span><br><span class="line">IntLiteral   45</span><br></pre></td></tr></table></figure>



<p>上面的每一行<code>Identifier  age</code>代表一个Token，Identifier表示Token的类型，age代表Token的文本值。</p>
<p>代码如下：首先定义TokenType枚举类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TokenType &#123;</span><br><span class="line">	</span><br><span class="line">	    GE,     <span class="comment">// &gt;=</span></span><br><span class="line">	    GT,     <span class="comment">// &gt;</span></span><br><span class="line">	    Identifier,     <span class="comment">//标识符</span></span><br><span class="line">	    IntLiteral,     <span class="comment">//整型字面量</span></span><br><span class="line">	   	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义Token类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Token</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//Token类型</span></span><br><span class="line">    TokenType type = <span class="keyword">null</span>;</span><br><span class="line">   <span class="comment">//文本值</span></span><br><span class="line">    String text = <span class="keyword">null</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义输出类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">main</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">	System.out.println(<span class="string">"\n开始："</span>);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其次我们需要用到有限自动机的知识，如下图所示：</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=7d8587fa-e93b-426b-adaa-296289a74d5d&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:AzyIzz352Zl0-1uArJmNrJf2tBY&expireAt=1592273749214&policy=eyJkZW50cnlJZCI6IjdkODU4N2ZhLWU5M2ItNDI2Yi1hZGFhLTI5NjI4OWE3NGQ1ZCIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="有限自动机"></p>
<ol>
<li><strong>初始状态：</strong>刚开始启动词法分析的时候，程序所处的状态。</li>
<li><strong>标识符状态：</strong>在初始状态时，当第一个字符是字母的时候，迁移到状态2。当后续字符是字母和数字时，保留在状态2.如果不是，就离开状态2，写下该Token，回到初始状态。</li>
<li><strong>大于操作符（GT）：</strong>在初始状态时，当第一个字符是&gt;时，进入这个状态。它是比较操作符的一个情况。</li>
<li><strong>大于等于操作符（GE）：</strong>如果状态 3 的下一个字符是 =，就进入状态 4，变成 &gt;=。它也是比较操作符的一种情况。</li>
<li><strong>数字字面量：</strong>在初始状态时，下一个字符是数字，进入这个状态。如果后续仍是数字，就保持在状态 5。</li>
</ol>
<p>把上面的分析翻译成程序为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> DfaState &#123;</span><br><span class="line">	Initial, <span class="comment">//初始状态</span></span><br><span class="line"></span><br><span class="line">     Id,  <span class="comment">//标识符状态</span></span><br><span class="line"></span><br><span class="line">     GT,<span class="comment">// &gt;</span></span><br><span class="line">     GE,<span class="comment">// &gt;=</span></span><br><span class="line">    IntLiteral <span class="comment">//数字字面量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.CharArrayReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lexer</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> StringBuffer tokenText = <span class="keyword">null</span>; <span class="comment">//临时存储tokenText</span></span><br><span class="line">	<span class="keyword">private</span> List&lt;Token&gt; tokens = <span class="keyword">null</span>; <span class="comment">//Token数组</span></span><br><span class="line">	<span class="keyword">private</span> Token token = <span class="keyword">null</span>; <span class="comment">//临时token</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//切换有限自动机</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> DfaState <span class="title">initToken</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">if</span> (tokenText.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">	        token.text = tokenText.toString();</span><br><span class="line">	        tokens.add(token);</span><br><span class="line"></span><br><span class="line">	        tokenText = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">	        token = <span class="keyword">new</span> Token();</span><br><span class="line">	    &#125;</span><br><span class="line"></span><br><span class="line">	    DfaState newState = DfaState.Initial;</span><br><span class="line">	    <span class="keyword">if</span> (isAlpha(ch)) &#123;              <span class="comment">//第一个字符是字母</span></span><br><span class="line">	    	</span><br><span class="line">	    	newState = DfaState.Id; <span class="comment">//进入Id状态</span></span><br><span class="line">	        token.type = TokenType.Identifier;</span><br><span class="line">	        tokenText.append(ch);</span><br><span class="line">	        </span><br><span class="line">	    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isDigit(ch)) &#123;       <span class="comment">//第一个字符是数字</span></span><br><span class="line">	        newState = DfaState.IntLiteral;</span><br><span class="line">	        token.type = TokenType.IntLiteral;</span><br><span class="line">	        tokenText.append(ch);</span><br><span class="line">	    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'&gt;'</span>) &#123;         <span class="comment">//第一个字符是&gt;</span></span><br><span class="line">	        newState = DfaState.GT;</span><br><span class="line">	        token.type = TokenType.GT;</span><br><span class="line">	        tokenText.append(ch);</span><br><span class="line">	    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">	        newState = DfaState.Initial; <span class="comment">// skip all unknown patterns</span></span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="keyword">return</span> newState;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//解析脚本</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">parseScript</span><span class="params">(String code)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//初始化数据</span></span><br><span class="line">		tokens = <span class="keyword">new</span> ArrayList&lt;Token&gt;();</span><br><span class="line">	    CharArrayReader reader = <span class="keyword">new</span> CharArrayReader(code.toCharArray());</span><br><span class="line">	    tokenText = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">	    token = <span class="keyword">new</span> Token();</span><br><span class="line">	    <span class="keyword">int</span> ich = <span class="number">0</span>;</span><br><span class="line">	    <span class="keyword">char</span> ch = <span class="number">0</span>;</span><br><span class="line">	    </span><br><span class="line">	    DfaState state = DfaState.Initial;</span><br><span class="line">	    <span class="keyword">try</span> &#123;</span><br><span class="line">	    	<span class="keyword">while</span> ((ich = reader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">	    		ch = (<span class="keyword">char</span>) ich;</span><br><span class="line">	    		<span class="keyword">switch</span> (state) &#123;</span><br><span class="line">	    		<span class="keyword">case</span> Initial:&#123;</span><br><span class="line">	    			state = initToken(ch);          <span class="comment">//重新确定后续状态</span></span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		&#125;</span><br><span class="line">	    		<span class="keyword">case</span> Id:</span><br><span class="line">	                <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> GT:</span><br><span class="line">	                <span class="keyword">if</span> (ch == <span class="string">'='</span>) &#123;</span><br><span class="line">	                    token.type = TokenType.GE;  <span class="comment">//转换成GE</span></span><br><span class="line">	                    state = DfaState.GE;</span><br><span class="line">	                    tokenText.append(ch);</span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出GT状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> GE:</span><br><span class="line">	    			state = initToken(ch);      <span class="comment">//退出GE状态，并保存Token</span></span><br><span class="line">	    			<span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> IntLiteral:</span><br><span class="line">	                <span class="keyword">if</span> (isDigit(ch)) &#123;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//继续保持在数字字面量状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出当前状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		&#125;</span><br><span class="line">	    		  </span><br><span class="line">	        &#125;</span><br><span class="line">	    	</span><br><span class="line">	    	<span class="comment">// 把最后一个token送进去</span></span><br><span class="line">            <span class="keyword">if</span> (tokenText.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                initToken(ch);</span><br><span class="line">            &#125;</span><br><span class="line">	    &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">	        e.printStackTrace();</span><br><span class="line">	    &#125;</span><br><span class="line">	    </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//是否是字母</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">boolean</span> <span class="title">isAlpha</span><span class="params">(<span class="keyword">int</span> ch)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> ch &gt;= <span class="string">'a'</span> &amp;&amp; ch &lt;= <span class="string">'z'</span> || ch &gt;= <span class="string">'A'</span> &amp;&amp; ch &lt;= <span class="string">'Z'</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//是否是数字</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">boolean</span> <span class="title">isDigit</span><span class="params">(<span class="keyword">int</span> ch)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//是否是空白字符</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">boolean</span> <span class="title">isBlank</span><span class="params">(<span class="keyword">int</span> ch)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> ch == <span class="string">' '</span> || ch == <span class="string">'\t'</span> || ch == <span class="string">'\n'</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 打印所有的Token</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> tokenReader</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">dump</span><span class="params">()</span></span>&#123;</span><br><span class="line">	    Token token = <span class="keyword">null</span>;</span><br><span class="line">	    <span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line">	    <span class="keyword">while</span> (pos &lt; tokens.size())&#123;</span><br><span class="line">	    	token= tokens.get(pos);</span><br><span class="line">	        System.out.println(token.type+<span class="string">"\t"</span>+token.text);</span><br><span class="line">	        pos ++;</span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.CharArrayReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">main</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">	System.out.println(<span class="string">"\n开始："</span>);</span><br><span class="line">	String script = <span class="string">"age &gt;= 45"</span>;</span><br><span class="line">	</span><br><span class="line">	Lexer lexer = <span class="keyword">new</span> Lexer();</span><br><span class="line">	lexer.parseScript(script);</span><br><span class="line">	lexer.dump();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/xuejh/complicationBook/tree/master/02/java/age%3E%3D45" target="_blank" rel="noopener">练习一代码</a></p>
<h2 id="初始正则表达式"><a href="#初始正则表达式" class="headerlink" title="初始正则表达式"></a>初始正则表达式</h2><p>但是，这里存在一个问题。我们在描述词法规则时用了自然语言。比如，在描述标识符的规则时，我们是这样表达的：</p>
<p><strong>第一个字符必须时字母，后面的字符可以是字母或数字。</strong></p>
<p>这样描述规则并不精确，我们需要换一种严谨的表达方式，这种方式就是<strong>正则表达式</strong>。</p>
<p>上面的例子涉及了 4 种 Token，这 4 种 Token 用正则表达式表达，是下面的样子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Id :        [a-zA-Z_] ([a-zA-Z_] | [<span class="number">0</span>-<span class="number">9</span>])*</span><br><span class="line">IntLiteral: [<span class="number">0</span>-<span class="number">9</span>]+</span><br><span class="line">GT :        <span class="string">'&gt;'</span></span><br><span class="line">GE :        <span class="string">'&gt;='</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[] 表示匹配方括号中的字符之一</span><br><span class="line">[abc] 匹配a或b或c</span><br><span class="line">[a-z] 匹配从a到z的任何一个字符</span><br><span class="line">*     匹配<span class="number">0</span>个或者多个前面的元素</span><br><span class="line">+     匹配<span class="number">1</span>个或者多个前面的元素</span><br><span class="line"><span class="string">''</span>    严格匹配单引号里面的所有字符，如:<span class="string">'if'</span>或者<span class="string">'int'</span></span><br></pre></td></tr></table></figure>

<h2 id="练习二"><a href="#练习二" class="headerlink" title="练习二"></a>练习二</h2><p>有如下代码int age = 40，识别出Token。比如：代码为int age = 40，最后输出结果为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Int               <span class="keyword">int</span></span><br><span class="line">Identifier        age</span><br><span class="line">Assignment        =  </span><br><span class="line">IntLiteral        <span class="number">45</span></span><br></pre></td></tr></table></figure>

<h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><p>首先我们把涉及的词法规则转化为正则表达式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Int:        <span class="string">'int'</span></span><br><span class="line">Id :        [a-zA-Z_] ([a-zA-Z_] | [<span class="number">0</span>-<span class="number">9</span>])*</span><br><span class="line">Assignment : <span class="string">'='</span></span><br></pre></td></tr></table></figure>

<p>这时候，你可能会发现这样一个问题：int 这个关键字，与标识符很相似，都是以字母开头，后面跟着其他字母。</p>
<p>换句话说，int 这个字符串，既符合标识符的规则，又符合 int 这个关键字的规则，这两个规则发生了重叠。这样就起冲突了，我们扫描字符串的时候，到底该用哪个规则呢？</p>
<p>当然，我们心里知道，int 这个关键字的规则，比标识符的规则优先级高。普通的标识符是不允许跟这些关键字重名的。</p>
<h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><p>关键字是语言设计中作为语法要素的词汇，例如表示数据类型的 int、char，表示程序结构的 while、if，表述特殊数据取值的 null、NAN 等。</p>
<p>除了关键字，还有一些词汇叫保留字。保留字在当前的语言设计中还没用到，但是保留下来，因为将来会用到。我们命名自己的变量、类名称，不可以用到跟关键字和保留字相同的字符串。那么我们在词法分析器中，如何把关键字和保留字跟标识符区分开呢？</p>
<p>以“int age = 40”为例，我们把有限自动机修改成下面的样子，借此解决关键字和标识符的冲突。</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=2b25c787-1ea0-4b56-9b48-c0e1f49b8be0&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:92V--ErjwLOukczpOPecTwCPFH8&expireAt=1592273809944&policy=eyJkZW50cnlJZCI6IjJiMjVjNzg3LTFlYTAtNGI1Ni05YjQ4LWMwZTFmNDliOGJlMCIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="解决关键字标签冲突"></p>
<p>这个思路其实很简单。在识别普通的标识符之前，你先看看它是关键字还是保留字就可以了。具体做法是：</p>
<p>当第一个字符是 i 的时候，我们让它进入一个特殊的状态。接下来，如果它遇到 n 和 t，就进入状态 4。但这还没有结束，如果后续的字符还有其他的字母和数字，它又变成了普通的标识符。比如，我们可以声明一个 intA（int 和 A 是连着的）这样的变量，而不会跟 int 关键字冲突。</p>
<p>之前的代码修改为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TokenType &#123;</span><br><span class="line">	</span><br><span class="line">	    GE,     <span class="comment">// &gt;=</span></span><br><span class="line">	    GT,     <span class="comment">// &gt;</span></span><br><span class="line">	    Identifier,     <span class="comment">//标识符</span></span><br><span class="line">	    IntLiteral,     <span class="comment">//整型字面量</span></span><br><span class="line">	    Int,    <span class="comment">//Int</span></span><br><span class="line">	    Assignment,<span class="comment">//=</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> DfaState &#123;</span><br><span class="line">	Initial, <span class="comment">//初始状态</span></span><br><span class="line"></span><br><span class="line">     Id,  <span class="comment">//标识符状态</span></span><br><span class="line"></span><br><span class="line">     GT,<span class="comment">// &gt;</span></span><br><span class="line">     GE,<span class="comment">// &gt;=</span></span><br><span class="line">    IntLiteral, <span class="comment">//数字字面量</span></span><br><span class="line">    Int, Id_int1, Id_int2, Id_int3,<span class="comment">//Int</span></span><br><span class="line">    Assignment,<span class="comment">//=</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化有限自动机</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> DfaState <span class="title">initToken</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tokenText.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        token.text = tokenText.toString();</span><br><span class="line">        tokens.add(token);</span><br><span class="line"></span><br><span class="line">        tokenText = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        token = <span class="keyword">new</span> Token();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    DfaState newState = DfaState.Initial;</span><br><span class="line">    <span class="keyword">if</span> (isAlpha(ch)) &#123;              <span class="comment">//第一个字符是字母</span></span><br><span class="line">    	</span><br><span class="line">    	<span class="keyword">if</span>(ch == <span class="string">'i'</span>) &#123;</span><br><span class="line">    		newState = DfaState.Id_int1; <span class="comment">//进入Id状态</span></span><br><span class="line">    	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    		newState = DfaState.Id; <span class="comment">//进入Id状态</span></span><br><span class="line">    	&#125;</span><br><span class="line">    	</span><br><span class="line">    	</span><br><span class="line">        token.type = TokenType.Identifier;</span><br><span class="line">        tokenText.append(ch);</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isDigit(ch)) &#123;       <span class="comment">//第一个字符是数字</span></span><br><span class="line">        newState = DfaState.IntLiteral;</span><br><span class="line">        token.type = TokenType.IntLiteral;</span><br><span class="line">        tokenText.append(ch);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'&gt;'</span>) &#123;         <span class="comment">//第一个字符是&gt;</span></span><br><span class="line">        newState = DfaState.GT;</span><br><span class="line">        token.type = TokenType.GT;</span><br><span class="line">        tokenText.append(ch);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'='</span>) &#123;</span><br><span class="line">           newState = DfaState.Assignment;</span><br><span class="line">           token.type = TokenType.Assignment;</span><br><span class="line">           tokenText.append(ch);</span><br><span class="line">       &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        newState = DfaState.Initial; <span class="comment">// skip all unknown patterns</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解析脚本</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">parseScript</span><span class="params">(String code)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//初始化数据</span></span><br><span class="line">		tokens = <span class="keyword">new</span> ArrayList&lt;Token&gt;();</span><br><span class="line">	    CharArrayReader reader = <span class="keyword">new</span> CharArrayReader(code.toCharArray());</span><br><span class="line">	    tokenText = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">	    token = <span class="keyword">new</span> Token();</span><br><span class="line">	    <span class="keyword">int</span> ich = <span class="number">0</span>;</span><br><span class="line">	    <span class="keyword">char</span> ch = <span class="number">0</span>;</span><br><span class="line">	    </span><br><span class="line">	    DfaState state = DfaState.Initial;</span><br><span class="line">	    <span class="keyword">try</span> &#123;</span><br><span class="line">	    	<span class="keyword">while</span> ((ich = reader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">	    		ch = (<span class="keyword">char</span>) ich;</span><br><span class="line">	    		<span class="keyword">switch</span> (state) &#123;</span><br><span class="line">	    		<span class="keyword">case</span> Initial:&#123;</span><br><span class="line">	    			state = initToken(ch);          <span class="comment">//重新确定后续状态</span></span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		&#125;</span><br><span class="line">	    		<span class="keyword">case</span> Id:</span><br><span class="line">	                <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> Id_int1:</span><br><span class="line">	    			<span class="keyword">if</span>(ch == <span class="string">'n'</span>) &#123;</span><br><span class="line">	    				state = DfaState.Id_int2;</span><br><span class="line">	    				tokenText.append(ch);</span><br><span class="line">	    			&#125;<span class="keyword">else</span> <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	    				state = DfaState.Id;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> Id_int2:</span><br><span class="line">	    			<span class="keyword">if</span>(ch == <span class="string">'t'</span>) &#123;</span><br><span class="line">	    				state = DfaState.Id_int3;</span><br><span class="line">	    				tokenText.append(ch);</span><br><span class="line">	    			&#125;<span class="keyword">else</span> <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	    				state = DfaState.Id;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> Id_int3:</span><br><span class="line">	    			<span class="keyword">if</span>(isBlank(ch)) &#123;</span><br><span class="line">	    				token.type = TokenType.Int;</span><br><span class="line">	    				state = initToken(ch);</span><br><span class="line">	    			&#125;<span class="keyword">else</span> <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	    				state = DfaState.Id;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> GT:</span><br><span class="line">	                <span class="keyword">if</span> (ch == <span class="string">'='</span>) &#123;</span><br><span class="line">	                    token.type = TokenType.GE;  <span class="comment">//转换成GE</span></span><br><span class="line">	                    state = DfaState.GE;</span><br><span class="line">	                    tokenText.append(ch);</span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出GT状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> GE:</span><br><span class="line">	    		<span class="keyword">case</span> Assignment:</span><br><span class="line">	    			state = initToken(ch);      <span class="comment">//退出GE状态，并保存Token</span></span><br><span class="line">	    			<span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> IntLiteral:</span><br><span class="line">	                <span class="keyword">if</span> (isDigit(ch)) &#123;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//继续保持在数字字面量状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出当前状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		&#125;</span><br><span class="line">	    		  </span><br><span class="line">	        &#125;</span><br><span class="line">	    	</span><br><span class="line">	    	<span class="comment">// 把最后一个token送进去</span></span><br><span class="line">            <span class="keyword">if</span> (tokenText.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                initToken(ch);</span><br><span class="line">            &#125;</span><br><span class="line">	    &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">	        e.printStackTrace();</span><br><span class="line">	    &#125;</span><br><span class="line">	    </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/xuejh/complicationBook/tree/master/02/java/%E7%BB%83%E4%B9%A0%E4%BA%8C" target="_blank" rel="noopener">练习二代码</a></p>
<h2 id="练习三"><a href="#练习三" class="headerlink" title="练习三"></a>练习三</h2><p>代码为2+3*5，最后输出结果为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IntLiteral  <span class="number">2</span></span><br><span class="line">Plus        +  </span><br><span class="line">IntLiteral  <span class="number">3</span>  </span><br><span class="line">Star        *  </span><br><span class="line">IntLiteral  <span class="number">5</span></span><br></pre></td></tr></table></figure>

<h3 id="解析："><a href="#解析：" class="headerlink" title="解析："></a>解析：</h3><p>新增词法规则：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Plus :  <span class="string">'+'</span></span><br><span class="line">Minus : <span class="string">'-'</span></span><br><span class="line">Star :  <span class="string">'*'</span> </span><br><span class="line">Slash : <span class="string">'/'</span></span><br></pre></td></tr></table></figure>

<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> DfaState &#123;</span><br><span class="line">	Initial, <span class="comment">//初始状态</span></span><br><span class="line"></span><br><span class="line">     Id,  <span class="comment">//标识符状态</span></span><br><span class="line"></span><br><span class="line">     GT,<span class="comment">// &gt;</span></span><br><span class="line">     GE,<span class="comment">// &gt;=</span></span><br><span class="line">    IntLiteral, <span class="comment">//数字字面量</span></span><br><span class="line">    Int, Id_int1, Id_int2, Id_int3,<span class="comment">//Int</span></span><br><span class="line">    Assignment,<span class="comment">//=</span></span><br><span class="line">    Plus,<span class="comment">//+</span></span><br><span class="line">    Minus,<span class="comment">//-</span></span><br><span class="line">    Star,<span class="comment">//*</span></span><br><span class="line">    Slash,<span class="comment">///</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TokenType &#123;</span><br><span class="line">	</span><br><span class="line">	    GE,     <span class="comment">// &gt;=</span></span><br><span class="line">	    GT,     <span class="comment">// &gt;</span></span><br><span class="line">	    Identifier,     <span class="comment">//标识符</span></span><br><span class="line">	    IntLiteral,     <span class="comment">//整型字面量</span></span><br><span class="line">	    Int,    <span class="comment">//Int</span></span><br><span class="line">	    Assignment,<span class="comment">//=</span></span><br><span class="line">	    Plus,   <span class="comment">// +</span></span><br><span class="line">	    Minus,  <span class="comment">// -</span></span><br><span class="line">	    Star,   <span class="comment">// *</span></span><br><span class="line">	    Slash,  <span class="comment">// /</span></span><br><span class="line">	    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化有限自动机</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> DfaState <span class="title">initToken</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">if</span> (tokenText.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">	        token.text = tokenText.toString();</span><br><span class="line">	        tokens.add(token);</span><br><span class="line"></span><br><span class="line">	        tokenText = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">	        token = <span class="keyword">new</span> Token();</span><br><span class="line">	    &#125;</span><br><span class="line"></span><br><span class="line">	    DfaState newState = DfaState.Initial;</span><br><span class="line">	    <span class="keyword">if</span> (isAlpha(ch)) &#123;              <span class="comment">//第一个字符是字母</span></span><br><span class="line">	    	</span><br><span class="line">	    	<span class="keyword">if</span>(ch == <span class="string">'i'</span>) &#123;</span><br><span class="line">	    		newState = DfaState.Id_int1; <span class="comment">//进入Id状态</span></span><br><span class="line">	    	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">	    		newState = DfaState.Id; <span class="comment">//进入Id状态</span></span><br><span class="line">	    	&#125;</span><br><span class="line">	    	</span><br><span class="line">	    	</span><br><span class="line">	        token.type = TokenType.Identifier;</span><br><span class="line">	        tokenText.append(ch);</span><br><span class="line">	        </span><br><span class="line">	    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isDigit(ch)) &#123;       <span class="comment">//第一个字符是数字</span></span><br><span class="line">	        newState = DfaState.IntLiteral;</span><br><span class="line">	        token.type = TokenType.IntLiteral;</span><br><span class="line">	        tokenText.append(ch);</span><br><span class="line">	    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'&gt;'</span>) &#123;         <span class="comment">//第一个字符是&gt;</span></span><br><span class="line">	        newState = DfaState.GT;</span><br><span class="line">	        token.type = TokenType.GT;</span><br><span class="line">	        tokenText.append(ch);</span><br><span class="line">	    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'='</span>) &#123;</span><br><span class="line">            newState = DfaState.Assignment;</span><br><span class="line">            token.type = TokenType.Assignment;</span><br><span class="line">            tokenText.append(ch);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'+'</span>) &#123;</span><br><span class="line">            newState = DfaState.Plus;</span><br><span class="line">            token.type = TokenType.Plus;</span><br><span class="line">            tokenText.append(ch);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'-'</span>) &#123;</span><br><span class="line">            newState = DfaState.Minus;</span><br><span class="line">            token.type = TokenType.Minus;</span><br><span class="line">            tokenText.append(ch);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'*'</span>) &#123;</span><br><span class="line">            newState = DfaState.Star;</span><br><span class="line">            token.type = TokenType.Star;</span><br><span class="line">            tokenText.append(ch);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'/'</span>) &#123;</span><br><span class="line">            newState = DfaState.Slash;</span><br><span class="line">            token.type = TokenType.Slash;</span><br><span class="line">            tokenText.append(ch);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	        newState = DfaState.Initial; <span class="comment">// skip all unknown patterns</span></span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="keyword">return</span> newState;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解析脚本</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">parseScript</span><span class="params">(String code)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//初始化数据</span></span><br><span class="line">		tokens = <span class="keyword">new</span> ArrayList&lt;Token&gt;();</span><br><span class="line">	    CharArrayReader reader = <span class="keyword">new</span> CharArrayReader(code.toCharArray());</span><br><span class="line">	    tokenText = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">	    token = <span class="keyword">new</span> Token();</span><br><span class="line">	    <span class="keyword">int</span> ich = <span class="number">0</span>;</span><br><span class="line">	    <span class="keyword">char</span> ch = <span class="number">0</span>;</span><br><span class="line">	    </span><br><span class="line">	    DfaState state = DfaState.Initial;</span><br><span class="line">	    <span class="keyword">try</span> &#123;</span><br><span class="line">	    	<span class="keyword">while</span> ((ich = reader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">	    		ch = (<span class="keyword">char</span>) ich;</span><br><span class="line">	    		<span class="keyword">switch</span> (state) &#123;</span><br><span class="line">	    		<span class="keyword">case</span> Initial:&#123;</span><br><span class="line">	    			state = initToken(ch);          <span class="comment">//重新确定后续状态</span></span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		&#125;</span><br><span class="line">	    		<span class="keyword">case</span> Id:</span><br><span class="line">	                <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> Id_int1:</span><br><span class="line">	    			<span class="keyword">if</span>(ch == <span class="string">'n'</span>) &#123;</span><br><span class="line">	    				state = DfaState.Id_int2;</span><br><span class="line">	    				tokenText.append(ch);</span><br><span class="line">	    			&#125;<span class="keyword">else</span> <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	    				state = DfaState.Id;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> Id_int2:</span><br><span class="line">	    			<span class="keyword">if</span>(ch == <span class="string">'t'</span>) &#123;</span><br><span class="line">	    				state = DfaState.Id_int3;</span><br><span class="line">	    				tokenText.append(ch);</span><br><span class="line">	    			&#125;<span class="keyword">else</span> <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	    				state = DfaState.Id;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> Id_int3:</span><br><span class="line">	    			<span class="keyword">if</span>(isBlank(ch)) &#123;</span><br><span class="line">	    				token.type = TokenType.Int;</span><br><span class="line">	    				state = initToken(ch);</span><br><span class="line">	    			&#125;<span class="keyword">else</span> <span class="keyword">if</span> (isAlpha(ch) || isDigit(ch)) &#123;</span><br><span class="line">	    				state = DfaState.Id;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//保持标识符状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出标识符状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> GT:</span><br><span class="line">	                <span class="keyword">if</span> (ch == <span class="string">'='</span>) &#123;</span><br><span class="line">	                    token.type = TokenType.GE;  <span class="comment">//转换成GE</span></span><br><span class="line">	                    state = DfaState.GE;</span><br><span class="line">	                    tokenText.append(ch);</span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出GT状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> GE:</span><br><span class="line">	    		<span class="keyword">case</span> Assignment:</span><br><span class="line">	    		<span class="keyword">case</span> Plus:</span><br><span class="line">                <span class="keyword">case</span> Minus:</span><br><span class="line">                <span class="keyword">case</span> Star:</span><br><span class="line">                <span class="keyword">case</span> Slash:</span><br><span class="line">	    			state = initToken(ch);      <span class="comment">//退出GE状态，并保存Token</span></span><br><span class="line">	    			<span class="keyword">break</span>;</span><br><span class="line">	    		<span class="keyword">case</span> IntLiteral:</span><br><span class="line">	                <span class="keyword">if</span> (isDigit(ch)) &#123;</span><br><span class="line">	                    tokenText.append(ch);       <span class="comment">//继续保持在数字字面量状态</span></span><br><span class="line">	                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	                    state = initToken(ch);      <span class="comment">//退出当前状态，并保存Token</span></span><br><span class="line">	                &#125;</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	    		&#125;</span><br><span class="line">	    		  </span><br><span class="line">	        &#125;</span><br><span class="line">	    	</span><br><span class="line">	    	<span class="comment">// 把最后一个token送进去</span></span><br><span class="line">            <span class="keyword">if</span> (tokenText.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                initToken(ch);</span><br><span class="line">            &#125;</span><br><span class="line">	    &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">	        e.printStackTrace();</span><br><span class="line">	    &#125;</span><br><span class="line">	    </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/xuejh/complicationBook/tree/master/02/java/%E7%BB%83%E4%B9%A0%E4%BA%8C" target="_blank" rel="noopener">练习三代码</a></p>
<h1 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h1><p><a href="https://github.com/xuejh/complicationBook/tree/master/02/java/%E5%AE%8C%E6%95%B4" target="_blank" rel="noopener">完整代码</a></p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="https://cdncs.101.com/v0.1/download?dentryId=7db8651e-0506-4516-83f7-4cb50c11bbbb&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:NswwBF98QFzoRyI9JX38vuitkFI&expireAt=1592203937976&policy=eyJkZW50cnlJZCI6IjdkYjg2NTFlLTA1MDYtNDUxNi04M2Y3LTRjYjUwYzExYmJiYiIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="类图"></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/10/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90/" data-id="ckblm6dcm000e71z7731kf69i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编译原理/编译器概览" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/10/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%99%A8%E6%A6%82%E8%A7%88/" class="article-date">
  <time datetime="2020-06-10T07:00:34.000Z" itemprop="datePublished">2020-06-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/10/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%99%A8%E6%A6%82%E8%A7%88/">编译器概览</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h1><p>编译器的整个编译过程如下图：</p>
<p><img src="https://fz-cs.101.com/v0.1/download?dentryId=c95fbbd6-40f1-4cad-8a59-f8a9f5005ea9&size=480&ext=jpg&token=im_disk:BKG5OJg63T7xFIm5xJvb:SduvZhqf0eGkAYDBNKoV5358ucg&expireAt=1592273558192&policy=eyJkZW50cnlJZCI6ImM5NWZiYmQ2LTQwZjEtNGNhZC04YTU5LWY4YTlmNTAwNWVhOSIsInVpZCI6ODcxMDMwLCJyb2xlIjoidXNlciIsInBvbGljeVR5cGUiOiJkb3dubG9hZCJ9" alt="编译器的整个编译过程"></p>
<p>前端（Front End）指的是编译器对程序代码的分析和理解过程。</p>
<p>后端（Back End）则是生成目标代码的过程，跟目标机器有关。</p>
<p>本章只初略的聊一下编译的原理，详细的描述将在后续章节深入探讨。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>这个是本人学习极客时间课程<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>的笔记记录。详情请参考极客时间<a href="http://gk.link/a/10j0x" target="_blank" rel="noopener">《编译原理之美》</a>课程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/10/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%99%A8%E6%A6%82%E8%A7%88/" data-id="ckblm6dcj000671z7gcfn41iz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-英语/英语语法入门第一讲" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/08/%E8%8B%B1%E8%AF%AD/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8%E7%AC%AC%E4%B8%80%E8%AE%B2/" class="article-date">
  <time datetime="2020-06-08T13:24:25.000Z" itemprop="datePublished">2020-06-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%8B%B1%E8%AF%AD/">英语</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/08/%E8%8B%B1%E8%AF%AD/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8%E7%AC%AC%E4%B8%80%E8%AE%B2/">英语语法入门第一讲</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第一讲-语序和五种基本句式"><a href="#第一讲-语序和五种基本句式" class="headerlink" title="第一讲 语序和五种基本句式"></a>第一讲 语序和五种基本句式</h1><h2 id="语序"><a href="#语序" class="headerlink" title="语序"></a>语序</h2><p>英文与中文的语序相同</p>
<p><code>He learns English every day.</code></p>
<p><code>他每天学英语。</code></p>
<h2 id="英语五种基本句式"><a href="#英语五种基本句式" class="headerlink" title="英语五种基本句式"></a>英语五种基本句式</h2><h3 id="基本句式一：S-V-（主-谓）"><a href="#基本句式一：S-V-（主-谓）" class="headerlink" title="基本句式一：S V （主+谓）"></a>基本句式一：S V （主+谓）</h3><p>我们造的所有的句子都需要有一个主体，主体执行的动作我们叫谓语。</p>
<h3 id="基本句式二：S-V-P（主-系-表）"><a href="#基本句式二：S-V-P（主-系-表）" class="headerlink" title="基本句式二：S V P（主+系+表）"></a>基本句式二：S V P（主+系+表）</h3><p>系动词是起到联系作用的动词，连接前面的主语和后面的表语。</p>
<p>表语是描述主语的性质、特点还有位置的词。</p>
<h3 id="基本句式三：S-V-O（主-谓-宾）"><a href="#基本句式三：S-V-O（主-谓-宾）" class="headerlink" title="基本句式三：S V O（主+谓+宾）"></a>基本句式三：S V O（主+谓+宾）</h3><p>主语是动作的主体，谓语是动作，动作执行在什么物体上，执行在谁的身上，谁就是宾语。宾语就是动作执行的对象。</p>
<h3 id="基本句式四：S-V-o-O（主-谓-间宾-直宾）"><a href="#基本句式四：S-V-o-O（主-谓-间宾-直宾）" class="headerlink" title="基本句式四：S V o O（主+谓+间宾+直宾）"></a>基本句式四：S V o O（主+谓+间宾+直宾）</h3><p>主体、动作。动作要作用在两个物体身上。第一个物体叫做间宾，间宾通常是人。直宾通常是物。</p>
<h3 id="基本句式五：S-V-O-C（主-谓-宾-宾补）"><a href="#基本句式五：S-V-O-C（主-谓-宾-宾补）" class="headerlink" title="基本句式五：S V  O C（主+谓+宾+宾补）"></a>基本句式五：S V  O C（主+谓+宾+宾补）</h3><p>宾语就是动作执行的对象，宾补就是补充说明的意思，当我们的宾语不能完全说明谓语执行的对象，执行的对象的结果是什么呢，我们就要用宾补来补充说明宾补，所以我们叫宾补。</p>
<h2 id="句式1：Subect（主语）-Verb（谓语）"><a href="#句式1：Subect（主语）-Verb（谓语）" class="headerlink" title="句式1：Subect（主语） + Verb（谓语）"></a>句式1：Subect（主语） + Verb（谓语）</h2><p>The universe remains.</p>
<p>宇宙长存。</p>
<p>通过两个句子的对比，我们可以得出结论英语的语序和中文的语序是完全一致的。</p>
<h2 id="句式2：S（主语）-L-V-系动词-P（表语）"><a href="#句式2：S（主语）-L-V-系动词-P（表语）" class="headerlink" title="句式2：S（主语）+L.V(系动词)+P（表语）"></a>句式2：S（主语）+L.V(系动词)+P（表语）</h2><p>The food is delicious.</p>
<p>这个食物很好吃。</p>
<p>通过两个句子的对比，我们可以得出结论英语的语序和中文的语序是完全一致的。</p>
<h2 id="句式3：Subject（主语）-Verb（谓语）-Object（宾语）"><a href="#句式3：Subject（主语）-Verb（谓语）-Object（宾语）" class="headerlink" title="句式3：Subject（主语）+Verb（谓语）+Object（宾语）"></a>句式3：Subject（主语）+Verb（谓语）+Object（宾语）</h2><p>He took his bag and left.</p>
<p>他拿着书包离开了。</p>
<p>通过两个句子的对比，我们可以得出结论英语的语序和中文的语序是完全一致的。</p>
<h2 id="句式4：S（主语）-V（谓语）-I-o-间接宾语-D-o（直接宾语）"><a href="#句式4：S（主语）-V（谓语）-I-o-间接宾语-D-o（直接宾语）" class="headerlink" title="句式4：S（主语）+V（谓语）+I.o(间接宾语)+D.o（直接宾语）"></a>句式4：S（主语）+V（谓语）+I.o(间接宾语)+D.o（直接宾语）</h2><p>Her father bought her a dictionary.</p>
<p>她爸爸给她买了一本词典。</p>
<p>通过两个句子的对比，我们可以得出结论英语的语序和中文的语序是完全一致的。</p>
<h2 id="句式5：S（主语）-V（动词）-O（宾语）-C（补语）"><a href="#句式5：S（主语）-V（动词）-O（宾语）-C（补语）" class="headerlink" title="句式5：S（主语）+V（动词）+O（宾语）+C（补语）"></a>句式5：S（主语）+V（动词）+O（宾语）+C（补语）</h2><p>We made him our monitor.</p>
<p>我们选他当班长。</p>
<p>通过两个句子的对比，我们可以得出结论英语的语序和中文的语序是完全一致的。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>通过刚才英语五种基本句式和中文的语序是一样的。是不是所有的英语的语序和中文都一样，答案当然不是了。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.ixigua.com/pseries/6803595314864325132/?logTag=zqDoK7U9TSdwuL0xA8MyC" target="_blank" rel="noopener">西瓜视频</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/08/%E8%8B%B1%E8%AF%AD/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8%E7%AC%AC%E4%B8%80%E8%AE%B2/" data-id="ckblm6dcn000h71z78gui7fnv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-其它/如何搭建个人博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/08/%E5%85%B6%E5%AE%83/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time datetime="2020-06-08T06:02:31.000Z" itemprop="datePublished">2020-06-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%85%B6%E5%AE%83/">其它</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/08/%E5%85%B6%E5%AE%83/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">如何搭建个人博客-hexo</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h1><h2 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h2><p>github上新建一个仓库，仓库名必须为<user-name>.github.io 格式,其中 <user-name> 是你github的昵称。</p>
<h2 id="全局安装hexo"><a href="#全局安装hexo" class="headerlink" title="全局安装hexo"></a>全局安装hexo</h2><p><code>npm install -g hexo</code></p>
<h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><p>浏览器访问 <code>localhost:4000</code>，就可以看到本地效果了</p>
<p><code>hexo init</code></p>
<p><code>Hexo s</code></p>
<h2 id="部署到GitHub"><a href="#部署到GitHub" class="headerlink" title="部署到GitHub"></a>部署到GitHub</h2><p>在项目根目录下找到 <code>_congif.yml</code>，找到 <code>deploy</code> 字段并填写完整</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;你的仓库地址&gt; # https:&#x2F;&#x2F;github.com&#x2F;TJ-XiaJiaHao&#x2F;TJ-XiaJiaHao.github.io</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<p>通过hexo-deployer-git上传到仓库</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>执行下面两个命令，就可以把项目自动部署到 <code>github</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<h2 id="查看效果"><a href="#查看效果" class="headerlink" title="查看效果"></a>查看效果</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">浏览器访问：https:<span class="comment">//tj-xiajiahao.github.io/ 即可看到效果。</span></span><br></pre></td></tr></table></figure>

<h2 id="如何创建新文章"><a href="#如何创建新文章" class="headerlink" title="如何创建新文章"></a>如何创建新文章</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [layout] 为布局，可选项为 `post`、`page`、`draft`，这将决定文章所在文件路径。</span></span><br><span class="line"><span class="comment">// &lt;title&gt; 为文章标题</span></span><br><span class="line"><span class="comment">// 如 hexo new post 除了帅气，我还有啥！</span></span><br><span class="line">hexo <span class="keyword">new</span> [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>

<h2 id="如何发布文章"><a href="#如何发布文章" class="headerlink" title="如何发布文章"></a>如何发布文章</h2><p><code>hexo g -d</code></p>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p><code>npm ERR! code ETARGET</code><br><code>npm ERR! notarget No matching version found for hexo-server@^0.0.0.</code><br><code>npm ERR! notarget In most cases you or one of your dependencies are requesting</code><br><code>npm ERR! notarget a package version that doesn&#39;t exist.</code></p>
<p><code>(base) xuejinhuideMac-mini:blog ND$ hexo new post 编译原理</code><br><code>ERROR Plugin load failed: hexo-renderer-marked</code><br><code>Error: EISDIR: illegal operation on a directory, read</code><br><code>ERROR Plugin load failed: hexo-server</code><br><code>Error: EISDIR: illegal operation on a directory, read</code></p>
<p>原因是找不到合适的hexo-renderer-marked和hexo-server版本,修改package.json</p>
<p><code>&quot;hexo-renderer-marked&quot;: &quot;^1.0.1&quot;,</code></p>
<p><code>&quot;hexo-server&quot;: &quot;&gt;0.0.0&quot;</code></p>
<h2 id="页面一直显示空白问题"><a href="#页面一直显示空白问题" class="headerlink" title="页面一直显示空白问题"></a>页面一直显示空白问题</h2><p>原因应该是之前发文章是这么写的hexo new post 除了帅气，我还有啥！，应该改为这么写hexo new “This is a new article”。</p>
<h2 id="Ctrl-C-停止后重新hexo-s无法访问"><a href="#Ctrl-C-停止后重新hexo-s无法访问" class="headerlink" title="Ctrl+C 停止后重新hexo s无法访问"></a>Ctrl+C 停止后重新hexo s无法访问</h2><p>需要重新npm install一下</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://www.jianshu.com/p/390f202c5b0e" target="_blank" rel="noopener">5分钟搞定个人博客-hexo</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/08/%E5%85%B6%E5%AE%83/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" data-id="ckblm6dci000571z79fydbkpa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B6%E5%AE%83/" rel="tag">其它</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
<div class="widget tag">
  <h3 class="title">Categories</h3>
     <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/">antlr4权威指南</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E5%AE%83/">其它</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AD%A3%E5%88%99/">正则</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%8B%B1%E8%AF%AD/">英语</a><span class="category-list-count">1</span></li></ul> 
</div>
 

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" rel="tag">antlr4权威指南</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B6%E5%AE%83/" rel="tag">其它</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99/" rel="tag">正则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/antlr4%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" style="font-size: 10px;">antlr4权威指南</a> <a href="/tags/%E5%85%B6%E5%AE%83/" style="font-size: 10px;">其它</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 10px;">正则</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 20px;">编译原理</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 10px;">英语</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/19/%E5%89%8D%E8%A8%80/">前言</a>
          </li>
        
          <li>
            <a href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/Antlr/">Antlr</a>
          </li>
        
          <li>
            <a href="/2020/06/17/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%89%EF%BC%89/">语法分析（三）</a>
          </li>
        
          <li>
            <a href="/2020/06/16/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89/">语法分析（二）</a>
          </li>
        
          <li>
            <a href="/2020/06/15/%E6%AD%A3%E5%88%99/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Jinhui Xue<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>